{"mappings":"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","sources":["node_modules/algoliasearch-helper/src/version.js","node_modules/hogan.js/lib/template.js","node_modules/algoliasearch/dist/algoliasearch-lite.umd.js","node_modules/algoliasearch-helper/src/functions/merge.js","node_modules/algoliasearch-helper/src/functions/defaultsPure.js","node_modules/algoliasearch-helper/src/functions/intersection.js","node_modules/algoliasearch-helper/src/functions/find.js","node_modules/algoliasearch-helper/src/functions/valToNumber.js","node_modules/algoliasearch-helper/src/functions/omit.js","node_modules/algoliasearch-helper/src/functions/objectHasKeys.js","node_modules/algoliasearch-helper/src/utils/isValidUserToken.js","node_modules/algoliasearch-helper/src/SearchParameters/RefinementList.js","node_modules/algoliasearch-helper/src/SearchParameters/index.js","node_modules/algoliasearch-helper/src/functions/orderBy.js","node_modules/algoliasearch-helper/src/functions/compact.js","node_modules/algoliasearch-helper/src/functions/findIndex.js","node_modules/algoliasearch-helper/src/functions/formatSort.js","node_modules/algoliasearch-helper/src/SearchResults/index.js","node_modules/algoliasearch-helper/src/functions/escapeFacetValue.js","node_modules/algoliasearch-helper/src/SearchResults/generate-hierarchical-tree.js","node_modules/@algolia/events/events.js","node_modules/algoliasearch-helper/src/DerivedHelper/index.js","node_modules/algoliasearch-helper/src/functions/inherits.js","node_modules/algoliasearch-helper/src/requestBuilder.js","node_modules/algoliasearch-helper/src/algoliasearch.helper.js","node_modules/algoliasearch-helper/index.js","node_modules/instantsearch.js/es/lib/utils/documentation.js","node_modules/instantsearch.js/es/lib/utils/render-args.js","node_modules/instantsearch.js/es/lib/utils/isIndexWidget.js","node_modules/instantsearch.js/es/lib/utils/findIndex.js","node_modules/instantsearch.js/es/lib/utils/uniq.js","node_modules/instantsearch.js/es/lib/utils/mergeSearchParameters.js","node_modules/instantsearch.js/es/lib/utils/resolveSearchParameters.js","node_modules/instantsearch.js/es/widgets/index/index.js","node_modules/instantsearch.js/es/lib/version.js","node_modules/instantsearch.js/es/lib/suit.js","node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js","node_modules/instantsearch.js/es/lib/utils/escape-html.js","node_modules/instantsearch.js/es/lib/utils/isPlainObject.js","node_modules/instantsearch.js/es/lib/utils/escape-highlight.js","node_modules/instantsearch.js/es/helpers/highlight.js","node_modules/instantsearch.js/es/lib/utils/serializer.js","node_modules/instantsearch.js/es/helpers/insights.js","node_modules/instantsearch.js/es/lib/utils/concatHighlightedParts.js","node_modules/instantsearch.js/es/lib/utils/getHighlightedParts.js","node_modules/instantsearch.js/es/lib/utils/getHighlightFromSiblings.js","node_modules/instantsearch.js/es/lib/utils/reverseHighlightedParts.js","node_modules/instantsearch.js/es/helpers/reverseHighlight.js","node_modules/instantsearch.js/es/helpers/reverseSnippet.js","node_modules/instantsearch.js/es/helpers/snippet.js","node_modules/instantsearch.js/es/lib/formatNumber.js","node_modules/instantsearch.js/es/lib/createHelpers.js","node_modules/instantsearch.js/es/lib/utils/defer.js","node_modules/instantsearch.js/es/lib/utils/noop.js","node_modules/instantsearch.js/es/lib/utils/setIndexHelperState.js","node_modules/instantsearch.js/es/lib/stateMappings/simple.js","node_modules/qs/lib/formats.js","node_modules/qs/lib/utils.js","node_modules/qs/lib/stringify.js","node_modules/qs/lib/parse.js","node_modules/instantsearch.js/es/lib/utils/safelyRunOnBrowser.js","node_modules/instantsearch.js/es/lib/routers/history.js","node_modules/qs/lib/index.js","node_modules/instantsearch.js/es/lib/utils/isEqual.js","node_modules/instantsearch.js/es/middlewares/createRouterMiddleware.js","node_modules/instantsearch.js/es/middlewares/createMetadataMiddleware.js","node_modules/instantsearch.js/es/lib/InstantSearch.js","node_modules/instantsearch.js/es/helpers/get-insights-anonymous-user-token.js","node_modules/instantsearch.js/es/lib/infiniteHitsCache/sessionStorage.js","node_modules/instantsearch.js/es/lib/utils/logger.js","node_modules/instantsearch.js/es/index.js","node_modules/instantsearch.js/es/connectors/configure/connectConfigure.js","node_modules/instantsearch.js/es/widgets/configure/configure.js","node_modules/preact/src/util.js","node_modules/preact/src/options.js","node_modules/preact/src/create-element.js","node_modules/preact/src/component.js","node_modules/preact/src/constants.js","node_modules/preact/src/diff/children.js","node_modules/preact/src/diff/props.js","node_modules/preact/src/diff/index.js","node_modules/preact/src/render.js","node_modules/@algolia/ui-components-shared/dist/esm/cx.js","node_modules/instantsearch.js/es/lib/utils/hits-absolute-position.js","node_modules/instantsearch.js/es/lib/utils/hits-query-id.js","node_modules/instantsearch.js/es/lib/utils/checkRendering.js","node_modules/instantsearch.js/es/lib/utils/getObjectType.js","node_modules/instantsearch.js/es/lib/utils/createSendEventForHits.js","node_modules/preact/src/diff/catch-error.js","node_modules/instantsearch.js/es/connectors/hits/connectHits.js","node_modules/hogan.js/lib/compiler.js","node_modules/hogan.js/lib/hogan.js","node_modules/htm/dist/htm.module.js","node_modules/htm/preact/index.module.js","node_modules/@babel/runtime/helpers/extends.js","node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","node_modules/@babel/runtime/helpers/objectWithoutProperties.js","node_modules/@algolia/ui-components-highlight-vdom/dist/esm/Highlight.js","node_modules/instantsearch.js/es/components/InternalHighlight/InternalHighlight.js","node_modules/instantsearch.js/es/components/Highlight/Highlight.js","node_modules/instantsearch.js/es/lib/utils/toArray.js","node_modules/instantsearch.js/es/helpers/components/Highlight.js","node_modules/instantsearch.js/es/components/ReverseHighlight/ReverseHighlight.js","node_modules/instantsearch.js/es/helpers/components/ReverseHighlight.js","node_modules/instantsearch.js/es/components/ReverseSnippet/ReverseSnippet.js","node_modules/instantsearch.js/es/helpers/components/ReverseSnippet.js","node_modules/instantsearch.js/es/components/Snippet/Snippet.js","node_modules/instantsearch.js/es/helpers/components/Snippet.js","node_modules/instantsearch.js/es/lib/templating/renderTemplate.js","node_modules/instantsearch.js/es/components/Template/Template.js","node_modules/instantsearch.js/es/components/Hits/Hits.js","node_modules/instantsearch.js/es/widgets/hits/defaultTemplates.js","node_modules/instantsearch.js/es/lib/utils/getContainerNode.js","node_modules/instantsearch.js/es/lib/utils/isDomElement.js","node_modules/instantsearch.js/es/lib/templating/prepareTemplateProps.js","node_modules/instantsearch.js/es/lib/insights/client.js","node_modules/instantsearch.js/es/lib/utils/find.js","node_modules/instantsearch.js/es/lib/insights/listener.js","node_modules/instantsearch.js/es/widgets/hits/hits.js","node_modules/instantsearch.js/es/lib/utils/isSpecialClick.js","node_modules/instantsearch.js/es/components/RefinementList/RefinementListItem.js","node_modules/instantsearch.js/es/components/SearchBox/SearchBox.js","node_modules/instantsearch.js/es/components/RefinementList/RefinementList.js","node_modules/instantsearch.js/es/lib/utils/isFacetRefined.js","node_modules/instantsearch.js/es/lib/utils/createSendEventForFacet.js","node_modules/instantsearch.js/es/connectors/menu/connectMenu.js","node_modules/instantsearch.js/es/widgets/menu/defaultTemplates.js","node_modules/instantsearch.js/es/widgets/menu/menu.js","node_modules/instantsearch.js/es/components/Pagination/Pagination.js","node_modules/instantsearch.js/es/lib/utils/range.js","node_modules/instantsearch.js/es/connectors/pagination/Paginator.js","node_modules/instantsearch.js/es/connectors/pagination/connectPagination.js","node_modules/instantsearch.js/es/widgets/pagination/pagination.js","src/app.js"],"sourcesContent":["'use strict';\n\nmodule.exports = '3.11.1';\n","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nvar Hogan = {};\n\n(function (Hogan) {\n  Hogan.Template = function (codeObj, text, compiler, options) {\n    codeObj = codeObj || {};\n    this.r = codeObj.code || this.r;\n    this.c = compiler;\n    this.options = options || {};\n    this.text = text || '';\n    this.partials = codeObj.partials || {};\n    this.subs = codeObj.subs || {};\n    this.buf = '';\n  }\n\n  Hogan.Template.prototype = {\n    // render: replaced by generated code.\n    r: function (context, partials, indent) { return ''; },\n\n    // variable escaping\n    v: hoganEscape,\n\n    // triple stache\n    t: coerceToString,\n\n    render: function render(context, partials, indent) {\n      return this.ri([context], partials || {}, indent);\n    },\n\n    // render internal -- a hook for overrides that catches partials too\n    ri: function (context, partials, indent) {\n      return this.r(context, partials, indent);\n    },\n\n    // ensurePartial\n    ep: function(symbol, partials) {\n      var partial = this.partials[symbol];\n\n      // check to see that if we've instantiated this partial before\n      var template = partials[partial.name];\n      if (partial.instance && partial.base == template) {\n        return partial.instance;\n      }\n\n      if (typeof template == 'string') {\n        if (!this.c) {\n          throw new Error(\"No compiler available.\");\n        }\n        template = this.c.compile(template, this.options);\n      }\n\n      if (!template) {\n        return null;\n      }\n\n      // We use this to check whether the partials dictionary has changed\n      this.partials[symbol].base = template;\n\n      if (partial.subs) {\n        // Make sure we consider parent template now\n        if (!partials.stackText) partials.stackText = {};\n        for (key in partial.subs) {\n          if (!partials.stackText[key]) {\n            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n          }\n        }\n        template = createSpecializedPartial(template, partial.subs, partial.partials,\n          this.stackSubs, this.stackPartials, partials.stackText);\n      }\n      this.partials[symbol].instance = template;\n\n      return template;\n    },\n\n    // tries to find a partial in the current scope and render it\n    rp: function(symbol, context, partials, indent) {\n      var partial = this.ep(symbol, partials);\n      if (!partial) {\n        return '';\n      }\n\n      return partial.ri(context, partials, indent);\n    },\n\n    // render a section\n    rs: function(context, partials, section) {\n      var tail = context[context.length - 1];\n\n      if (!isArray(tail)) {\n        section(context, partials, this);\n        return;\n      }\n\n      for (var i = 0; i < tail.length; i++) {\n        context.push(tail[i]);\n        section(context, partials, this);\n        context.pop();\n      }\n    },\n\n    // maybe start a section\n    s: function(val, ctx, partials, inverted, start, end, tags) {\n      var pass;\n\n      if (isArray(val) && val.length === 0) {\n        return false;\n      }\n\n      if (typeof val == 'function') {\n        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n      }\n\n      pass = !!val;\n\n      if (!inverted && pass && ctx) {\n        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);\n      }\n\n      return pass;\n    },\n\n    // find values with dotted names\n    d: function(key, ctx, partials, returnFound) {\n      var found,\n          names = key.split('.'),\n          val = this.f(names[0], ctx, partials, returnFound),\n          doModelGet = this.options.modelGet,\n          cx = null;\n\n      if (key === '.' && isArray(ctx[ctx.length - 2])) {\n        val = ctx[ctx.length - 1];\n      } else {\n        for (var i = 1; i < names.length; i++) {\n          found = findInScope(names[i], val, doModelGet);\n          if (found !== undefined) {\n            cx = val;\n            val = found;\n          } else {\n            val = '';\n          }\n        }\n      }\n\n      if (returnFound && !val) {\n        return false;\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        ctx.push(cx);\n        val = this.mv(val, ctx, partials);\n        ctx.pop();\n      }\n\n      return val;\n    },\n\n    // find values with normal names\n    f: function(key, ctx, partials, returnFound) {\n      var val = false,\n          v = null,\n          found = false,\n          doModelGet = this.options.modelGet;\n\n      for (var i = ctx.length - 1; i >= 0; i--) {\n        v = ctx[i];\n        val = findInScope(key, v, doModelGet);\n        if (val !== undefined) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        return (returnFound) ? false : \"\";\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        val = this.mv(val, ctx, partials);\n      }\n\n      return val;\n    },\n\n    // higher order templates\n    ls: function(func, cx, partials, text, tags) {\n      var oldTags = this.options.delimiters;\n\n      this.options.delimiters = tags;\n      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n      this.options.delimiters = oldTags;\n\n      return false;\n    },\n\n    // compile text\n    ct: function(text, cx, partials) {\n      if (this.options.disableLambda) {\n        throw new Error('Lambda features disabled.');\n      }\n      return this.c.compile(text, this.options).render(cx, partials);\n    },\n\n    // template result buffering\n    b: function(s) { this.buf += s; },\n\n    fl: function() { var r = this.buf; this.buf = ''; return r; },\n\n    // method replace section\n    ms: function(func, ctx, partials, inverted, start, end, tags) {\n      var textSource,\n          cx = ctx[ctx.length - 1],\n          result = func.call(cx);\n\n      if (typeof result == 'function') {\n        if (inverted) {\n          return true;\n        } else {\n          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n        }\n      }\n\n      return result;\n    },\n\n    // method replace variable\n    mv: function(func, ctx, partials) {\n      var cx = ctx[ctx.length - 1];\n      var result = func.call(cx);\n\n      if (typeof result == 'function') {\n        return this.ct(coerceToString(result.call(cx)), cx, partials);\n      }\n\n      return result;\n    },\n\n    sub: function(name, context, partials, indent) {\n      var f = this.subs[name];\n      if (f) {\n        this.activeSub = name;\n        f(context, partials, this, indent);\n        this.activeSub = false;\n      }\n    }\n\n  };\n\n  //Find a key in an object\n  function findInScope(key, scope, doModelGet) {\n    var val;\n\n    if (scope && typeof scope == 'object') {\n\n      if (scope[key] !== undefined) {\n        val = scope[key];\n\n      // try lookup with get for backbone or similar model data\n      } else if (doModelGet && scope.get && typeof scope.get == 'function') {\n        val = scope.get(key);\n      }\n    }\n\n    return val;\n  }\n\n  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n    function PartialTemplate() {};\n    PartialTemplate.prototype = instance;\n    function Substitutions() {};\n    Substitutions.prototype = instance.subs;\n    var key;\n    var partial = new PartialTemplate();\n    partial.subs = new Substitutions();\n    partial.subsText = {};  //hehe. substext.\n    partial.buf = '';\n\n    stackSubs = stackSubs || {};\n    partial.stackSubs = stackSubs;\n    partial.subsText = stackText;\n    for (key in subs) {\n      if (!stackSubs[key]) stackSubs[key] = subs[key];\n    }\n    for (key in stackSubs) {\n      partial.subs[key] = stackSubs[key];\n    }\n\n    stackPartials = stackPartials || {};\n    partial.stackPartials = stackPartials;\n    for (key in partials) {\n      if (!stackPartials[key]) stackPartials[key] = partials[key];\n    }\n    for (key in stackPartials) {\n      partial.partials[key] = stackPartials[key];\n    }\n\n    return partial;\n  }\n\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  function coerceToString(val) {\n    return String((val === null || val === undefined) ? '' : val);\n  }\n\n  function hoganEscape(str) {\n    str = coerceToString(str);\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n\n  var isArray = Array.isArray || function(a) {\n    return Object.prototype.toString.call(a) === '[object Array]';\n  };\n\n})(typeof exports !== 'undefined' ? exports : Hogan);\n","/*! algoliasearch-lite.umd.js | 4.14.2 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=e||self).algoliasearch=t()}(this,(function(){\"use strict\";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){e(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function u(e){var t,r=\"algoliasearch-client-js-\".concat(e.key),n=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(n().getItem(r)||\"{}\")};return{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){var r=JSON.stringify(e),n=a()[r];return Promise.all([n||t(),void 0!==n])})).then((function(e){var t=o(e,2),n=t[0],a=t[1];return Promise.all([n,a||r.miss(n)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var o=a();return o[JSON.stringify(e)]=t,n().setItem(r,JSON.stringify(o)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=a();delete t[JSON.stringify(e)],n().setItem(r,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){n().removeItem(r)}))}}}function i(e){var t=a(e.caches),r=t.shift();return void 0===r?{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},n=t();return n.then((function(e){return Promise.all([e,r.miss(e)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(e,n,o).catch((function(){return i({caches:t}).get(e,n,o)}))},set:function(e,n){return r.set(e,n).catch((function(){return i({caches:t}).set(e,n)}))},delete:function(e){return r.delete(e).catch((function(){return i({caches:t}).delete(e)}))},clear:function(){return r.clear().catch((function(){return i({caches:t}).clear()}))}}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},a=JSON.stringify(r);if(a in t)return Promise.resolve(e.serializable?JSON.parse(t[a]):t[a]);var u=n(),i=o&&o.miss||function(){return Promise.resolve()};return u.then((function(e){return i(e)})).then((function(){return u}))},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function c(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function l(e,t){return t?(Object.keys(t).forEach((function(r){e[r]=t[r](e)})),e):e}function f(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=0;return e.replace(/%s/g,(function(){return encodeURIComponent(r[o++])}))}var h={WithinQueryParameters:0,WithinHeaders:1};function d(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach((function(e){-1===[\"timeout\",\"headers\",\"queryParameters\",\"data\",\"cacheable\"].indexOf(e)&&(n[e]=r[e])})),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var m={Read:1,Write:2,Any:3},p=1,v=2,y=3;function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return r(r({},e),{},{status:t,lastUpdate:Date.now()})}function b(e){return\"string\"==typeof e?{protocol:\"https\",url:e,accept:m.Any}:{protocol:e.protocol||\"https\",url:e.url,accept:e.accept||m.Any}}var O=\"GET\",P=\"POST\";function q(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(g(t))}))}))).then((function(e){var r=e.filter((function(e){return function(e){return e.status===p||Date.now()-e.lastUpdate>12e4}(e)})),n=e.filter((function(e){return function(e){return e.status===y&&Date.now()-e.lastUpdate<=12e4}(e)})),o=[].concat(a(r),a(n));return{getTimeout:function(e,t){return(0===n.length&&0===e?1:n.length+3+e)*t},statelessHosts:o.length>0?o.map((function(e){return b(e)})):t}}))}function w(e,t,n,o){var u=[],i=function(e,t){if(e.method===O||void 0===e.data&&void 0===t.data)return;var n=Array.isArray(e.data)?e.data:r(r({},e.data),t.data);return JSON.stringify(n)}(n,o),s=function(e,t){var n=r(r({},e.headers),t.headers),o={};return Object.keys(n).forEach((function(e){var t=n[e];o[e.toLowerCase()]=t})),o}(e,o),c=n.method,l=n.method!==O?{}:r(r({},n.data),o.data),f=r(r(r({\"x-algolia-agent\":e.userAgent.value},e.queryParameters),l),o.queryParameters),h=0,d=function t(r,a){var l=r.pop();if(void 0===l)throw{name:\"RetryError\",message:\"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.\",transporterStackTrace:A(u)};var d={data:i,headers:s,method:c,url:S(l,n.path,f),connectTimeout:a(h,e.timeouts.connect),responseTimeout:a(h,o.timeout)},m=function(e){var t={request:d,response:e,host:l,triesLeft:r.length};return u.push(t),t},p={onSuccess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:\"DeserializationError\",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(n){var o=m(n);return n.isTimedOut&&h++,Promise.all([e.logger.info(\"Retryable failure\",x(o)),e.hostsCache.set(l,g(l,n.isTimedOut?y:v))]).then((function(){return t(r,a)}))},onFail:function(e){throw m(e),function(e,t){var r=e.content,n=e.status,o=r;try{o=JSON.parse(r).message}catch(e){}return function(e,t,r){return{name:\"ApiError\",message:e,status:t,transporterStackTrace:r}}(o,n,t)}(e,A(u))}};return e.requester.send(d).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,r=e.status;return!t&&0==~~r}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSuccess(e):t.onFail(e)}(e,p)}))};return q(e.hostsCache,t).then((function(e){return d(a(e.statelessHosts).reverse(),e.getTimeout)}))}function j(e){var t={value:\"Algolia for JavaScript (\".concat(e,\")\"),add:function(e){var r=\"; \".concat(e.segment).concat(void 0!==e.version?\" (\".concat(e.version,\")\"):\"\");return-1===t.value.indexOf(r)&&(t.value=\"\".concat(t.value).concat(r)),t}};return t}function S(e,t,r){var n=T(r),o=\"\".concat(e.protocol,\"://\").concat(e.url,\"/\").concat(\"/\"===t.charAt(0)?t.substr(1):t);return n.length&&(o+=\"?\".concat(n)),o}function T(e){return Object.keys(e).map((function(t){return f(\"%s=%s\",t,(r=e[t],\"[object Object]\"===Object.prototype.toString.call(r)||\"[object Array]\"===Object.prototype.toString.call(r)?JSON.stringify(e[t]):e[t]));var r})).join(\"&\")}function A(e){return e.map((function(e){return x(e)}))}function x(e){var t=e.request.headers[\"x-algolia-api-key\"]?{\"x-algolia-api-key\":\"*****\"}:{};return r(r({},e),{},{request:r(r({},e.request),{},{headers:r(r({},e.request.headers),t)})})}var N=function(e){var t=e.appId,n=function(e,t,r){var n={\"x-algolia-api-key\":r,\"x-algolia-application-id\":t};return{headers:function(){return e===h.WithinHeaders?n:{}},queryParameters:function(){return e===h.WithinQueryParameters?n:{}}}}(void 0!==e.authMode?e.authMode:h.WithinHeaders,t,e.apiKey),a=function(e){var t=e.hostsCache,r=e.logger,n=e.requester,a=e.requestsCache,u=e.responsesCache,i=e.timeouts,s=e.userAgent,c=e.hosts,l=e.queryParameters,f={hostsCache:t,logger:r,requester:n,requestsCache:a,responsesCache:u,timeouts:i,userAgent:s,headers:e.headers,queryParameters:l,hosts:c.map((function(e){return b(e)})),read:function(e,t){var r=d(t,f.timeouts.read),n=function(){return w(f,f.hosts.filter((function(e){return 0!=(e.accept&m.Read)})),e,r)};if(!0!==(void 0!==r.cacheable?r.cacheable:e.cacheable))return n();var a={request:e,mappedRequestOptions:r,transporter:{queryParameters:f.queryParameters,headers:f.headers}};return f.responsesCache.get(a,(function(){return f.requestsCache.get(a,(function(){return f.requestsCache.set(a,n()).then((function(e){return Promise.all([f.requestsCache.delete(a),e])}),(function(e){return Promise.all([f.requestsCache.delete(a),Promise.reject(e)])})).then((function(e){var t=o(e,2);t[0];return t[1]}))}))}),{miss:function(e){return f.responsesCache.set(a,e)}})},write:function(e,t){return w(f,f.hosts.filter((function(e){return 0!=(e.accept&m.Write)})),e,d(t,f.timeouts.write))}};return f}(r(r({hosts:[{url:\"\".concat(t,\"-dsn.algolia.net\"),accept:m.Read},{url:\"\".concat(t,\".algolia.net\"),accept:m.Write}].concat(c([{url:\"\".concat(t,\"-1.algolianet.com\")},{url:\"\".concat(t,\"-2.algolianet.com\")},{url:\"\".concat(t,\"-3.algolianet.com\")}]))},e),{},{headers:r(r(r({},n.headers()),{\"content-type\":\"application/x-www-form-urlencoded\"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return l({transporter:a,appId:t,addAlgoliaAgent:function(e,t){a.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([a.requestsCache.clear(),a.responsesCache.clear()]).then((function(){}))}},e.methods)},C=function(e){return function(t,r){return t.method===O?e.transporter.read(t,r):e.transporter.write(t,r)}},k=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return l(n,r.methods)}},J=function(e){return function(t,n){var o=t.map((function(e){return r(r({},e),{},{params:T(e.params||{})})}));return e.transporter.read({method:P,path:\"1/indexes/*/queries\",data:{requests:o},cacheable:!0},n)}},E=function(e){return function(t,o){return Promise.all(t.map((function(t){var a=t.params,u=a.facetName,i=a.facetQuery,s=n(a,[\"facetName\",\"facetQuery\"]);return k(e)(t.indexName,{methods:{searchForFacetValues:R}}).searchForFacetValues(u,i,r(r({},o),s))})))}},I=function(e){return function(t,r,n){return e.transporter.read({method:P,path:f(\"1/answers/%s/prediction\",e.indexName),data:{query:t,queryLanguages:r},cacheable:!0},n)}},F=function(e){return function(t,r){return e.transporter.read({method:P,path:f(\"1/indexes/%s/query\",e.indexName),data:{query:t},cacheable:!0},r)}},R=function(e){return function(t,r,n){return e.transporter.read({method:P,path:f(\"1/indexes/%s/facets/%s/query\",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},D=1,W=2,H=3;function Q(e,t,n){var o,a={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var r=new XMLHttpRequest;r.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return r.setRequestHeader(t,e.headers[t])}));var n,o=function(e,n){return setTimeout((function(){r.abort(),t({status:0,content:n,isTimedOut:!0})}),1e3*e)},a=o(e.connectTimeout,\"Connection timeout\");r.onreadystatechange=function(){r.readyState>r.OPENED&&void 0===n&&(clearTimeout(a),n=o(e.responseTimeout,\"Socket timeout\"))},r.onerror=function(){0===r.status&&(clearTimeout(a),clearTimeout(n),t({content:r.responseText||\"Network request failed\",status:r.status,isTimedOut:!1}))},r.onload=function(){clearTimeout(a),clearTimeout(n),t({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(e.data)}))}},logger:(o=H,{debug:function(e,t){return D>=o&&console.debug(e,t),Promise.resolve()},info:function(e,t){return W>=o&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:s(),requestsCache:s({serializable:!1}),hostsCache:i({caches:[u({key:\"\".concat(\"4.14.2\",\"-\").concat(e)}),s()]}),userAgent:j(\"4.14.2\").add({segment:\"Browser\",version:\"lite\"}),authMode:h.WithinQueryParameters};return N(r(r(r({},a),n),{},{methods:{search:J,searchForFacetValues:E,multipleQueries:J,multipleSearchForFacetValues:E,customRequest:C,initIndex:function(e){return function(t){return k(e)(t,{methods:{search:F,searchForFacetValues:R,findAnswers:I}})}}}}))}return Q.version=\"4.14.2\",Q}));\n","'use strict';\n\nfunction clone(value) {\n  if (typeof value === 'object' && value !== null) {\n    return _merge(Array.isArray(value) ? [] : {}, value);\n  }\n  return value;\n}\n\nfunction isObjectOrArrayOrFunction(value) {\n  return (\n    typeof value === 'function' ||\n    Array.isArray(value) ||\n    Object.prototype.toString.call(value) === '[object Object]'\n  );\n}\n\nfunction _merge(target, source) {\n  if (target === source) {\n    return target;\n  }\n\n  for (var key in source) {\n    if (\n      !Object.prototype.hasOwnProperty.call(source, key) ||\n      key === '__proto__'\n    ) {\n      continue;\n    }\n\n    var sourceVal = source[key];\n    var targetVal = target[key];\n\n    if (typeof targetVal !== 'undefined' && typeof sourceVal === 'undefined') {\n      continue;\n    }\n\n    if (\n      isObjectOrArrayOrFunction(targetVal) &&\n      isObjectOrArrayOrFunction(sourceVal)\n    ) {\n      target[key] = _merge(targetVal, sourceVal);\n    } else {\n      target[key] = clone(sourceVal);\n    }\n  }\n  return target;\n}\n\n/**\n * This method is like Object.assign, but recursively merges own and inherited\n * enumerable keyed properties of source objects into the destination object.\n *\n * NOTE: this behaves like lodash/merge, but:\n * - does mutate functions if they are a source\n * - treats non-plain objects as plain\n * - does not work for circular objects\n * - treats sparse arrays as sparse\n * - does not convert Array-like objects (Arguments, NodeLists, etc.) to arrays\n *\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n */\n\nfunction merge(target) {\n  if (!isObjectOrArrayOrFunction(target)) {\n    target = {};\n  }\n\n  for (var i = 1, l = arguments.length; i < l; i++) {\n    var source = arguments[i];\n\n    if (isObjectOrArrayOrFunction(source)) {\n      _merge(target, source);\n    }\n  }\n  return target;\n}\n\nmodule.exports = merge;\n","'use strict';\n\n// NOTE: this behaves like lodash/defaults, but doesn't mutate the target\n// it also preserve keys order\nmodule.exports = function defaultsPure() {\n  var sources = Array.prototype.slice.call(arguments);\n\n  return sources.reduceRight(function(acc, source) {\n    Object.keys(Object(source)).forEach(function(key) {\n      if (source[key] === undefined) {\n        return;\n      }\n      if (acc[key] !== undefined) {\n        // remove if already added, so that we can add it in correct order\n        delete acc[key];\n      }\n      acc[key] = source[key];\n    });\n    return acc;\n  }, {});\n};\n","'use strict';\n\nfunction intersection(arr1, arr2) {\n  return arr1.filter(function(value, index) {\n    return (\n      arr2.indexOf(value) > -1 &&\n      arr1.indexOf(value) === index /* skips duplicates */\n    );\n  });\n}\n\nmodule.exports = intersection;\n","'use strict';\n\n// @MAJOR can be replaced by native Array#find when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return undefined;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return array[i];\n    }\n  }\n};\n","'use strict';\n\nfunction valToNumber(v) {\n  if (typeof v === 'number') {\n    return v;\n  } else if (typeof v === 'string') {\n    return parseFloat(v);\n  } else if (Array.isArray(v)) {\n    return v.map(valToNumber);\n  }\n\n  throw new Error('The value should be a number, a parsable string or an array of those.');\n}\n\nmodule.exports = valToNumber;\n","'use strict';\n\n// https://github.com/babel/babel/blob/3aaafae053fa75febb3aa45d45b6f00646e30ba4/packages/babel-helpers/src/helpers.js#L604-L620\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source === null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key;\n  var i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\n","'use strict';\n\nfunction objectHasKeys(obj) {\n  return obj && Object.keys(obj).length > 0;\n}\n\nmodule.exports = objectHasKeys;\n","'use strict';\n\nmodule.exports = function isValidUserToken(userToken) {\n  if (userToken === null) {\n    return false;\n  }\n  return /^[a-zA-Z0-9_-]{1,64}$/.test(userToken);\n};\n","'use strict';\n\n/**\n * Functions to manipulate refinement lists\n *\n * The RefinementList is not formally defined through a prototype but is based\n * on a specific structure.\n *\n * @module SearchParameters.refinementList\n *\n * @typedef {string[]} SearchParameters.refinementList.Refinements\n * @typedef {Object.<string, SearchParameters.refinementList.Refinements>} SearchParameters.refinementList.RefinementList\n */\n\nvar defaultsPure = require('../functions/defaultsPure');\nvar omit = require('../functions/omit');\nvar objectHasKeys = require('../functions/objectHasKeys');\n\nvar lib = {\n  /**\n   * Adds a refinement to a RefinementList\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement, if the value is not a string it will be converted\n   * @return {RefinementList} a new and updated refinement list\n   */\n  addRefinement: function addRefinement(refinementList, attribute, value) {\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return refinementList;\n    }\n\n    var valueAsString = '' + value;\n\n    var facetRefinement = !refinementList[attribute] ?\n      [valueAsString] :\n      refinementList[attribute].concat(valueAsString);\n\n    var mod = {};\n\n    mod[attribute] = facetRefinement;\n\n    return defaultsPure({}, mod, refinementList);\n  },\n  /**\n   * Removes refinement(s) for an attribute:\n   *  - if the value is specified removes the refinement for the value on the attribute\n   *  - if no value is specified removes all the refinements for this attribute\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} [value] the value of the refinement\n   * @return {RefinementList} a new and updated refinement lst\n   */\n  removeRefinement: function removeRefinement(refinementList, attribute, value) {\n    if (value === undefined) {\n      // we use the \"filter\" form of clearRefinement, since it leaves empty values as-is\n      // the form with a string will remove the attribute completely\n      return lib.clearRefinement(refinementList, function(v, f) {\n        return attribute === f;\n      });\n    }\n\n    var valueAsString = '' + value;\n\n    return lib.clearRefinement(refinementList, function(v, f) {\n      return attribute === f && valueAsString === v;\n    });\n  },\n  /**\n   * Toggles the refinement value for an attribute.\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement\n   * @return {RefinementList} a new and updated list\n   */\n  toggleRefinement: function toggleRefinement(refinementList, attribute, value) {\n    if (value === undefined) throw new Error('toggleRefinement should be used with a value');\n\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return lib.removeRefinement(refinementList, attribute, value);\n    }\n\n    return lib.addRefinement(refinementList, attribute, value);\n  },\n  /**\n   * Clear all or parts of a RefinementList. Depending on the arguments, three\n   * kinds of behavior can happen:\n   *  - if no attribute is provided: clears the whole list\n   *  - if an attribute is provided as a string: clears the list for the specific attribute\n   *  - if an attribute is provided as a function: discards the elements for which the function returns true\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} [attribute] the attribute or function to discard\n   * @param {string} [refinementType] optional parameter to give more context to the attribute function\n   * @return {RefinementList} a new and updated refinement list\n   */\n  clearRefinement: function clearRefinement(refinementList, attribute, refinementType) {\n    if (attribute === undefined) {\n      if (!objectHasKeys(refinementList)) {\n        return refinementList;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      return omit(refinementList, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n\n      var newRefinementList = Object.keys(refinementList).reduce(function(memo, key) {\n        var values = refinementList[key] || [];\n        var facetList = values.filter(function(value) {\n          return !attribute(value, key, refinementType);\n        });\n\n        if (facetList.length !== values.length) {\n          hasChanged = true;\n        }\n        memo[key] = facetList;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newRefinementList;\n      return refinementList;\n    }\n  },\n  /**\n   * Test if the refinement value is used for the attribute. If no refinement value\n   * is provided, test if the refinementList contains any refinement for the\n   * given attribute.\n   * @param {RefinementList} refinementList the list of refinement\n   * @param {string} attribute name of the attribute\n   * @param {string} [refinementValue] value of the filter/refinement\n   * @return {boolean}\n   */\n  isRefined: function isRefined(refinementList, attribute, refinementValue) {\n    var containsRefinements = !!refinementList[attribute] &&\n      refinementList[attribute].length > 0;\n\n    if (refinementValue === undefined || !containsRefinements) {\n      return containsRefinements;\n    }\n\n    var refinementValueAsString = '' + refinementValue;\n\n    return refinementList[attribute].indexOf(refinementValueAsString) !== -1;\n  }\n};\n\nmodule.exports = lib;\n","'use strict';\n\nvar merge = require('../functions/merge');\nvar defaultsPure = require('../functions/defaultsPure');\nvar intersection = require('../functions/intersection');\nvar find = require('../functions/find');\nvar valToNumber = require('../functions/valToNumber');\nvar omit = require('../functions/omit');\nvar objectHasKeys = require('../functions/objectHasKeys');\nvar isValidUserToken = require('../utils/isValidUserToken');\n\nvar RefinementList = require('./RefinementList');\n\n/**\n * isEqual, but only for numeric refinement values, possible values:\n * - 5\n * - [5]\n * - [[5]]\n * - [[5,5],[4]]\n */\nfunction isEqualNumericRefinement(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return (\n      a.length === b.length &&\n      a.every(function(el, i) {\n        return isEqualNumericRefinement(b[i], el);\n      })\n    );\n  }\n  return a === b;\n}\n\n/**\n * like _.find but using deep equality to be able to use it\n * to find arrays.\n * @private\n * @param {any[]} array array to search into (elements are base or array of base)\n * @param {any} searchedValue the value we're looking for (base or array of base)\n * @return {any} the searched value or undefined\n */\nfunction findArray(array, searchedValue) {\n  return find(array, function(currentValue) {\n    return isEqualNumericRefinement(currentValue, searchedValue);\n  });\n}\n\n/**\n * The facet list is the structure used to store the list of values used to\n * filter a single attribute.\n * @typedef {string[]} SearchParameters.FacetList\n */\n\n/**\n * Structure to store numeric filters with the operator as the key. The supported operators\n * are `=`, `>`, `<`, `>=`, `<=` and `!=`.\n * @typedef {Object.<string, Array.<number|number[]>>} SearchParameters.OperatorList\n */\n\n/**\n * SearchParameters is the data structure that contains all the information\n * usable for making a search to Algolia API. It doesn't do the search itself,\n * nor does it contains logic about the parameters.\n * It is an immutable object, therefore it has been created in a way that each\n * changes does not change the object itself but returns a copy with the\n * modification.\n * This object should probably not be instantiated outside of the helper. It will\n * be provided when needed. This object is documented for reference as you'll\n * get it from events generated by the {@link AlgoliaSearchHelper}.\n * If need be, instantiate the Helper from the factory function {@link SearchParameters.make}\n * @constructor\n * @classdesc contains all the parameters of a search\n * @param {object|SearchParameters} newParameters existing parameters or partial object\n * for the properties of a new SearchParameters\n * @see SearchParameters.make\n * @example <caption>SearchParameters of the first query in\n *   <a href=\"http://demos.algolia.com/instant-search-demo/\">the instant search demo</a></caption>\n{\n   \"query\": \"\",\n   \"disjunctiveFacets\": [\n      \"customerReviewCount\",\n      \"category\",\n      \"salePrice_range\",\n      \"manufacturer\"\n  ],\n   \"maxValuesPerFacet\": 30,\n   \"page\": 0,\n   \"hitsPerPage\": 10,\n   \"facets\": [\n      \"type\",\n      \"shipping\"\n  ]\n}\n */\nfunction SearchParameters(newParameters) {\n  var params = newParameters ? SearchParameters._parseNumbers(newParameters) : {};\n\n  if (params.userToken !== undefined && !isValidUserToken(params.userToken)) {\n    console.warn('[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\\n  - Format: [a-zA-Z0-9_-]{1,64}');\n  }\n  /**\n   * This attribute contains the list of all the conjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.facets = params.facets || [];\n  /**\n   * This attribute contains the list of all the disjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.disjunctiveFacets = params.disjunctiveFacets || [];\n  /**\n   * This attribute contains the list of all the hierarchical facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * Hierarchical facets are a sub type of disjunctive facets that\n   * let you filter faceted attributes hierarchically.\n   * @member {string[]|object[]}\n   */\n  this.hierarchicalFacets = params.hierarchicalFacets || [];\n\n  // Refinements\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsRefinements = params.facetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * excluded from the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters excluded for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsExcludes = params.facetsExcludes || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the disjunctive facets. Each facet must be properly\n   * defined in the `disjunctiveFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.disjunctiveFacetsRefinements = params.disjunctiveFacetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the numeric attributes.\n   *\n   * The key is the name of the attribute, and the value is the\n   * filters to apply to this attribute.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `numericFilters` attribute.\n   * @member {Object.<string, SearchParameters.OperatorList>}\n   */\n  this.numericRefinements = params.numericRefinements || {};\n  /**\n   * This attribute contains all the tags used to refine the query.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `tagFilters` attribute.\n   * @member {string[]}\n   */\n  this.tagRefinements = params.tagRefinements || [];\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the hierarchical facets. Each facet must be properly\n   * defined in the `hierarchicalFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name. The FacetList values\n   * are structured as a string that contain the values for each level\n   * separated by the configured separator.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.hierarchicalFacetsRefinements = params.hierarchicalFacetsRefinements || {};\n\n  var self = this;\n  Object.keys(params).forEach(function(paramName) {\n    var isKeyKnown = SearchParameters.PARAMETERS.indexOf(paramName) !== -1;\n    var isValueDefined = params[paramName] !== undefined;\n\n    if (!isKeyKnown && isValueDefined) {\n      self[paramName] = params[paramName];\n    }\n  });\n}\n\n/**\n * List all the properties in SearchParameters and therefore all the known Algolia properties\n * This doesn't contain any beta/hidden features.\n * @private\n */\nSearchParameters.PARAMETERS = Object.keys(new SearchParameters());\n\n/**\n * @private\n * @param {object} partialState full or part of a state\n * @return {object} a new object with the number keys as number\n */\nSearchParameters._parseNumbers = function(partialState) {\n  // Do not reparse numbers in SearchParameters, they ought to be parsed already\n  if (partialState instanceof SearchParameters) return partialState;\n\n  var numbers = {};\n\n  var numberKeys = [\n    'aroundPrecision',\n    'aroundRadius',\n    'getRankingInfo',\n    'minWordSizefor2Typos',\n    'minWordSizefor1Typo',\n    'page',\n    'maxValuesPerFacet',\n    'distinct',\n    'minimumAroundRadius',\n    'hitsPerPage',\n    'minProximity'\n  ];\n\n  numberKeys.forEach(function(k) {\n    var value = partialState[k];\n    if (typeof value === 'string') {\n      var parsedValue = parseFloat(value);\n      // global isNaN is ok to use here, value is only number or NaN\n      numbers[k] = isNaN(parsedValue) ? value : parsedValue;\n    }\n  });\n\n  // there's two formats of insideBoundingBox, we need to parse\n  // the one which is an array of float geo rectangles\n  if (Array.isArray(partialState.insideBoundingBox)) {\n    numbers.insideBoundingBox = partialState.insideBoundingBox.map(function(geoRect) {\n      if (Array.isArray(geoRect)) {\n        return geoRect.map(function(value) {\n          return parseFloat(value);\n        });\n      }\n      return geoRect;\n    });\n  }\n\n  if (partialState.numericRefinements) {\n    var numericRefinements = {};\n    Object.keys(partialState.numericRefinements).forEach(function(attribute) {\n      var operators = partialState.numericRefinements[attribute] || {};\n      numericRefinements[attribute] = {};\n      Object.keys(operators).forEach(function(operator) {\n        var values = operators[operator];\n        var parsedValues = values.map(function(v) {\n          if (Array.isArray(v)) {\n            return v.map(function(vPrime) {\n              if (typeof vPrime === 'string') {\n                return parseFloat(vPrime);\n              }\n              return vPrime;\n            });\n          } else if (typeof v === 'string') {\n            return parseFloat(v);\n          }\n          return v;\n        });\n        numericRefinements[attribute][operator] = parsedValues;\n      });\n    });\n    numbers.numericRefinements = numericRefinements;\n  }\n\n  return merge({}, partialState, numbers);\n};\n\n/**\n * Factory for SearchParameters\n * @param {object|SearchParameters} newParameters existing parameters or partial\n * object for the properties of a new SearchParameters\n * @return {SearchParameters} frozen instance of SearchParameters\n */\nSearchParameters.make = function makeSearchParameters(newParameters) {\n  var instance = new SearchParameters(newParameters);\n\n  var hierarchicalFacets = newParameters.hierarchicalFacets || [];\n  hierarchicalFacets.forEach(function(facet) {\n    if (facet.rootPath) {\n      var currentRefinement = instance.getHierarchicalRefinement(facet.name);\n\n      if (currentRefinement.length > 0 && currentRefinement[0].indexOf(facet.rootPath) !== 0) {\n        instance = instance.clearRefinements(facet.name);\n      }\n\n      // get it again in case it has been cleared\n      currentRefinement = instance.getHierarchicalRefinement(facet.name);\n      if (currentRefinement.length === 0) {\n        instance = instance.toggleHierarchicalFacetRefinement(facet.name, facet.rootPath);\n      }\n    }\n  });\n\n  return instance;\n};\n\n/**\n * Validates the new parameters based on the previous state\n * @param {SearchParameters} currentState the current state\n * @param {object|SearchParameters} parameters the new parameters to set\n * @return {Error|null} Error if the modification is invalid, null otherwise\n */\nSearchParameters.validate = function(currentState, parameters) {\n  var params = parameters || {};\n\n  if (currentState.tagFilters && params.tagRefinements && params.tagRefinements.length > 0) {\n    return new Error(\n      '[Tags] Cannot switch from the managed tag API to the advanced API. It is probably ' +\n      'an error, if it is really what you want, you should first clear the tags with clearTags method.');\n  }\n\n  if (currentState.tagRefinements.length > 0 && params.tagFilters) {\n    return new Error(\n      '[Tags] Cannot switch from the advanced tag API to the managed API. It is probably ' +\n      'an error, if it is not, you should first clear the tags with clearTags method.');\n  }\n\n  if (\n    currentState.numericFilters &&\n    params.numericRefinements &&\n    objectHasKeys(params.numericRefinements)\n  ) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the advanced to the managed API. It\" +\n        ' is probably an error, if this is really what you want, you have to first' +\n        ' clear the numeric filters.'\n    );\n  }\n\n  if (objectHasKeys(currentState.numericRefinements) && params.numericFilters) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the managed API to the advanced. It\" +\n      ' is probably an error, if this is really what you want, you have to first' +\n      ' clear the numeric filters.');\n  }\n\n  return null;\n};\n\nSearchParameters.prototype = {\n  constructor: SearchParameters,\n\n  /**\n   * Remove all refinements (disjunctive + conjunctive + excludes + numeric filters)\n   * @method\n   * @param {undefined|string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {SearchParameters}\n   */\n  clearRefinements: function clearRefinements(attribute) {\n    var patch = {\n      numericRefinements: this._clearNumericRefinements(attribute),\n      facetsRefinements: RefinementList.clearRefinement(\n        this.facetsRefinements,\n        attribute,\n        'conjunctiveFacet'\n      ),\n      facetsExcludes: RefinementList.clearRefinement(\n        this.facetsExcludes,\n        attribute,\n        'exclude'\n      ),\n      disjunctiveFacetsRefinements: RefinementList.clearRefinement(\n        this.disjunctiveFacetsRefinements,\n        attribute,\n        'disjunctiveFacet'\n      ),\n      hierarchicalFacetsRefinements: RefinementList.clearRefinement(\n        this.hierarchicalFacetsRefinements,\n        attribute,\n        'hierarchicalFacet'\n      )\n    };\n    if (\n      patch.numericRefinements === this.numericRefinements &&\n      patch.facetsRefinements === this.facetsRefinements &&\n      patch.facetsExcludes === this.facetsExcludes &&\n      patch.disjunctiveFacetsRefinements === this.disjunctiveFacetsRefinements &&\n      patch.hierarchicalFacetsRefinements === this.hierarchicalFacetsRefinements\n    ) {\n      return this;\n    }\n    return this.setQueryParameters(patch);\n  },\n  /**\n   * Remove all the refined tags from the SearchParameters\n   * @method\n   * @return {SearchParameters}\n   */\n  clearTags: function clearTags() {\n    if (this.tagFilters === undefined && this.tagRefinements.length === 0) return this;\n\n    return this.setQueryParameters({\n      tagFilters: undefined,\n      tagRefinements: []\n    });\n  },\n  /**\n   * Set the index.\n   * @method\n   * @param {string} index the index name\n   * @return {SearchParameters}\n   */\n  setIndex: function setIndex(index) {\n    if (index === this.index) return this;\n\n    return this.setQueryParameters({\n      index: index\n    });\n  },\n  /**\n   * Query setter\n   * @method\n   * @param {string} newQuery value for the new query\n   * @return {SearchParameters}\n   */\n  setQuery: function setQuery(newQuery) {\n    if (newQuery === this.query) return this;\n\n    return this.setQueryParameters({\n      query: newQuery\n    });\n  },\n  /**\n   * Page setter\n   * @method\n   * @param {number} newPage new page number\n   * @return {SearchParameters}\n   */\n  setPage: function setPage(newPage) {\n    if (newPage === this.page) return this;\n\n    return this.setQueryParameters({\n      page: newPage\n    });\n  },\n  /**\n   * Facets setter\n   * The facets are the simple facets, used for conjunctive (and) faceting.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for conjunctive faceting\n   * @return {SearchParameters}\n   */\n  setFacets: function setFacets(facets) {\n    return this.setQueryParameters({\n      facets: facets\n    });\n  },\n  /**\n   * Disjunctive facets setter\n   * Change the list of disjunctive (or) facets the helper chan handle.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for disjunctive faceting\n   * @return {SearchParameters}\n   */\n  setDisjunctiveFacets: function setDisjunctiveFacets(facets) {\n    return this.setQueryParameters({\n      disjunctiveFacets: facets\n    });\n  },\n  /**\n   * HitsPerPage setter\n   * Hits per page represents the number of hits retrieved for this query\n   * @method\n   * @param {number} n number of hits retrieved per page of results\n   * @return {SearchParameters}\n   */\n  setHitsPerPage: function setHitsPerPage(n) {\n    if (this.hitsPerPage === n) return this;\n\n    return this.setQueryParameters({\n      hitsPerPage: n\n    });\n  },\n  /**\n   * typoTolerance setter\n   * Set the value of typoTolerance\n   * @method\n   * @param {string} typoTolerance new value of typoTolerance (\"true\", \"false\", \"min\" or \"strict\")\n   * @return {SearchParameters}\n   */\n  setTypoTolerance: function setTypoTolerance(typoTolerance) {\n    if (this.typoTolerance === typoTolerance) return this;\n\n    return this.setQueryParameters({\n      typoTolerance: typoTolerance\n    });\n  },\n  /**\n   * Add a numeric filter for a given attribute\n   * When value is an array, they are combined with OR\n   * When value is a single value, it will combined with AND\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} operator operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number | number[]} value value of the filter\n   * @return {SearchParameters}\n   * @example\n   * // for price = 50 or 40\n   * searchparameter.addNumericRefinement('price', '=', [50, 40]);\n   * @example\n   * // for size = 38 and 40\n   * searchparameter.addNumericRefinement('size', '=', 38);\n   * searchparameter.addNumericRefinement('size', '=', 40);\n   */\n  addNumericRefinement: function(attribute, operator, v) {\n    var value = valToNumber(v);\n\n    if (this.isNumericRefined(attribute, operator, value)) return this;\n\n    var mod = merge({}, this.numericRefinements);\n\n    mod[attribute] = merge({}, mod[attribute]);\n\n    if (mod[attribute][operator]) {\n      // Array copy\n      mod[attribute][operator] = mod[attribute][operator].slice();\n      // Add the element. Concat can't be used here because value can be an array.\n      mod[attribute][operator].push(value);\n    } else {\n      mod[attribute][operator] = [value];\n    }\n\n    return this.setQueryParameters({\n      numericRefinements: mod\n    });\n  },\n  /**\n   * Get the list of conjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getConjunctiveRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of disjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getDisjunctiveRefinements: function(facetName) {\n    if (!this.isDisjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.disjunctiveFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of hierarchical refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getHierarchicalRefinement: function(facetName) {\n    // we send an array but we currently do not support multiple\n    // hierarchicalRefinements for a hierarchicalFacet\n    return this.hierarchicalFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of exclude refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getExcludeRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsExcludes[facetName] || [];\n  },\n\n  /**\n   * Remove all the numeric filter for a given (attribute, operator)\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} [operator] operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number} [number] the value to be removed\n   * @return {SearchParameters}\n   */\n  removeNumericRefinement: function(attribute, operator, paramValue) {\n    if (paramValue !== undefined) {\n      if (!this.isNumericRefined(attribute, operator, paramValue)) {\n        return this;\n      }\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return (\n            key === attribute &&\n            value.op === operator &&\n            isEqualNumericRefinement(value.val, valToNumber(paramValue))\n          );\n        })\n      });\n    } else if (operator !== undefined) {\n      if (!this.isNumericRefined(attribute, operator)) return this;\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return key === attribute && value.op === operator;\n        })\n      });\n    }\n\n    if (!this.isNumericRefined(attribute)) return this;\n    return this.setQueryParameters({\n      numericRefinements: this._clearNumericRefinements(function(value, key) {\n        return key === attribute;\n      })\n    });\n  },\n  /**\n   * Get the list of numeric refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {SearchParameters.OperatorList} list of refinements\n   */\n  getNumericRefinements: function(facetName) {\n    return this.numericRefinements[facetName] || {};\n  },\n  /**\n   * Return the current refinement for the (attribute, operator)\n   * @param {string} attribute attribute in the record\n   * @param {string} operator operator applied on the refined values\n   * @return {Array.<number|number[]>} refined values\n   */\n  getNumericRefinement: function(attribute, operator) {\n    return this.numericRefinements[attribute] && this.numericRefinements[attribute][operator];\n  },\n  /**\n   * Clear numeric filters.\n   * @method\n   * @private\n   * @param {string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {Object.<string, OperatorList>}\n   */\n  _clearNumericRefinements: function _clearNumericRefinements(attribute) {\n    if (attribute === undefined) {\n      if (!objectHasKeys(this.numericRefinements)) {\n        return this.numericRefinements;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      return omit(this.numericRefinements, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n      var numericRefinements = this.numericRefinements;\n      var newNumericRefinements = Object.keys(numericRefinements).reduce(function(memo, key) {\n        var operators = numericRefinements[key];\n        var operatorList = {};\n\n        operators = operators || {};\n        Object.keys(operators).forEach(function(operator) {\n          var values = operators[operator] || [];\n          var outValues = [];\n          values.forEach(function(value) {\n            var predicateResult = attribute({val: value, op: operator}, key, 'numeric');\n            if (!predicateResult) outValues.push(value);\n          });\n          if (outValues.length !== values.length) {\n            hasChanged = true;\n          }\n          operatorList[operator] = outValues;\n        });\n\n        memo[key] = operatorList;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newNumericRefinements;\n      return this.numericRefinements;\n    }\n  },\n  /**\n   * Add a facet to the facets attribute of the helper configuration, if it\n   * isn't already present.\n   * @method\n   * @param {string} facet facet name to add\n   * @return {SearchParameters}\n   */\n  addFacet: function addFacet(facet) {\n    if (this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      facets: this.facets.concat([facet])\n    });\n  },\n  /**\n   * Add a disjunctive facet to the disjunctiveFacets attribute of the helper\n   * configuration, if it isn't already present.\n   * @method\n   * @param {string} facet disjunctive facet name to add\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacet: function addDisjunctiveFacet(facet) {\n    if (this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.concat([facet])\n    });\n  },\n  /**\n   * Add a hierarchical facet to the hierarchicalFacets attribute of the helper\n   * configuration.\n   * @method\n   * @param {object} hierarchicalFacet hierarchical facet to add\n   * @return {SearchParameters}\n   * @throws will throw an error if a hierarchical facet with the same name was already declared\n   */\n  addHierarchicalFacet: function addHierarchicalFacet(hierarchicalFacet) {\n    if (this.isHierarchicalFacet(hierarchicalFacet.name)) {\n      throw new Error(\n        'Cannot declare two hierarchical facets with the same name: `' + hierarchicalFacet.name + '`');\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.concat([hierarchicalFacet])\n    });\n  },\n  /**\n   * Add a refinement on a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addFacetRefinement: function addFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.addRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Exclude a value from a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the exclusion on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addExcludeRefinement: function addExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.addRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Adds a refinement on a disjunctive facet.\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacetRefinement: function addDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    if (RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.addRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * addTagRefinement adds a tag to the list used to filter the results\n   * @param {string} tag tag to be added\n   * @return {SearchParameters}\n   */\n  addTagRefinement: function addTagRefinement(tag) {\n    if (this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.concat(tag)\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Remove a facet from the facets attribute of the helper configuration, if it\n   * is present.\n   * @method\n   * @param {string} facet facet name to remove\n   * @return {SearchParameters}\n   */\n  removeFacet: function removeFacet(facet) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      facets: this.facets.filter(function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a disjunctive facet from the disjunctiveFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet disjunctive facet name to remove\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacet: function removeDisjunctiveFacet(facet) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.filter(function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a hierarchical facet from the hierarchicalFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet hierarchical facet name to remove\n   * @return {SearchParameters}\n   */\n  removeHierarchicalFacet: function removeHierarchicalFacet(facet) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.filter(function(f) {\n        return f.name !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a refinement set on facet. If a value is provided, it will clear the\n   * refinement for the given value, otherwise it will clear all the refinement\n   * values for the faceted attribute.\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} [value] value used to filter\n   * @return {SearchParameters}\n   */\n  removeFacetRefinement: function removeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.removeRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a negative refinement on a facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeExcludeRefinement: function removeExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.removeRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Remove a refinement on a disjunctive facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacetRefinement: function removeDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.removeRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a tag from the list of tag refinements\n   * @method\n   * @param {string} tag the tag to remove\n   * @return {SearchParameters}\n   */\n  removeTagRefinement: function removeTagRefinement(tag) {\n    if (!this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.filter(function(t) {\n        return t !== tag;\n      })\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   * @deprecated since version 2.19.0, see {@link SearchParameters#toggleFacetRefinement}\n   */\n  toggleRefinement: function toggleRefinement(facet, value) {\n    return this.toggleFacetRefinement(facet, value);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   */\n  toggleFacetRefinement: function toggleFacetRefinement(facet, value) {\n    if (this.isHierarchicalFacet(facet)) {\n      return this.toggleHierarchicalFacetRefinement(facet, value);\n    } else if (this.isConjunctiveFacet(facet)) {\n      return this.toggleConjunctiveFacetRefinement(facet, value);\n    } else if (this.isDisjunctiveFacet(facet)) {\n      return this.toggleDisjunctiveFacetRefinement(facet, value);\n    }\n\n    throw new Error('Cannot refine the undeclared facet ' + facet +\n      '; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets');\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleConjunctiveFacetRefinement: function toggleConjunctiveFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.toggleRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleExcludeFacetRefinement: function toggleExcludeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.toggleRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleDisjunctiveFacetRefinement: function toggleDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.toggleRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleHierarchicalFacetRefinement: function toggleHierarchicalFacetRefinement(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration');\n    }\n\n    var separator = this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(facet));\n\n    var mod = {};\n\n    var upOneOrMultipleLevel = this.hierarchicalFacetsRefinements[facet] !== undefined &&\n      this.hierarchicalFacetsRefinements[facet].length > 0 && (\n      // remove current refinement:\n      // refinement was 'beer > IPA', call is toggleRefine('beer > IPA'), refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0] === value ||\n      // remove a parent refinement of the current refinement:\n      //  - refinement was 'beer > IPA > Flying dog'\n      //  - call is toggleRefine('beer > IPA')\n      //  - refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0].indexOf(value + separator) === 0\n    );\n\n    if (upOneOrMultipleLevel) {\n      if (value.indexOf(separator) === -1) {\n        // go back to root level\n        mod[facet] = [];\n      } else {\n        mod[facet] = [value.slice(0, value.lastIndexOf(separator))];\n      }\n    } else {\n      mod[facet] = [value];\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Adds a refinement on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @param {string} path the hierarchical facet path\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is refined\n   */\n  addHierarchicalFacetRefinement: function(facet, path) {\n    if (this.isHierarchicalFacetRefined(facet)) {\n      throw new Error(facet + ' is already refined.');\n    }\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration.');\n    }\n    var mod = {};\n    mod[facet] = [path];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Removes the refinement set on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is not refined\n   */\n  removeHierarchicalFacetRefinement: function(facet) {\n    if (!this.isHierarchicalFacetRefined(facet)) {\n      return this;\n    }\n    var mod = {};\n    mod[facet] = [];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n  /**\n   * Switch the tag refinement\n   * @method\n   * @param {string} tag the tag to remove or add\n   * @return {SearchParameters}\n   */\n  toggleTagRefinement: function toggleTagRefinement(tag) {\n    if (this.isTagRefined(tag)) {\n      return this.removeTagRefinement(tag);\n    }\n\n    return this.addTagRefinement(tag);\n  },\n  /**\n   * Test if the facet name is from one of the disjunctive facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isDisjunctiveFacet: function(facet) {\n    return this.disjunctiveFacets.indexOf(facet) > -1;\n  },\n  /**\n   * Test if the facet name is from one of the hierarchical facets\n   * @method\n   * @param {string} facetName facet name to test\n   * @return {boolean}\n   */\n  isHierarchicalFacet: function(facetName) {\n    return this.getHierarchicalFacetByName(facetName) !== undefined;\n  },\n  /**\n   * Test if the facet name is from one of the conjunctive/normal facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isConjunctiveFacet: function(facet) {\n    return this.facets.indexOf(facet) > -1;\n  },\n  /**\n   * Returns true if the facet is refined, either for a specific value or in\n   * general.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value, optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isFacetRefined: function isFacetRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains exclusions or if a specific value is\n   * excluded.\n   *\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isExcludeRefined: function isExcludeRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsExcludes, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isDisjunctiveFacetRefined: function isDisjunctiveFacetRefined(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isHierarchicalFacetRefined: function isHierarchicalFacetRefined(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return false;\n    }\n\n    var refinements = this.getHierarchicalRefinement(facet);\n\n    if (!value) {\n      return refinements.length > 0;\n    }\n\n    return refinements.indexOf(value) !== -1;\n  },\n  /**\n   * Test if the triple (attribute, operator, value) is already refined.\n   * If only the attribute and the operator are provided, it tests if the\n   * contains any refinement value.\n   * @method\n   * @param {string} attribute attribute for which the refinement is applied\n   * @param {string} [operator] operator of the refinement\n   * @param {string} [value] value of the refinement\n   * @return {boolean} true if it is refined\n   */\n  isNumericRefined: function isNumericRefined(attribute, operator, value) {\n    if (value === undefined && operator === undefined) {\n      return !!this.numericRefinements[attribute];\n    }\n\n    var isOperatorDefined =\n      this.numericRefinements[attribute] &&\n      this.numericRefinements[attribute][operator] !== undefined;\n\n    if (value === undefined || !isOperatorDefined) {\n      return isOperatorDefined;\n    }\n\n    var parsedValue = valToNumber(value);\n    var isAttributeValueDefined =\n      findArray(this.numericRefinements[attribute][operator], parsedValue) !==\n      undefined;\n\n    return isOperatorDefined && isAttributeValueDefined;\n  },\n  /**\n   * Returns true if the tag refined, false otherwise\n   * @method\n   * @param {string} tag the tag to check\n   * @return {boolean}\n   */\n  isTagRefined: function isTagRefined(tag) {\n    return this.tagRefinements.indexOf(tag) !== -1;\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedDisjunctiveFacets: function getRefinedDisjunctiveFacets() {\n    var self = this;\n\n    // attributes used for numeric filter can also be disjunctive\n    var disjunctiveNumericRefinedFacets = intersection(\n      Object.keys(this.numericRefinements).filter(function(facet) {\n        return Object.keys(self.numericRefinements[facet]).length > 0;\n      }),\n      this.disjunctiveFacets\n    );\n\n    return Object.keys(this.disjunctiveFacetsRefinements).filter(function(facet) {\n      return self.disjunctiveFacetsRefinements[facet].length > 0;\n    })\n      .concat(disjunctiveNumericRefinedFacets)\n      .concat(this.getRefinedHierarchicalFacets());\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedHierarchicalFacets: function getRefinedHierarchicalFacets() {\n    var self = this;\n    return intersection(\n      // enforce the order between the two arrays,\n      // so that refinement name index === hierarchical facet index\n      this.hierarchicalFacets.map(function(facet) { return facet.name; }),\n      Object.keys(this.hierarchicalFacetsRefinements).filter(function(facet) {\n        return self.hierarchicalFacetsRefinements[facet].length > 0;\n      })\n    );\n  },\n  /**\n   * Returned the list of all disjunctive facets not refined\n   * @method\n   * @return {string[]}\n   */\n  getUnrefinedDisjunctiveFacets: function() {\n    var refinedFacets = this.getRefinedDisjunctiveFacets();\n\n    return this.disjunctiveFacets.filter(function(f) {\n      return refinedFacets.indexOf(f) === -1;\n    });\n  },\n\n  managedParameters: [\n    'index',\n\n    'facets',\n    'disjunctiveFacets',\n    'facetsRefinements',\n    'hierarchicalFacets',\n    'facetsExcludes',\n\n    'disjunctiveFacetsRefinements',\n    'numericRefinements',\n    'tagRefinements',\n    'hierarchicalFacetsRefinements'\n  ],\n  getQueryParams: function getQueryParams() {\n    var managedParameters = this.managedParameters;\n\n    var queryParams = {};\n\n    var self = this;\n    Object.keys(this).forEach(function(paramName) {\n      var paramValue = self[paramName];\n      if (managedParameters.indexOf(paramName) === -1 && paramValue !== undefined) {\n        queryParams[paramName] = paramValue;\n      }\n    });\n\n    return queryParams;\n  },\n  /**\n   * Let the user set a specific value for a given parameter. Will return the\n   * same instance if the parameter is invalid or if the value is the same as the\n   * previous one.\n   * @method\n   * @param {string} parameter the parameter name\n   * @param {any} value the value to be set, must be compliant with the definition\n   * of the attribute on the object\n   * @return {SearchParameters} the updated state\n   */\n  setQueryParameter: function setParameter(parameter, value) {\n    if (this[parameter] === value) return this;\n\n    var modification = {};\n\n    modification[parameter] = value;\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Let the user set any of the parameters with a plain object.\n   * @method\n   * @param {object} params all the keys and the values to be updated\n   * @return {SearchParameters} a new updated instance\n   */\n  setQueryParameters: function setQueryParameters(params) {\n    if (!params) return this;\n\n    var error = SearchParameters.validate(this, params);\n\n    if (error) {\n      throw error;\n    }\n\n    var self = this;\n    var nextWithNumbers = SearchParameters._parseNumbers(params);\n    var previousPlainObject = Object.keys(this).reduce(function(acc, key) {\n      acc[key] = self[key];\n      return acc;\n    }, {});\n\n    var nextPlainObject = Object.keys(nextWithNumbers).reduce(\n      function(previous, key) {\n        var isPreviousValueDefined = previous[key] !== undefined;\n        var isNextValueDefined = nextWithNumbers[key] !== undefined;\n\n        if (isPreviousValueDefined && !isNextValueDefined) {\n          return omit(previous, [key]);\n        }\n\n        if (isNextValueDefined) {\n          previous[key] = nextWithNumbers[key];\n        }\n\n        return previous;\n      },\n      previousPlainObject\n    );\n\n    return new this.constructor(nextPlainObject);\n  },\n\n  /**\n   * Returns a new instance with the page reset. Two scenarios possible:\n   * the page is omitted -> return the given instance\n   * the page is set -> return a new instance with a page of 0\n   * @return {SearchParameters} a new updated instance\n   */\n  resetPage: function() {\n    if (this.page === undefined) {\n      return this;\n    }\n\n    return this.setPage(0);\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSortBy: function(hierarchicalFacet) {\n    return hierarchicalFacet.sortBy || ['isRefined:desc', 'name:asc'];\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSeparator: function(hierarchicalFacet) {\n    return hierarchicalFacet.separator || ' > ';\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet prefix path or null\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.rootPath or null as default\n   */\n  _getHierarchicalRootPath: function(hierarchicalFacet) {\n    return hierarchicalFacet.rootPath || null;\n  },\n\n  /**\n   * Helper function to check if we show the parent level of the hierarchicalFacet\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.showParentLevel or true as default\n   */\n  _getHierarchicalShowParentLevel: function(hierarchicalFacet) {\n    if (typeof hierarchicalFacet.showParentLevel === 'boolean') {\n      return hierarchicalFacet.showParentLevel;\n    }\n    return true;\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet by it's name\n   * @param  {string} hierarchicalFacetName\n   * @return {object} a hierarchicalFacet\n   */\n  getHierarchicalFacetByName: function(hierarchicalFacetName) {\n    return find(\n      this.hierarchicalFacets,\n      function(f) {\n        return f.name === hierarchicalFacetName;\n      }\n    );\n  },\n\n  /**\n   * Get the current breadcrumb for a hierarchical facet, as an array\n   * @param  {string} facetName Hierarchical facet name\n   * @return {array.<string>} the path as an array of string\n   */\n  getHierarchicalFacetBreadcrumb: function(facetName) {\n    if (!this.isHierarchicalFacet(facetName)) {\n      return [];\n    }\n\n    var refinement = this.getHierarchicalRefinement(facetName)[0];\n    if (!refinement) return [];\n\n    var separator = this._getHierarchicalFacetSeparator(\n      this.getHierarchicalFacetByName(facetName)\n    );\n    var path = refinement.split(separator);\n    return path.map(function(part) {\n      return part.trim();\n    });\n  },\n\n  toString: function() {\n    return JSON.stringify(this, null, 2);\n  }\n};\n\n/**\n * Callback used for clearRefinement method\n * @callback SearchParameters.clearCallback\n * @param {OperatorList|FacetList} value the value of the filter\n * @param {string} key the current attribute name\n * @param {string} type `numeric`, `disjunctiveFacet`, `conjunctiveFacet`, `hierarchicalFacet` or `exclude`\n * depending on the type of facet\n * @return {boolean} `true` if the element should be removed. `false` otherwise.\n */\nmodule.exports = SearchParameters;\n","'use strict';\n\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined;\n    var valIsNull = value === null;\n\n    var othIsDefined = other !== undefined;\n    var othIsNull = other === null;\n\n    if (\n      (!othIsNull && value > other) ||\n      (valIsNull && othIsDefined) ||\n      !valIsDefined\n    ) {\n      return 1;\n    }\n    if (\n      (!valIsNull && value < other) ||\n      (othIsNull && valIsDefined) ||\n      !othIsDefined\n    ) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\n/**\n * @param {Array<object>} collection object with keys in attributes\n * @param {Array<string>} iteratees attributes\n * @param {Array<string>} orders asc | desc\n */\nfunction orderBy(collection, iteratees, orders) {\n  if (!Array.isArray(collection)) {\n    return [];\n  }\n\n  if (!Array.isArray(orders)) {\n    orders = [];\n  }\n\n  var result = collection.map(function(value, index) {\n    return {\n      criteria: iteratees.map(function(iteratee) {\n        return value[iteratee];\n      }),\n      index: index,\n      value: value\n    };\n  });\n\n  result.sort(function comparer(object, other) {\n    var index = -1;\n\n    while (++index < object.criteria.length) {\n      var res = compareAscending(object.criteria[index], other.criteria[index]);\n      if (res) {\n        if (index >= orders.length) {\n          return res;\n        }\n        if (orders[index] === 'desc') {\n          return -res;\n        }\n        return res;\n      }\n    }\n\n    // This ensures a stable sort in V8 and other engines.\n    // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n    return object.index - other.index;\n  });\n\n  return result.map(function(res) {\n    return res.value;\n  });\n}\n\nmodule.exports = orderBy;\n","'use strict';\n\nmodule.exports = function compact(array) {\n  if (!Array.isArray(array)) {\n    return [];\n  }\n\n  return array.filter(Boolean);\n};\n","'use strict';\n\n// @MAJOR can be replaced by native Array#findIndex when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return -1;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return i;\n    }\n  }\n  return -1;\n};\n","'use strict';\n\nvar find = require('./find');\n\n/**\n * Transform sort format from user friendly notation to lodash format\n * @param {string[]} sortBy array of predicate of the form \"attribute:order\"\n * @param {string[]} [defaults] array of predicate of the form \"attribute:order\"\n * @return {array.<string[]>} array containing 2 elements : attributes, orders\n */\nmodule.exports = function formatSort(sortBy, defaults) {\n  var defaultInstructions = (defaults || []).map(function(sort) {\n    return sort.split(':');\n  });\n\n  return sortBy.reduce(\n    function preparePredicate(out, sort) {\n      var sortInstruction = sort.split(':');\n\n      var matchingDefault = find(defaultInstructions, function(\n        defaultInstruction\n      ) {\n        return defaultInstruction[0] === sortInstruction[0];\n      });\n\n      if (sortInstruction.length > 1 || !matchingDefault) {\n        out[0].push(sortInstruction[0]);\n        out[1].push(sortInstruction[1]);\n        return out;\n      }\n\n      out[0].push(matchingDefault[0]);\n      out[1].push(matchingDefault[1]);\n      return out;\n    },\n    [[], []]\n  );\n};\n","'use strict';\n\nvar merge = require('../functions/merge');\nvar defaultsPure = require('../functions/defaultsPure');\nvar orderBy = require('../functions/orderBy');\nvar compact = require('../functions/compact');\nvar find = require('../functions/find');\nvar findIndex = require('../functions/findIndex');\nvar formatSort = require('../functions/formatSort');\nvar fv = require('../functions/escapeFacetValue');\nvar escapeFacetValue = fv.escapeFacetValue;\nvar unescapeFacetValue = fv.unescapeFacetValue;\n\nvar generateHierarchicalTree = require('./generate-hierarchical-tree');\n\n/**\n * @typedef SearchResults.Facet\n * @type {object}\n * @property {string} name name of the attribute in the record\n * @property {object} data the faceting data: value, number of entries\n * @property {object} stats undefined unless facet_stats is retrieved from algolia\n */\n\n/**\n * @typedef SearchResults.HierarchicalFacet\n * @type {object}\n * @property {string} name name of the current value given the hierarchical level, trimmed.\n * If root node, you get the facet name\n * @property {number} count number of objects matching this hierarchical value\n * @property {string} path the current hierarchical value full path\n * @property {boolean} isRefined `true` if the current value was refined, `false` otherwise\n * @property {HierarchicalFacet[]} data sub values for the current level\n */\n\n/**\n * @typedef SearchResults.FacetValue\n * @type {object}\n * @property {string} name the facet value itself\n * @property {number} count times this facet appears in the results\n * @property {boolean} isRefined is the facet currently selected\n * @property {boolean} isExcluded is the facet currently excluded (only for conjunctive facets)\n */\n\n/**\n * @typedef Refinement\n * @type {object}\n * @property {string} type the type of filter used:\n * `numeric`, `facet`, `exclude`, `disjunctive`, `hierarchical`\n * @property {string} attributeName name of the attribute used for filtering\n * @property {string} name the value of the filter\n * @property {number} numericValue the value as a number. Only for numeric filters.\n * @property {string} operator the operator used. Only for numeric filters.\n * @property {number} count the number of computed hits for this filter. Only on facets.\n * @property {boolean} exhaustive if the count is exhaustive\n */\n\n/**\n * @param {string[]} attributes\n */\nfunction getIndices(attributes) {\n  var indices = {};\n\n  attributes.forEach(function(val, idx) {\n    indices[val] = idx;\n  });\n\n  return indices;\n}\n\nfunction assignFacetStats(dest, facetStats, key) {\n  if (facetStats && facetStats[key]) {\n    dest.stats = facetStats[key];\n  }\n}\n\n/**\n * @typedef {Object} HierarchicalFacet\n * @property {string} name\n * @property {string[]} attributes\n */\n\n/**\n * @param {HierarchicalFacet[]} hierarchicalFacets\n * @param {string} hierarchicalAttributeName\n */\nfunction findMatchingHierarchicalFacetFromAttributeName(\n  hierarchicalFacets,\n  hierarchicalAttributeName\n) {\n  return find(hierarchicalFacets, function facetKeyMatchesAttribute(\n    hierarchicalFacet\n  ) {\n    var facetNames = hierarchicalFacet.attributes || [];\n    return facetNames.indexOf(hierarchicalAttributeName) > -1;\n  });\n}\n\n/*eslint-disable */\n/**\n * Constructor for SearchResults\n * @class\n * @classdesc SearchResults contains the results of a query to Algolia using the\n * {@link AlgoliaSearchHelper}.\n * @param {SearchParameters} state state that led to the response\n * @param {array.<object>} results the results from algolia client\n * @example <caption>SearchResults of the first query in\n * <a href=\"http://demos.algolia.com/instant-search-demo\">the instant search demo</a></caption>\n{\n   \"hitsPerPage\": 10,\n   \"processingTimeMS\": 2,\n   \"facets\": [\n      {\n         \"name\": \"type\",\n         \"data\": {\n            \"HardGood\": 6627,\n            \"BlackTie\": 550,\n            \"Music\": 665,\n            \"Software\": 131,\n            \"Game\": 456,\n            \"Movie\": 1571\n         },\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"Free shipping\": 5507\n         },\n         \"name\": \"shipping\"\n      }\n  ],\n   \"hits\": [\n      {\n         \"thumbnailImage\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_54x108_s.gif\",\n         \"_highlightResult\": {\n            \"shortDescription\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n               \"matchedWords\": []\n            },\n            \"category\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Computer Security Software\",\n               \"matchedWords\": []\n            },\n            \"manufacturer\": {\n               \"matchedWords\": [],\n               \"value\": \"Webroot\",\n               \"matchLevel\": \"none\"\n            },\n            \"name\": {\n               \"value\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n               \"matchedWords\": [],\n               \"matchLevel\": \"none\"\n            }\n         },\n         \"image\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_105x210_sc.jpg\",\n         \"shipping\": \"Free shipping\",\n         \"bestSellingRank\": 4,\n         \"shortDescription\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n         \"url\": \"http://www.bestbuy.com/site/webroot-secureanywhere-internet-security-3-devi…d=1219060687969&skuId=1688832&cmp=RMX&ky=2d3GfEmNIzjA0vkzveHdZEBgpPCyMnLTJ\",\n         \"name\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n         \"category\": \"Computer Security Software\",\n         \"salePrice_range\": \"1 - 50\",\n         \"objectID\": \"1688832\",\n         \"type\": \"Software\",\n         \"customerReviewCount\": 5980,\n         \"salePrice\": 49.99,\n         \"manufacturer\": \"Webroot\"\n      },\n      ....\n  ],\n   \"nbHits\": 10000,\n   \"disjunctiveFacets\": [\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"5\": 183,\n            \"12\": 112,\n            \"7\": 149,\n            ...\n         },\n         \"name\": \"customerReviewCount\",\n         \"stats\": {\n            \"max\": 7461,\n            \"avg\": 157.939,\n            \"min\": 1\n         }\n      },\n      {\n         \"data\": {\n            \"Printer Ink\": 142,\n            \"Wireless Speakers\": 60,\n            \"Point & Shoot Cameras\": 48,\n            ...\n         },\n         \"name\": \"category\",\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"> 5000\": 2,\n            \"1 - 50\": 6524,\n            \"501 - 2000\": 566,\n            \"201 - 500\": 1501,\n            \"101 - 200\": 1360,\n            \"2001 - 5000\": 47\n         },\n         \"name\": \"salePrice_range\"\n      },\n      {\n         \"data\": {\n            \"Dynex™\": 202,\n            \"Insignia™\": 230,\n            \"PNY\": 72,\n            ...\n         },\n         \"name\": \"manufacturer\",\n         \"exhaustive\": false\n      }\n  ],\n   \"query\": \"\",\n   \"nbPages\": 100,\n   \"page\": 0,\n   \"index\": \"bestbuy\"\n}\n **/\n/*eslint-enable */\nfunction SearchResults(state, results, options) {\n  var mainSubResponse = results[0];\n\n  this._rawResults = results;\n\n  var self = this;\n\n  // https://www.algolia.com/doc/api-reference/api-methods/search/#response\n  Object.keys(mainSubResponse).forEach(function(key) {\n    self[key] = mainSubResponse[key];\n  });\n\n  // Make every key of the result options reachable from the instance\n  Object.keys(options || {}).forEach(function(key) {\n    self[key] = options[key];\n  });\n\n  /**\n   * query used to generate the results\n   * @name query\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * The query as parsed by the engine given all the rules.\n   * @name parsedQuery\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * all the records that match the search parameters. Each record is\n   * augmented with a new attribute `_highlightResult`\n   * which is an object keyed by attribute and with the following properties:\n   *  - `value` : the value of the facet highlighted (html)\n   *  - `matchLevel`: full, partial or none depending on how the query terms match\n   * @name hits\n   * @member {object[]}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * index where the results come from\n   * @name index\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * number of hits per page requested\n   * @name hitsPerPage\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * total number of hits of this query on the index\n   * @name nbHits\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * total number of pages with respect to the number of hits per page and the total number of hits\n   * @name nbPages\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * current page\n   * @name page\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * The position if the position was guessed by IP.\n   * @name aroundLatLng\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"48.8637,2.3615\",\n   */\n  /**\n   * The radius computed by Algolia.\n   * @name automaticRadius\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"126792922\",\n   */\n  /**\n   * String identifying the server used to serve this request.\n   *\n   * getRankingInfo needs to be set to `true` for this to be returned\n   *\n   * @name serverUsed\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"c7-use-2.algolia.net\",\n   */\n  /**\n   * Boolean that indicates if the computation of the counts did time out.\n   * @deprecated\n   * @name timeoutCounts\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * Boolean that indicates if the computation of the hits did time out.\n   * @deprecated\n   * @name timeoutHits\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * True if the counts of the facets is exhaustive\n   * @name exhaustiveFacetsCount\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * True if the number of hits is exhaustive\n   * @name exhaustiveNbHits\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * Contains the userData if they are set by a [query rule](https://www.algolia.com/doc/guides/query-rules/query-rules-overview/).\n   * @name userData\n   * @member {object[]}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * queryID is the unique identifier of the query used to generate the current search results.\n   * This value is only available if the `clickAnalytics` search parameter is set to `true`.\n   * @name queryID\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n\n  /**\n   * sum of the processing time of all the queries\n   * @member {number}\n   */\n  this.processingTimeMS = results.reduce(function(sum, result) {\n    return result.processingTimeMS === undefined\n      ? sum\n      : sum + result.processingTimeMS;\n  }, 0);\n\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.disjunctiveFacets = [];\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.HierarchicalFacet[]}\n   */\n  this.hierarchicalFacets = state.hierarchicalFacets.map(function initFutureTree() {\n    return [];\n  });\n  /**\n   * other facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.facets = [];\n\n  var disjunctiveFacets = state.getRefinedDisjunctiveFacets();\n\n  var facetsIndices = getIndices(state.facets);\n  var disjunctiveFacetsIndices = getIndices(state.disjunctiveFacets);\n  var nextDisjunctiveResult = 1;\n\n  // Since we send request only for disjunctive facets that have been refined,\n  // we get the facets information from the first, general, response.\n\n  var mainFacets = mainSubResponse.facets || {};\n\n  Object.keys(mainFacets).forEach(function(facetKey) {\n    var facetValueObject = mainFacets[facetKey];\n\n    var hierarchicalFacet = findMatchingHierarchicalFacetFromAttributeName(\n      state.hierarchicalFacets,\n      facetKey\n    );\n\n    if (hierarchicalFacet) {\n      // Place the hierarchicalFacet data at the correct index depending on\n      // the attributes order that was defined at the helper initialization\n      var facetIndex = hierarchicalFacet.attributes.indexOf(facetKey);\n      var idxAttributeName = findIndex(state.hierarchicalFacets, function(f) {\n        return f.name === hierarchicalFacet.name;\n      });\n      self.hierarchicalFacets[idxAttributeName][facetIndex] = {\n        attribute: facetKey,\n        data: facetValueObject,\n        exhaustive: mainSubResponse.exhaustiveFacetsCount\n      };\n    } else {\n      var isFacetDisjunctive = state.disjunctiveFacets.indexOf(facetKey) !== -1;\n      var isFacetConjunctive = state.facets.indexOf(facetKey) !== -1;\n      var position;\n\n      if (isFacetDisjunctive) {\n        position = disjunctiveFacetsIndices[facetKey];\n        self.disjunctiveFacets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], mainSubResponse.facets_stats, facetKey);\n      }\n      if (isFacetConjunctive) {\n        position = facetsIndices[facetKey];\n        self.facets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.facets[position], mainSubResponse.facets_stats, facetKey);\n      }\n    }\n  });\n\n  // Make sure we do not keep holes within the hierarchical facets\n  this.hierarchicalFacets = compact(this.hierarchicalFacets);\n\n  // aggregate the refined disjunctive facets\n  disjunctiveFacets.forEach(function(disjunctiveFacet) {\n    var result = results[nextDisjunctiveResult];\n    var facets = result && result.facets ? result.facets : {};\n    var hierarchicalFacet = state.getHierarchicalFacetByName(disjunctiveFacet);\n\n    // There should be only item in facets.\n    Object.keys(facets).forEach(function(dfacet) {\n      var facetResults = facets[dfacet];\n\n      var position;\n\n      if (hierarchicalFacet) {\n        position = findIndex(state.hierarchicalFacets, function(f) {\n          return f.name === hierarchicalFacet.name;\n        });\n        var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {\n          return f.attribute === dfacet;\n        });\n\n        // previous refinements and no results so not able to find it\n        if (attributeIndex === -1) {\n          return;\n        }\n\n        self.hierarchicalFacets[position][attributeIndex].data = merge(\n          {},\n          self.hierarchicalFacets[position][attributeIndex].data,\n          facetResults\n        );\n      } else {\n        position = disjunctiveFacetsIndices[dfacet];\n\n        var dataFromMainRequest = mainSubResponse.facets && mainSubResponse.facets[dfacet] || {};\n\n        self.disjunctiveFacets[position] = {\n          name: dfacet,\n          data: defaultsPure({}, facetResults, dataFromMainRequest),\n          exhaustive: result.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], result.facets_stats, dfacet);\n\n        if (state.disjunctiveFacetsRefinements[dfacet]) {\n          state.disjunctiveFacetsRefinements[dfacet].forEach(function(refinementValue) {\n            // add the disjunctive refinements if it is no more retrieved\n            if (!self.disjunctiveFacets[position].data[refinementValue] &&\n              state.disjunctiveFacetsRefinements[dfacet].indexOf(unescapeFacetValue(refinementValue)) > -1) {\n              self.disjunctiveFacets[position].data[refinementValue] = 0;\n            }\n          });\n        }\n      }\n    });\n    nextDisjunctiveResult++;\n  });\n\n  // if we have some parent level values for hierarchical facets, merge them\n  state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {\n    var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n\n    var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n    // if we are already at a root refinement (or no refinement at all), there is no\n    // root level values request\n    if (currentRefinement.length === 0 || currentRefinement[0].split(separator).length < 2) {\n      return;\n    }\n\n    results.slice(nextDisjunctiveResult).forEach(function(result) {\n      var facets = result && result.facets\n        ? result.facets\n        : {};\n\n      Object.keys(facets).forEach(function(dfacet) {\n        var facetResults = facets[dfacet];\n        var position = findIndex(state.hierarchicalFacets, function(f) {\n          return f.name === hierarchicalFacet.name;\n        });\n        var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {\n          return f.attribute === dfacet;\n        });\n\n        // previous refinements and no results so not able to find it\n        if (attributeIndex === -1) {\n          return;\n        }\n\n        // when we always get root levels, if the hits refinement is `beers > IPA` (count: 5),\n        // then the disjunctive values will be `beers` (count: 100),\n        // but we do not want to display\n        //   | beers (100)\n        //     > IPA (5)\n        // We want\n        //   | beers (5)\n        //     > IPA (5)\n        var defaultData = {};\n\n        if (currentRefinement.length > 0) {\n          var root = currentRefinement[0].split(separator)[0];\n          defaultData[root] = self.hierarchicalFacets[position][attributeIndex].data[root];\n        }\n\n        self.hierarchicalFacets[position][attributeIndex].data = defaultsPure(\n          defaultData,\n          facetResults,\n          self.hierarchicalFacets[position][attributeIndex].data\n        );\n      });\n\n      nextDisjunctiveResult++;\n    });\n  });\n\n  // add the excludes\n  Object.keys(state.facetsExcludes).forEach(function(facetName) {\n    var excludes = state.facetsExcludes[facetName];\n    var position = facetsIndices[facetName];\n\n    self.facets[position] = {\n      name: facetName,\n      data: mainSubResponse.facets[facetName],\n      exhaustive: mainSubResponse.exhaustiveFacetsCount\n    };\n    excludes.forEach(function(facetValue) {\n      self.facets[position] = self.facets[position] || {name: facetName};\n      self.facets[position].data = self.facets[position].data || {};\n      self.facets[position].data[facetValue] = 0;\n    });\n  });\n\n  /**\n   * @type {Array}\n   */\n  this.hierarchicalFacets = this.hierarchicalFacets.map(generateHierarchicalTree(state));\n\n  /**\n   * @type {Array}\n   */\n  this.facets = compact(this.facets);\n  /**\n   * @type {Array}\n   */\n  this.disjunctiveFacets = compact(this.disjunctiveFacets);\n\n  this._state = state;\n}\n\n/**\n * Get a facet object with its name\n * @deprecated\n * @param {string} name name of the faceted attribute\n * @return {SearchResults.Facet} the facet object\n */\nSearchResults.prototype.getFacetByName = function(name) {\n  function predicate(facet) {\n    return facet.name === name;\n  }\n\n  return find(this.facets, predicate) ||\n    find(this.disjunctiveFacets, predicate) ||\n    find(this.hierarchicalFacets, predicate);\n};\n\n/**\n * Get the facet values of a specified attribute from a SearchResults object.\n * @private\n * @param {SearchResults} results the search results to search in\n * @param {string} attribute name of the faceted attribute to search for\n * @return {array|object} facet values. For the hierarchical facets it is an object.\n */\nfunction extractNormalizedFacetValues(results, attribute) {\n  function predicate(facet) {\n    return facet.name === attribute;\n  }\n\n  if (results._state.isConjunctiveFacet(attribute)) {\n    var facet = find(results.facets, predicate);\n    if (!facet) return [];\n\n    return Object.keys(facet.data).map(function(name) {\n      var value = escapeFacetValue(name);\n      return {\n        name: name,\n        escapedValue: value,\n        count: facet.data[name],\n        isRefined: results._state.isFacetRefined(attribute, value),\n        isExcluded: results._state.isExcludeRefined(attribute, name)\n      };\n    });\n  } else if (results._state.isDisjunctiveFacet(attribute)) {\n    var disjunctiveFacet = find(results.disjunctiveFacets, predicate);\n    if (!disjunctiveFacet) return [];\n\n    return Object.keys(disjunctiveFacet.data).map(function(name) {\n      var value = escapeFacetValue(name);\n      return {\n        name: name,\n        escapedValue: value,\n        count: disjunctiveFacet.data[name],\n        isRefined: results._state.isDisjunctiveFacetRefined(attribute, value)\n      };\n    });\n  } else if (results._state.isHierarchicalFacet(attribute)) {\n    return find(results.hierarchicalFacets, predicate);\n  }\n}\n\n/**\n * Sort nodes of a hierarchical or disjunctive facet results\n * @private\n * @param {function} sortFn\n * @param {HierarchicalFacet|Array} node node upon which we want to apply the sort\n * @param {string[]} names attribute names\n * @param {number} [level=0] current index in the names array\n */\nfunction recSort(sortFn, node, names, level) {\n  level = level || 0;\n\n  if (Array.isArray(node)) {\n    return sortFn(node, names[level]);\n  }\n\n  if (!node.data || node.data.length === 0) {\n    return node;\n  }\n\n  var children = node.data.map(function(childNode) {\n    return recSort(sortFn, childNode, names, level + 1);\n  });\n  var sortedChildren = sortFn(children, names[level]);\n  var newNode = defaultsPure({data: sortedChildren}, node);\n  return newNode;\n}\n\nSearchResults.DEFAULT_SORT = ['isRefined:desc', 'count:desc', 'name:asc'];\n\nfunction vanillaSortFn(order, data) {\n  return data.sort(order);\n}\n\n/**\n * @typedef FacetOrdering\n * @type {Object}\n * @property {string[]} [order]\n * @property {'count' | 'alpha' | 'hidden'} [sortRemainingBy]\n */\n\n/**\n * Sorts facet arrays via their facet ordering\n * @param {Array} facetValues the values\n * @param {FacetOrdering} facetOrdering the ordering\n * @returns {Array}\n */\nfunction sortViaFacetOrdering(facetValues, facetOrdering) {\n  var orderedFacets = [];\n  var remainingFacets = [];\n\n  var order = facetOrdering.order || [];\n  /**\n   * an object with the keys being the values in order, the values their index:\n   * ['one', 'two'] -> { one: 0, two: 1 }\n   */\n  var reverseOrder = order.reduce(function(acc, name, i) {\n    acc[name] = i;\n    return acc;\n  }, {});\n\n  facetValues.forEach(function(item) {\n    // hierarchical facets get sorted using their raw name\n    var name = item.path || item.name;\n    if (reverseOrder[name] !== undefined) {\n      orderedFacets[reverseOrder[name]] = item;\n    } else {\n      remainingFacets.push(item);\n    }\n  });\n\n  orderedFacets = orderedFacets.filter(function(facet) {\n    return facet;\n  });\n\n  var sortRemainingBy = facetOrdering.sortRemainingBy;\n  var ordering;\n  if (sortRemainingBy === 'hidden') {\n    return orderedFacets;\n  } else if (sortRemainingBy === 'alpha') {\n    ordering = [['path', 'name'], ['asc', 'asc']];\n  } else {\n    ordering = [['count'], ['desc']];\n  }\n\n  return orderedFacets.concat(\n    orderBy(remainingFacets, ordering[0], ordering[1])\n  );\n}\n\n/**\n * @param {SearchResults} results the search results class\n * @param {string} attribute the attribute to retrieve ordering of\n * @returns {FacetOrdering=}\n */\nfunction getFacetOrdering(results, attribute) {\n  return (\n    results.renderingContent &&\n    results.renderingContent.facetOrdering &&\n    results.renderingContent.facetOrdering.values &&\n    results.renderingContent.facetOrdering.values[attribute]\n  );\n}\n\n/**\n * Get a the list of values for a given facet attribute. Those values are sorted\n * refinement first, descending count (bigger value on top), and name ascending\n * (alphabetical order). The sort formula can overridden using either string based\n * predicates or a function.\n *\n * This method will return all the values returned by the Algolia engine plus all\n * the values already refined. This means that it can happen that the\n * `maxValuesPerFacet` [configuration](https://www.algolia.com/doc/rest-api/search#param-maxValuesPerFacet)\n * might not be respected if you have facet values that are already refined.\n * @param {string} attribute attribute name\n * @param {object} opts configuration options.\n * @param {boolean} [opts.facetOrdering]\n * Force the use of facetOrdering from the result if a sortBy is present. If\n * sortBy isn't present, facetOrdering will be used automatically.\n * @param {Array.<string> | function} opts.sortBy\n * When using strings, it consists of\n * the name of the [FacetValue](#SearchResults.FacetValue) or the\n * [HierarchicalFacet](#SearchResults.HierarchicalFacet) attributes with the\n * order (`asc` or `desc`). For example to order the value by count, the\n * argument would be `['count:asc']`.\n *\n * If only the attribute name is specified, the ordering defaults to the one\n * specified in the default value for this attribute.\n *\n * When not specified, the order is\n * ascending.  This parameter can also be a function which takes two facet\n * values and should return a number, 0 if equal, 1 if the first argument is\n * bigger or -1 otherwise.\n *\n * The default value for this attribute `['isRefined:desc', 'count:desc', 'name:asc']`\n * @return {FacetValue[]|HierarchicalFacet|undefined} depending on the type of facet of\n * the attribute requested (hierarchical, disjunctive or conjunctive)\n * @example\n * helper.on('result', function(event){\n *   //get values ordered only by name ascending using the string predicate\n *   event.results.getFacetValues('city', {sortBy: ['name:asc']});\n *   //get values  ordered only by count ascending using a function\n *   event.results.getFacetValues('city', {\n *     // this is equivalent to ['count:asc']\n *     sortBy: function(a, b) {\n *       if (a.count === b.count) return 0;\n *       if (a.count > b.count)   return 1;\n *       if (b.count > a.count)   return -1;\n *     }\n *   });\n * });\n */\nSearchResults.prototype.getFacetValues = function(attribute, opts) {\n  var facetValues = extractNormalizedFacetValues(this, attribute);\n  if (!facetValues) {\n    return undefined;\n  }\n\n  var options = defaultsPure({}, opts, {\n    sortBy: SearchResults.DEFAULT_SORT,\n    // if no sortBy is given, attempt to sort based on facetOrdering\n    // if it is given, we still allow to sort via facet ordering first\n    facetOrdering: !(opts && opts.sortBy)\n  });\n\n  var results = this;\n  var attributes;\n  if (Array.isArray(facetValues)) {\n    attributes = [attribute];\n  } else {\n    var config = results._state.getHierarchicalFacetByName(facetValues.name);\n    attributes = config.attributes;\n  }\n\n  return recSort(function(data, facetName) {\n    if (options.facetOrdering) {\n      var facetOrdering = getFacetOrdering(results, facetName);\n      if (Boolean(facetOrdering)) {\n        return sortViaFacetOrdering(data, facetOrdering);\n      }\n    }\n\n    if (Array.isArray(options.sortBy)) {\n      var order = formatSort(options.sortBy, SearchResults.DEFAULT_SORT);\n      return orderBy(data, order[0], order[1]);\n    } else if (typeof options.sortBy === 'function') {\n      return vanillaSortFn(options.sortBy, data);\n    }\n    throw new Error(\n      'options.sortBy is optional but if defined it must be ' +\n        'either an array of string (predicates) or a sorting function'\n    );\n  }, facetValues, attributes);\n};\n\n/**\n * Returns the facet stats if attribute is defined and the facet contains some.\n * Otherwise returns undefined.\n * @param {string} attribute name of the faceted attribute\n * @return {object} The stats of the facet\n */\nSearchResults.prototype.getFacetStats = function(attribute) {\n  if (this._state.isConjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.facets, attribute);\n  } else if (this._state.isDisjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.disjunctiveFacets, attribute);\n  }\n\n  return undefined;\n};\n\n/**\n * @typedef {Object} FacetListItem\n * @property {string} name\n */\n\n/**\n * @param {FacetListItem[]} facetList (has more items, but enough for here)\n * @param {string} facetName\n */\nfunction getFacetStatsIfAvailable(facetList, facetName) {\n  var data = find(facetList, function(facet) {\n    return facet.name === facetName;\n  });\n  return data && data.stats;\n}\n\n/**\n * Returns all refinements for all filters + tags. It also provides\n * additional information: count and exhaustiveness for each filter.\n *\n * See the [refinement type](#Refinement) for an exhaustive view of the available\n * data.\n *\n * Note that for a numeric refinement, results are grouped per operator, this\n * means that it will return responses for operators which are empty.\n *\n * @return {Array.<Refinement>} all the refinements\n */\nSearchResults.prototype.getRefinements = function() {\n  var state = this._state;\n  var results = this;\n  var res = [];\n\n  Object.keys(state.facetsRefinements).forEach(function(attributeName) {\n    state.facetsRefinements[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'facet', attributeName, name, results.facets));\n    });\n  });\n\n  Object.keys(state.facetsExcludes).forEach(function(attributeName) {\n    state.facetsExcludes[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'exclude', attributeName, name, results.facets));\n    });\n  });\n\n  Object.keys(state.disjunctiveFacetsRefinements).forEach(function(attributeName) {\n    state.disjunctiveFacetsRefinements[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'disjunctive', attributeName, name, results.disjunctiveFacets));\n    });\n  });\n\n  Object.keys(state.hierarchicalFacetsRefinements).forEach(function(attributeName) {\n    state.hierarchicalFacetsRefinements[attributeName].forEach(function(name) {\n      res.push(getHierarchicalRefinement(state, attributeName, name, results.hierarchicalFacets));\n    });\n  });\n\n\n  Object.keys(state.numericRefinements).forEach(function(attributeName) {\n    var operators = state.numericRefinements[attributeName];\n    Object.keys(operators).forEach(function(operator) {\n      operators[operator].forEach(function(value) {\n        res.push({\n          type: 'numeric',\n          attributeName: attributeName,\n          name: value,\n          numericValue: value,\n          operator: operator\n        });\n      });\n    });\n  });\n\n  state.tagRefinements.forEach(function(name) {\n    res.push({type: 'tag', attributeName: '_tags', name: name});\n  });\n\n  return res;\n};\n\n/**\n * @typedef {Object} Facet\n * @property {string} name\n * @property {Object} data\n * @property {boolean} exhaustive\n */\n\n/**\n * @param {*} state\n * @param {*} type\n * @param {string} attributeName\n * @param {*} name\n * @param {Facet[]} resultsFacets\n */\nfunction getRefinement(state, type, attributeName, name, resultsFacets) {\n  var facet = find(resultsFacets, function(f) {\n    return f.name === attributeName;\n  });\n  var count = facet && facet.data && facet.data[name] ? facet.data[name] : 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n\n  return {\n    type: type,\n    attributeName: attributeName,\n    name: name,\n    count: count,\n    exhaustive: exhaustive\n  };\n}\n\n/**\n * @param {*} state\n * @param {string} attributeName\n * @param {*} name\n * @param {Facet[]} resultsFacets\n */\nfunction getHierarchicalRefinement(state, attributeName, name, resultsFacets) {\n  var facetDeclaration = state.getHierarchicalFacetByName(attributeName);\n  var separator = state._getHierarchicalFacetSeparator(facetDeclaration);\n  var split = name.split(separator);\n  var rootFacet = find(resultsFacets, function(facet) {\n    return facet.name === attributeName;\n  });\n\n  var facet = split.reduce(function(intermediateFacet, part) {\n    var newFacet =\n      intermediateFacet && find(intermediateFacet.data, function(f) {\n        return f.name === part;\n      });\n    return newFacet !== undefined ? newFacet : intermediateFacet;\n  }, rootFacet);\n\n  var count = (facet && facet.count) || 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n  var path = (facet && facet.path) || '';\n\n  return {\n    type: 'hierarchical',\n    attributeName: attributeName,\n    name: path,\n    count: count,\n    exhaustive: exhaustive\n  };\n}\n\nmodule.exports = SearchResults;\n","'use strict';\n\n/**\n * Replaces a leading - with \\-\n * @private\n * @param {any} value the facet value to replace\n * @returns any\n */\nfunction escapeFacetValue(value) {\n  if (typeof value !== 'string') return value;\n\n  return String(value).replace(/^-/, '\\\\-');\n}\n\n/**\n * Replaces a leading \\- with -\n * @private\n * @param {any} value the escaped facet value\n * @returns any\n */\nfunction unescapeFacetValue(value) {\n  if (typeof value !== 'string') return value;\n\n  return value.replace(/^\\\\-/, '-');\n}\n\nmodule.exports = {\n  escapeFacetValue: escapeFacetValue,\n  unescapeFacetValue: unescapeFacetValue\n};\n","'use strict';\n\nmodule.exports = generateTrees;\n\nvar orderBy = require('../functions/orderBy');\nvar find = require('../functions/find');\nvar prepareHierarchicalFacetSortBy = require('../functions/formatSort');\nvar fv = require('../functions/escapeFacetValue');\nvar escapeFacetValue = fv.escapeFacetValue;\nvar unescapeFacetValue = fv.unescapeFacetValue;\n\nfunction generateTrees(state) {\n  return function generate(hierarchicalFacetResult, hierarchicalFacetIndex) {\n    var hierarchicalFacet = state.hierarchicalFacets[hierarchicalFacetIndex];\n    var hierarchicalFacetRefinement =\n      (state.hierarchicalFacetsRefinements[hierarchicalFacet.name] &&\n        state.hierarchicalFacetsRefinements[hierarchicalFacet.name][0]) ||\n      '';\n    var hierarchicalSeparator = state._getHierarchicalFacetSeparator(\n      hierarchicalFacet\n    );\n    var hierarchicalRootPath = state._getHierarchicalRootPath(\n      hierarchicalFacet\n    );\n    var hierarchicalShowParentLevel = state._getHierarchicalShowParentLevel(\n      hierarchicalFacet\n    );\n    var sortBy = prepareHierarchicalFacetSortBy(\n      state._getHierarchicalFacetSortBy(hierarchicalFacet)\n    );\n\n    var rootExhaustive = hierarchicalFacetResult.every(function(facetResult) {\n      return facetResult.exhaustive;\n    });\n\n    var generateTreeFn = generateHierarchicalTree(\n      sortBy,\n      hierarchicalSeparator,\n      hierarchicalRootPath,\n      hierarchicalShowParentLevel,\n      hierarchicalFacetRefinement\n    );\n\n    var results = hierarchicalFacetResult;\n\n    if (hierarchicalRootPath) {\n      results = hierarchicalFacetResult.slice(\n        hierarchicalRootPath.split(hierarchicalSeparator).length\n      );\n    }\n\n    return results.reduce(generateTreeFn, {\n      name: state.hierarchicalFacets[hierarchicalFacetIndex].name,\n      count: null, // root level, no count\n      isRefined: true, // root level, always refined\n      path: null, // root level, no path\n      escapedValue: null,\n      exhaustive: rootExhaustive,\n      data: null\n    });\n  };\n}\n\nfunction generateHierarchicalTree(\n  sortBy,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel,\n  currentRefinement\n) {\n  return function generateTree(\n    hierarchicalTree,\n    hierarchicalFacetResult,\n    currentHierarchicalLevel\n  ) {\n    var parent = hierarchicalTree;\n\n    if (currentHierarchicalLevel > 0) {\n      var level = 0;\n\n      parent = hierarchicalTree;\n\n      while (level < currentHierarchicalLevel) {\n        /**\n         * @type {object[]]} hierarchical data\n         */\n        var data = parent && Array.isArray(parent.data) ? parent.data : [];\n        parent = find(data, function(subtree) {\n          return subtree.isRefined;\n        });\n        level++;\n      }\n    }\n\n    // we found a refined parent, let's add current level data under it\n    if (parent) {\n      // filter values in case an object has multiple categories:\n      //   {\n      //     categories: {\n      //       level0: ['beers', 'bières'],\n      //       level1: ['beers > IPA', 'bières > Belges']\n      //     }\n      //   }\n      //\n      // If parent refinement is `beers`, then we do not want to have `bières > Belges`\n      // showing up\n\n      var picked = Object.keys(hierarchicalFacetResult.data)\n        .map(function(facetValue) {\n          return [facetValue, hierarchicalFacetResult.data[facetValue]];\n        })\n        .filter(function(tuple) {\n          var facetValue = tuple[0];\n          return onlyMatchingTree(\n            facetValue,\n            parent.path || hierarchicalRootPath,\n            currentRefinement,\n            hierarchicalSeparator,\n            hierarchicalRootPath,\n            hierarchicalShowParentLevel\n          );\n        });\n\n      parent.data = orderBy(\n        picked.map(function(tuple) {\n          var facetValue = tuple[0];\n          var facetCount = tuple[1];\n\n          return format(\n            facetCount,\n            facetValue,\n            hierarchicalSeparator,\n            unescapeFacetValue(currentRefinement),\n            hierarchicalFacetResult.exhaustive\n          );\n        }),\n        sortBy[0],\n        sortBy[1]\n      );\n    }\n\n    return hierarchicalTree;\n  };\n}\n\nfunction onlyMatchingTree(\n  facetValue,\n  parentPath,\n  currentRefinement,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel\n) {\n  // we want the facetValue is a child of hierarchicalRootPath\n  if (\n    hierarchicalRootPath &&\n    (facetValue.indexOf(hierarchicalRootPath) !== 0 ||\n      hierarchicalRootPath === facetValue)\n  ) {\n    return false;\n  }\n\n  // we always want root levels (only when there is no prefix path)\n  return (\n    (!hierarchicalRootPath &&\n      facetValue.indexOf(hierarchicalSeparator) === -1) ||\n    // if there is a rootPath, being root level mean 1 level under rootPath\n    (hierarchicalRootPath &&\n      facetValue.split(hierarchicalSeparator).length -\n        hierarchicalRootPath.split(hierarchicalSeparator).length ===\n        1) ||\n    // if current refinement is a root level and current facetValue is a root level,\n    // keep the facetValue\n    (facetValue.indexOf(hierarchicalSeparator) === -1 &&\n      currentRefinement.indexOf(hierarchicalSeparator) === -1) ||\n    // currentRefinement is a child of the facet value\n    currentRefinement.indexOf(facetValue) === 0 ||\n    // facetValue is a child of the current parent, add it\n    (facetValue.indexOf(parentPath + hierarchicalSeparator) === 0 &&\n      (hierarchicalShowParentLevel ||\n        facetValue.indexOf(currentRefinement) === 0))\n  );\n}\n\nfunction format(\n  facetCount,\n  facetValue,\n  hierarchicalSeparator,\n  currentRefinement,\n  exhaustive\n) {\n  var parts = facetValue.split(hierarchicalSeparator);\n  return {\n    name: parts[parts.length - 1].trim(),\n    path: facetValue,\n    escapedValue: escapeFacetValue(facetValue),\n    count: facetCount,\n    isRefined:\n      currentRefinement === facetValue ||\n      currentRefinement.indexOf(facetValue + hierarchicalSeparator) === 0,\n    exhaustive: exhaustive,\n    data: null\n  };\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\n// EventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","'use strict';\n\nvar EventEmitter = require('@algolia/events');\nvar inherits = require('../functions/inherits');\n\n/**\n * A DerivedHelper is a way to create sub requests to\n * Algolia from a main helper.\n * @class\n * @classdesc The DerivedHelper provides an event based interface for search callbacks:\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n */\nfunction DerivedHelper(mainHelper, fn) {\n  this.main = mainHelper;\n  this.fn = fn;\n  this.lastResults = null;\n}\n\ninherits(DerivedHelper, EventEmitter);\n\n/**\n * Detach this helper from the main helper\n * @return {undefined}\n * @throws Error if the derived helper is already detached\n */\nDerivedHelper.prototype.detach = function() {\n  this.removeAllListeners();\n  this.main.detachDerivedHelper(this);\n};\n\nDerivedHelper.prototype.getModifiedState = function(parameters) {\n  return this.fn(parameters);\n};\n\nmodule.exports = DerivedHelper;\n","'use strict';\n\nfunction inherits(ctor, superCtor) {\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n}\n\nmodule.exports = inherits;\n","'use strict';\n\nvar merge = require('./functions/merge');\n\nfunction sortObject(obj) {\n  return Object.keys(obj)\n    .sort(function(a, b) {\n      return a.localeCompare(b);\n    })\n    .reduce(function(acc, curr) {\n      acc[curr] = obj[curr];\n      return acc;\n    }, {});\n}\n\nvar requestBuilder = {\n  /**\n   * Get all the queries to send to the client, those queries can used directly\n   * with the Algolia client.\n   * @private\n   * @return {object[]} The queries\n   */\n  _getQueries: function getQueries(index, state) {\n    var queries = [];\n\n    // One query for the hits\n    queries.push({\n      indexName: index,\n      params: requestBuilder._getHitsSearchParams(state)\n    });\n\n    // One for each disjunctive facets\n    state.getRefinedDisjunctiveFacets().forEach(function(refinedFacet) {\n      queries.push({\n        indexName: index,\n        params: requestBuilder._getDisjunctiveFacetSearchParams(state, refinedFacet)\n      });\n    });\n\n    // More to get the parent levels of the hierarchical facets when refined\n    state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {\n      var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n      var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n\n      // If we are deeper than level 0 (starting from `beer > IPA`)\n      // we want to get all parent values\n      if (currentRefinement.length > 0 && currentRefinement[0].split(separator).length > 1) {\n        // We generate a map of the filters we will use for our facet values queries\n        var filtersMap = currentRefinement[0].split(separator).slice(0, -1).reduce(\n          function createFiltersMap(map, segment, level) {\n            return map.concat({\n              attribute: hierarchicalFacet.attributes[level],\n              value: level === 0\n                ? segment\n                : [map[map.length - 1].value, segment].join(separator)\n            });\n          }\n        , []);\n\n        filtersMap.forEach(function(filter, level) {\n          var params = requestBuilder._getDisjunctiveFacetSearchParams(\n            state,\n            filter.attribute,\n            level === 0\n          );\n\n          // Keep facet filters unrelated to current hierarchical attributes\n          function hasHierarchicalFacetFilter(value) {\n            return hierarchicalFacet.attributes.some(function(attribute) {\n              return attribute === value.split(':')[0];\n            });\n          }\n\n          var filteredFacetFilters = (params.facetFilters || []).reduce(function(acc, facetFilter) {\n            if (Array.isArray(facetFilter)) {\n              var filtered = facetFilter.filter(function(filterValue) {\n                return !hasHierarchicalFacetFilter(filterValue);\n              });\n\n              if (filtered.length > 0) {\n                acc.push(filtered);\n              }\n            }\n\n            if (typeof facetFilter === 'string' && !hasHierarchicalFacetFilter(facetFilter)) {\n              acc.push(facetFilter);\n            }\n\n            return acc;\n          }, []);\n\n          var parent = filtersMap[level - 1];\n          if (level > 0) {\n            params.facetFilters = filteredFacetFilters.concat(parent.attribute + ':' + parent.value);\n          } else {\n            params.facetFilters = filteredFacetFilters.length > 0 ? filteredFacetFilters : undefined;\n          }\n\n          queries.push({indexName: index, params: params});\n        });\n      }\n    });\n\n    return queries;\n  },\n\n  /**\n   * Build search parameters used to fetch hits\n   * @private\n   * @return {object.<string, any>}\n   */\n  _getHitsSearchParams: function(state) {\n    var facets = state.facets\n      .concat(state.disjunctiveFacets)\n      .concat(requestBuilder._getHitsHierarchicalFacetsAttributes(state));\n\n\n    var facetFilters = requestBuilder._getFacetFilters(state);\n    var numericFilters = requestBuilder._getNumericFilters(state);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      facets: facets.indexOf('*') > -1 ? ['*'] : facets,\n      tagFilters: tagFilters\n    };\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    return sortObject(merge({}, state.getQueryParams(), additionalParams));\n  },\n\n  /**\n   * Build search parameters used to fetch a disjunctive facet\n   * @private\n   * @param  {string} facet the associated facet name\n   * @param  {boolean} hierarchicalRootLevel ?? FIXME\n   * @return {object}\n   */\n  _getDisjunctiveFacetSearchParams: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = requestBuilder._getFacetFilters(state, facet, hierarchicalRootLevel);\n    var numericFilters = requestBuilder._getNumericFilters(state, facet);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      hitsPerPage: 0,\n      page: 0,\n      analytics: false,\n      clickAnalytics: false\n    };\n\n    if (tagFilters.length > 0) {\n      additionalParams.tagFilters = tagFilters;\n    }\n\n    var hierarchicalFacet = state.getHierarchicalFacetByName(facet);\n\n    if (hierarchicalFacet) {\n      additionalParams.facets = requestBuilder._getDisjunctiveHierarchicalFacetAttribute(\n        state,\n        hierarchicalFacet,\n        hierarchicalRootLevel\n      );\n    } else {\n      additionalParams.facets = facet;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    return sortObject(merge({}, state.getQueryParams(), additionalParams));\n  },\n\n  /**\n   * Return the numeric filters in an algolia request fashion\n   * @private\n   * @param {string} [facetName] the name of the attribute for which the filters should be excluded\n   * @return {string[]} the numeric filters in the algolia format\n   */\n  _getNumericFilters: function(state, facetName) {\n    if (state.numericFilters) {\n      return state.numericFilters;\n    }\n\n    var numericFilters = [];\n\n    Object.keys(state.numericRefinements).forEach(function(attribute) {\n      var operators = state.numericRefinements[attribute] || {};\n      Object.keys(operators).forEach(function(operator) {\n        var values = operators[operator] || [];\n        if (facetName !== attribute) {\n          values.forEach(function(value) {\n            if (Array.isArray(value)) {\n              var vs = value.map(function(v) {\n                return attribute + operator + v;\n              });\n              numericFilters.push(vs);\n            } else {\n              numericFilters.push(attribute + operator + value);\n            }\n          });\n        }\n      });\n    });\n\n    return numericFilters;\n  },\n\n  /**\n   * Return the tags filters depending\n   * @private\n   * @return {string}\n   */\n  _getTagFilters: function(state) {\n    if (state.tagFilters) {\n      return state.tagFilters;\n    }\n\n    return state.tagRefinements.join(',');\n  },\n\n\n  /**\n   * Build facetFilters parameter based on current refinements. The array returned\n   * contains strings representing the facet filters in the algolia format.\n   * @private\n   * @param  {string} [facet] if set, the current disjunctive facet\n   * @return {array.<string>}\n   */\n  _getFacetFilters: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = [];\n\n    var facetsRefinements = state.facetsRefinements || {};\n    Object.keys(facetsRefinements).forEach(function(facetName) {\n      var facetValues = facetsRefinements[facetName] || [];\n      facetValues.forEach(function(facetValue) {\n        facetFilters.push(facetName + ':' + facetValue);\n      });\n    });\n\n    var facetsExcludes = state.facetsExcludes || {};\n    Object.keys(facetsExcludes).forEach(function(facetName) {\n      var facetValues = facetsExcludes[facetName] || [];\n      facetValues.forEach(function(facetValue) {\n        facetFilters.push(facetName + ':-' + facetValue);\n      });\n    });\n\n    var disjunctiveFacetsRefinements = state.disjunctiveFacetsRefinements || {};\n    Object.keys(disjunctiveFacetsRefinements).forEach(function(facetName) {\n      var facetValues = disjunctiveFacetsRefinements[facetName] || [];\n      if (facetName === facet || !facetValues || facetValues.length === 0) {\n        return;\n      }\n      var orFilters = [];\n\n      facetValues.forEach(function(facetValue) {\n        orFilters.push(facetName + ':' + facetValue);\n      });\n\n      facetFilters.push(orFilters);\n    });\n\n    var hierarchicalFacetsRefinements = state.hierarchicalFacetsRefinements || {};\n    Object.keys(hierarchicalFacetsRefinements).forEach(function(facetName) {\n      var facetValues = hierarchicalFacetsRefinements[facetName] || [];\n      var facetValue = facetValues[0];\n\n      if (facetValue === undefined) {\n        return;\n      }\n\n      var hierarchicalFacet = state.getHierarchicalFacetByName(facetName);\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeToRefine;\n      var attributesIndex;\n\n      // we ask for parent facet values only when the `facet` is the current hierarchical facet\n      if (facet === facetName) {\n        // if we are at the root level already, no need to ask for facet values, we get them from\n        // the hits query\n        if (facetValue.indexOf(separator) === -1 || (!rootPath && hierarchicalRootLevel === true) ||\n          (rootPath && rootPath.split(separator).length === facetValue.split(separator).length)) {\n          return;\n        }\n\n        if (!rootPath) {\n          attributesIndex = facetValue.split(separator).length - 2;\n          facetValue = facetValue.slice(0, facetValue.lastIndexOf(separator));\n        } else {\n          attributesIndex = rootPath.split(separator).length - 1;\n          facetValue = rootPath;\n        }\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      } else {\n        attributesIndex = facetValue.split(separator).length - 1;\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      }\n\n      if (attributeToRefine) {\n        facetFilters.push([attributeToRefine + ':' + facetValue]);\n      }\n    });\n\n    return facetFilters;\n  },\n\n  _getHitsHierarchicalFacetsAttributes: function(state) {\n    var out = [];\n\n    return state.hierarchicalFacets.reduce(\n      // ask for as much levels as there's hierarchical refinements\n      function getHitsAttributesForHierarchicalFacet(allAttributes, hierarchicalFacet) {\n        var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0];\n\n        // if no refinement, ask for root level\n        if (!hierarchicalRefinement) {\n          allAttributes.push(hierarchicalFacet.attributes[0]);\n          return allAttributes;\n        }\n\n        var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n        var level = hierarchicalRefinement.split(separator).length;\n        var newAttributes = hierarchicalFacet.attributes.slice(0, level + 1);\n\n        return allAttributes.concat(newAttributes);\n      }, out);\n  },\n\n  _getDisjunctiveHierarchicalFacetAttribute: function(state, hierarchicalFacet, rootLevel) {\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n    if (rootLevel === true) {\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeIndex = 0;\n\n      if (rootPath) {\n        attributeIndex = rootPath.split(separator).length;\n      }\n      return [hierarchicalFacet.attributes[attributeIndex]];\n    }\n\n    var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0] || '';\n    // if refinement is 'beers > IPA > Flying dog',\n    // then we want `facets: ['beers > IPA']` as disjunctive facet (parent level values)\n\n    var parentLevel = hierarchicalRefinement.split(separator).length - 1;\n    return hierarchicalFacet.attributes.slice(0, parentLevel + 1);\n  },\n\n  getSearchForFacetQuery: function(facetName, query, maxFacetHits, state) {\n    var stateForSearchForFacetValues = state.isDisjunctiveFacet(facetName) ?\n      state.clearRefinements(facetName) :\n      state;\n    var searchForFacetSearchParameters = {\n      facetQuery: query,\n      facetName: facetName\n    };\n    if (typeof maxFacetHits === 'number') {\n      searchForFacetSearchParameters.maxFacetHits = maxFacetHits;\n    }\n    return sortObject(merge(\n      {},\n      requestBuilder._getHitsSearchParams(stateForSearchForFacetValues),\n      searchForFacetSearchParameters\n    ));\n  }\n};\n\nmodule.exports = requestBuilder;\n","'use strict';\n\nvar SearchParameters = require('./SearchParameters');\nvar SearchResults = require('./SearchResults');\nvar DerivedHelper = require('./DerivedHelper');\nvar requestBuilder = require('./requestBuilder');\n\nvar EventEmitter = require('@algolia/events');\nvar inherits = require('./functions/inherits');\nvar objectHasKeys = require('./functions/objectHasKeys');\nvar omit = require('./functions/omit');\nvar merge = require('./functions/merge');\n\nvar version = require('./version');\nvar escapeFacetValue = require('./functions/escapeFacetValue').escapeFacetValue;\n\n/**\n * Event triggered when a parameter is set or updated\n * @event AlgoliaSearchHelper#event:change\n * @property {object} event\n * @property {SearchParameters} event.state the current parameters with the latest changes applied\n * @property {SearchResults} event.results the previous results received from Algolia. `null` before the first request\n * @example\n * helper.on('change', function(event) {\n *   console.log('The parameters have changed');\n * });\n */\n\n/**\n * Event triggered when a main search is sent to Algolia\n * @event AlgoliaSearchHelper#event:search\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search\n * @property {SearchResults} event.results the results from the previous search. `null` if it is the first search.\n * @example\n * helper.on('search', function(event) {\n *   console.log('Search sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchForFacetValues` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchForFacetValues\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @property {string} event.facet the facet searched into\n * @property {string} event.query the query used to search in the facets\n * @example\n * helper.on('searchForFacetValues', function(event) {\n *   console.log('searchForFacetValues sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchOnce` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchOnce\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @example\n * helper.on('searchOnce', function(event) {\n *   console.log('searchOnce sent');\n * });\n */\n\n/**\n * Event triggered when the results are retrieved from Algolia\n * @event AlgoliaSearchHelper#event:result\n * @property {object} event\n * @property {SearchResults} event.results the results received from Algolia\n * @property {SearchParameters} event.state the parameters used to query Algolia. Those might be different from the one in the helper instance (for example if the network is unreliable).\n * @example\n * helper.on('result', function(event) {\n *   console.log('Search results received');\n * });\n */\n\n/**\n * Event triggered when Algolia sends back an error. For example, if an unknown parameter is\n * used, the error can be caught using this event.\n * @event AlgoliaSearchHelper#event:error\n * @property {object} event\n * @property {Error} event.error the error returned by the Algolia.\n * @example\n * helper.on('error', function(event) {\n *   console.log('Houston we got a problem.');\n * });\n */\n\n/**\n * Event triggered when the queue of queries have been depleted (with any result or outdated queries)\n * @event AlgoliaSearchHelper#event:searchQueueEmpty\n * @example\n * helper.on('searchQueueEmpty', function() {\n *   console.log('No more search pending');\n *   // This is received before the result event if we're not expecting new results\n * });\n *\n * helper.search();\n */\n\n/**\n * Initialize a new AlgoliaSearchHelper\n * @class\n * @classdesc The AlgoliaSearchHelper is a class that ease the management of the\n * search. It provides an event based interface for search callbacks:\n *  - change: when the internal search state is changed.\n *    This event contains a {@link SearchParameters} object and the\n *    {@link SearchResults} of the last result if any.\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n *  - error: when the response is an error. This event contains the error returned by the server.\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the index name to query\n * @param  {SearchParameters | object} options an object defining the initial\n * config of the search. It doesn't have to be a {SearchParameters},\n * just an object containing the properties you need from it.\n */\nfunction AlgoliaSearchHelper(client, index, options) {\n  if (typeof client.addAlgoliaAgent === 'function') {\n    client.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n\n  this.setClient(client);\n  var opts = options || {};\n  opts.index = index;\n  this.state = SearchParameters.make(opts);\n  this.lastResults = null;\n  this._queryId = 0;\n  this._lastQueryIdReceived = -1;\n  this.derivedHelpers = [];\n  this._currentNbQueries = 0;\n}\n\ninherits(AlgoliaSearchHelper, EventEmitter);\n\n/**\n * Start the search with the parameters set in the state. When the\n * method is called, it triggers a `search` event. The results will\n * be available through the `result` event. If an error occurs, an\n * `error` will be fired instead.\n * @return {AlgoliaSearchHelper}\n * @fires search\n * @fires result\n * @fires error\n * @chainable\n */\nAlgoliaSearchHelper.prototype.search = function() {\n  this._search({onlyWithDerivedHelpers: false});\n  return this;\n};\n\nAlgoliaSearchHelper.prototype.searchOnlyWithDerivedHelpers = function() {\n  this._search({onlyWithDerivedHelpers: true});\n  return this;\n};\n\n/**\n * Gets the search query parameters that would be sent to the Algolia Client\n * for the hits\n * @return {object} Query Parameters\n */\nAlgoliaSearchHelper.prototype.getQuery = function() {\n  var state = this.state;\n  return requestBuilder._getHitsSearchParams(state);\n};\n\n/**\n * Start a search using a modified version of the current state. This method does\n * not trigger the helper lifecycle and does not modify the state kept internally\n * by the helper. This second aspect means that the next search call will be the\n * same as a search call before calling searchOnce.\n * @param {object} options can contain all the parameters that can be set to SearchParameters\n * plus the index\n * @param {function} [callback] optional callback executed when the response from the\n * server is back.\n * @return {promise|undefined} if a callback is passed the method returns undefined\n * otherwise it returns a promise containing an object with two keys :\n *  - content with a SearchResults\n *  - state with the state used for the query as a SearchParameters\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the callback API\n * var state = helper.searchOnce({hitsPerPage: 1},\n *   function(error, content, state) {\n *     // if an error occurred it will be passed in error, otherwise its value is null\n *     // content contains the results formatted as a SearchResults\n *     // state is the instance of SearchParameters used for this search\n *   });\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the promise API\n * var state1 = helper.searchOnce({hitsPerPage: 1})\n *                 .then(promiseHandler);\n *\n * function promiseHandler(res) {\n *   // res contains\n *   // {\n *   //   content : SearchResults\n *   //   state   : SearchParameters (the one used for this specific search)\n *   // }\n * }\n */\nAlgoliaSearchHelper.prototype.searchOnce = function(options, cb) {\n  var tempState = !options ? this.state : this.state.setQueryParameters(options);\n  var queries = requestBuilder._getQueries(tempState.index, tempState);\n  var self = this;\n\n  this._currentNbQueries++;\n\n  this.emit('searchOnce', {\n    state: tempState\n  });\n\n  if (cb) {\n    this.client\n      .search(queries)\n      .then(function(content) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(null, new SearchResults(tempState, content.results), tempState);\n      })\n      .catch(function(err) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(err, null, tempState);\n      });\n\n    return undefined;\n  }\n\n  return this.client.search(queries).then(function(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    return {\n      content: new SearchResults(tempState, content.results),\n      state: tempState,\n      _originalResponse: content\n    };\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n /**\n * Start the search for answers with the parameters set in the state.\n * This method returns a promise.\n * @param {Object} options - the options for answers API call\n * @param {string[]} options.attributesForPrediction - Attributes to use for predictions. If empty, `searchableAttributes` is used instead.\n * @param {string[]} options.queryLanguages - The languages in the query. Currently only supports ['en'].\n * @param {number} options.nbHits - Maximum number of answers to retrieve from the Answers Engine. Cannot be greater than 1000.\n *\n * @return {promise} the answer results\n */\nAlgoliaSearchHelper.prototype.findAnswers = function(options) {\n  var state = this.state;\n  var derivedHelper = this.derivedHelpers[0];\n  if (!derivedHelper) {\n    return Promise.resolve([]);\n  }\n  var derivedState = derivedHelper.getModifiedState(state);\n  var data = merge(\n    {\n      attributesForPrediction: options.attributesForPrediction,\n      nbHits: options.nbHits\n    },\n    {\n      params: omit(requestBuilder._getHitsSearchParams(derivedState), [\n        'attributesToSnippet',\n        'hitsPerPage',\n        'restrictSearchableAttributes',\n        'snippetEllipsisText' // FIXME remove this line once the engine is fixed.\n      ])\n    }\n  );\n\n  var errorMessage = 'search for answers was called, but this client does not have a function client.initIndex(index).findAnswers';\n  if (typeof this.client.initIndex !== 'function') {\n    throw new Error(errorMessage);\n  }\n  var index = this.client.initIndex(derivedState.index);\n  if (typeof index.findAnswers !== 'function') {\n    throw new Error(errorMessage);\n  }\n  return index.findAnswers(derivedState.query, options.queryLanguages, data);\n};\n\n/**\n * Structure of each result when using\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * @typedef FacetSearchHit\n * @type {object}\n * @property {string} value the facet value\n * @property {string} highlighted the facet value highlighted with the query string\n * @property {number} count number of occurrence of this facet value\n * @property {boolean} isRefined true if the value is already refined\n */\n\n/**\n * Structure of the data resolved by the\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * promise.\n * @typedef FacetSearchResult\n * @type {object}\n * @property {FacetSearchHit} facetHits the results for this search for facet values\n * @property {number} processingTimeMS time taken by the query inside the engine\n */\n\n/**\n * Search for facet values based on an query and the name of a faceted attribute. This\n * triggers a search and will return a promise. On top of using the query, it also sends\n * the parameters from the state so that the search is narrowed down to only the possible values.\n *\n * See the description of [FacetSearchResult](reference.html#FacetSearchResult)\n * @param {string} facet the name of the faceted attribute\n * @param {string} query the string query for the search\n * @param {number} [maxFacetHits] the maximum number values returned. Should be > 0 and <= 100\n * @param {object} [userState] the set of custom parameters to use on top of the current state. Setting a property to `undefined` removes\n * it in the generated query.\n * @return {promise.<FacetSearchResult>} the results of the search\n */\nAlgoliaSearchHelper.prototype.searchForFacetValues = function(facet, query, maxFacetHits, userState) {\n  var clientHasSFFV = typeof this.client.searchForFacetValues === 'function';\n  var clientHasInitIndex = typeof this.client.initIndex === 'function';\n  if (\n    !clientHasSFFV &&\n    !clientHasInitIndex &&\n    typeof this.client.search !== 'function'\n  ) {\n    throw new Error(\n      'search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues'\n    );\n  }\n\n  var state = this.state.setQueryParameters(userState || {});\n  var isDisjunctive = state.isDisjunctiveFacet(facet);\n  var algoliaQuery = requestBuilder.getSearchForFacetQuery(facet, query, maxFacetHits, state);\n\n  this._currentNbQueries++;\n  var self = this;\n  var searchForFacetValuesPromise;\n  // newer algoliasearch ^3.27.1 - ~4.0.0\n  if (clientHasSFFV) {\n    searchForFacetValuesPromise = this.client.searchForFacetValues([\n      {indexName: state.index, params: algoliaQuery}\n    ]);\n    // algoliasearch < 3.27.1\n  } else if (clientHasInitIndex) {\n    searchForFacetValuesPromise = this.client\n      .initIndex(state.index)\n      .searchForFacetValues(algoliaQuery);\n    // algoliasearch ~5.0.0\n  } else {\n    // @MAJOR only use client.search\n    delete algoliaQuery.facetName;\n    searchForFacetValuesPromise = this.client\n      .search([\n        {\n          type: 'facet',\n          facet: facet,\n          indexName: state.index,\n          params: algoliaQuery\n        }\n      ])\n      .then(function processResponse(response) {\n        return response.results[0];\n      });\n  }\n\n  this.emit('searchForFacetValues', {\n    state: state,\n    facet: facet,\n    query: query\n  });\n\n  return searchForFacetValuesPromise.then(function addIsRefined(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n\n    content = Array.isArray(content) ? content[0] : content;\n\n    content.facetHits.forEach(function(f) {\n      f.escapedValue = escapeFacetValue(f.value);\n      f.isRefined = isDisjunctive\n        ? state.isDisjunctiveFacetRefined(facet, f.escapedValue)\n        : state.isFacetRefined(facet, f.escapedValue);\n    });\n\n    return content;\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n/**\n * Sets the text query used for the search.\n *\n * This method resets the current page to 0.\n * @param  {string} q the user query\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setQuery = function(q) {\n  this._change({\n    state: this.state.resetPage().setQuery(q),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Remove all the types of refinements except tags. A string can be provided to remove\n * only the refinements of a specific attribute. For more advanced use case, you can\n * provide a function instead. This function should follow the\n * [clearCallback definition](#SearchParameters.clearCallback).\n *\n * This method resets the current page to 0.\n * @param {string} [name] optional name of the facet / attribute on which we want to remove all refinements\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * // Removing all the refinements\n * helper.clearRefinements().search();\n * @example\n * // Removing all the filters on a the category attribute.\n * helper.clearRefinements('category').search();\n * @example\n * // Removing only the exclude filters on the category facet.\n * helper.clearRefinements(function(value, attribute, type) {\n *   return type === 'exclude' && attribute === 'category';\n * }).search();\n */\nAlgoliaSearchHelper.prototype.clearRefinements = function(name) {\n  this._change({\n    state: this.state.resetPage().clearRefinements(name),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Remove all the tag filters.\n *\n * This method resets the current page to 0.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.clearTags = function() {\n  this._change({\n    state: this.state.resetPage().clearTags(),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveRefine = function() {\n  return this.addDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds a refinement on a hierarchical facet. It will throw\n * an exception if the facet is not defined or if the facet\n * is already refined.\n *\n * This method resets the current page to 0.\n * @param {string} facet the facet name\n * @param {string} path the hierarchical facet path\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is refined\n * @chainable\n * @fires change\n */\nAlgoliaSearchHelper.prototype.addHierarchicalFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addHierarchicalFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} operator the operator of the filter\n * @param  {number} value the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addNumericRefinement = function(attribute, operator, value) {\n  this._change({\n    state: this.state.resetPage().addNumericRefinement(attribute, operator, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addRefine = function() {\n  return this.addFacetRefinement.apply(this, arguments);\n};\n\n\n/**\n * Adds a an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addExcludeRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.addExclude = function() {\n  return this.addFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds a tag filter with the `tag` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag the tag to add to the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().addTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * Some parameters are optional, triggering different behavior:\n *  - if the value is not provided, then all the numeric value will be removed for the\n *  specified attribute/operator couple.\n *  - if the operator is not provided either, then all the numeric filter on this attribute\n *  will be removed.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} [operator] the operator of the filter\n * @param  {number} [value] the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeNumericRefinement = function(attribute, operator, value) {\n  this._change({\n    state: this.state.resetPage().removeNumericRefinement(attribute, operator, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveRefine = function() {\n  return this.removeDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes the refinement set on a hierarchical facet.\n * @param {string} facet the facet name\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is not refined\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeHierarchicalFacetRefinement = function(facet) {\n  this._change({\n    state: this.state.resetPage().removeHierarchicalFacetRefinement(facet),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes a filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeRefine = function() {\n  return this.removeFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeExcludeRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.removeExclude = function() {\n  return this.removeFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Removes a tag filter with the `tag` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove from the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().removeTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds or removes an exclusion filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleExcludeFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.toggleExclude = function() {\n  return this.toggleFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n * @deprecated since version 2.19.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefinement = function(facet, value) {\n  return this.toggleFacetRefinement(facet, value);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefine = function() {\n  return this.toggleFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds or removes a tag filter with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove or add\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().toggleTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Increments the page number by one.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setPage(0).nextPage().getPage();\n * // returns 1\n */\nAlgoliaSearchHelper.prototype.nextPage = function() {\n  var page = this.state.page || 0;\n  return this.setPage(page + 1);\n};\n\n/**\n * Decrements the page number by one.\n * @fires change\n * @return {AlgoliaSearchHelper}\n * @chainable\n * @example\n * helper.setPage(1).previousPage().getPage();\n * // returns 0\n */\nAlgoliaSearchHelper.prototype.previousPage = function() {\n  var page = this.state.page || 0;\n  return this.setPage(page - 1);\n};\n\n/**\n * @private\n */\nfunction setCurrentPage(page) {\n  if (page < 0) throw new Error('Page requested below 0.');\n\n  this._change({\n    state: this.state.setPage(page),\n    isPageReset: false\n  });\n\n  return this;\n}\n\n/**\n * Change the current page\n * @deprecated\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setCurrentPage = setCurrentPage;\n\n/**\n * Updates the current page.\n * @function\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setPage = setCurrentPage;\n\n/**\n * Updates the name of the index that will be targeted by the query.\n *\n * This method resets the current page to 0.\n * @param {string} name the index name\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setIndex = function(name) {\n  this._change({\n    state: this.state.resetPage().setIndex(name),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Update a parameter of the search. This method reset the page\n *\n * The complete list of parameters is available on the\n * [Algolia website](https://www.algolia.com/doc/rest#query-an-index).\n * The most commonly used parameters have their own [shortcuts](#query-parameters-shortcuts)\n * or benefit from higher-level APIs (all the kind of filters and facets have their own API)\n *\n * This method resets the current page to 0.\n * @param {string} parameter name of the parameter to update\n * @param {any} value new value of the parameter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setQueryParameter('hitsPerPage', 20).search();\n */\nAlgoliaSearchHelper.prototype.setQueryParameter = function(parameter, value) {\n  this._change({\n    state: this.state.resetPage().setQueryParameter(parameter, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Set the whole state (warning: will erase previous state)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setState = function(newState) {\n  this._change({\n    state: SearchParameters.make(newState),\n    isPageReset: false\n  });\n\n  return this;\n};\n\n/**\n * Override the current state without triggering a change event.\n * Do not use this method unless you know what you are doing. (see the example\n * for a legit use case)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @example\n *  helper.on('change', function(state){\n *    // In this function you might want to find a way to store the state in the url/history\n *    updateYourURL(state)\n *  })\n *  window.onpopstate = function(event){\n *    // This is naive though as you should check if the state is really defined etc.\n *    helper.overrideStateWithoutTriggeringChangeEvent(event.state).search()\n *  }\n * @chainable\n */\nAlgoliaSearchHelper.prototype.overrideStateWithoutTriggeringChangeEvent = function(newState) {\n  this.state = new SearchParameters(newState);\n  return this;\n};\n\n/**\n * Check if an attribute has any numeric, conjunctive, disjunctive or hierarchical filters.\n * @param {string} attribute the name of the attribute\n * @return {boolean} true if the attribute is filtered by at least one value\n * @example\n * // hasRefinements works with numeric, conjunctive, disjunctive and hierarchical filters\n * helper.hasRefinements('price'); // false\n * helper.addNumericRefinement('price', '>', 100);\n * helper.hasRefinements('price'); // true\n *\n * helper.hasRefinements('color'); // false\n * helper.addFacetRefinement('color', 'blue');\n * helper.hasRefinements('color'); // true\n *\n * helper.hasRefinements('material'); // false\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * helper.hasRefinements('material'); // true\n *\n * helper.hasRefinements('categories'); // false\n * helper.toggleFacetRefinement('categories', 'kitchen > knife');\n * helper.hasRefinements('categories'); // true\n *\n */\nAlgoliaSearchHelper.prototype.hasRefinements = function(attribute) {\n  if (objectHasKeys(this.state.getNumericRefinements(attribute))) {\n    return true;\n  } else if (this.state.isConjunctiveFacet(attribute)) {\n    return this.state.isFacetRefined(attribute);\n  } else if (this.state.isDisjunctiveFacet(attribute)) {\n    return this.state.isDisjunctiveFacetRefined(attribute);\n  } else if (this.state.isHierarchicalFacet(attribute)) {\n    return this.state.isHierarchicalFacetRefined(attribute);\n  }\n\n  // there's currently no way to know that the user did call `addNumericRefinement` at some point\n  // thus we cannot distinguish if there once was a numeric refinement that was cleared\n  // so we will return false in every other situations to be consistent\n  // while what we should do here is throw because we did not find the attribute in any type\n  // of refinement\n  return false;\n};\n\n/**\n * Check if a value is excluded for a specific faceted attribute. If the value\n * is omitted then the function checks if there is any excluding refinements.\n *\n * @param  {string}  facet name of the attribute for used for faceting\n * @param  {string}  [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n * @return {boolean} true if refined\n * @example\n * helper.isExcludeRefined('color'); // false\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // false\n *\n * helper.addFacetExclusion('color', 'red');\n *\n * helper.isExcludeRefined('color'); // true\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // true\n */\nAlgoliaSearchHelper.prototype.isExcluded = function(facet, value) {\n  return this.state.isExcludeRefined(facet, value);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasRefinements}\n */\nAlgoliaSearchHelper.prototype.isDisjunctiveRefined = function(facet, value) {\n  return this.state.isDisjunctiveFacetRefined(facet, value);\n};\n\n/**\n * Check if the string is a currently filtering tag.\n * @param {string} tag tag to check\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype.hasTag = function(tag) {\n  return this.state.isTagRefined(tag);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasTag}\n */\nAlgoliaSearchHelper.prototype.isTagRefined = function() {\n  return this.hasTagRefinements.apply(this, arguments);\n};\n\n\n/**\n * Get the name of the currently used index.\n * @return {string}\n * @example\n * helper.setIndex('highestPrice_products').getIndex();\n * // returns 'highestPrice_products'\n */\nAlgoliaSearchHelper.prototype.getIndex = function() {\n  return this.state.index;\n};\n\nfunction getCurrentPage() {\n  return this.state.page;\n}\n\n/**\n * Get the currently selected page\n * @deprecated\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getCurrentPage = getCurrentPage;\n/**\n * Get the currently selected page\n * @function\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getPage = getCurrentPage;\n\n/**\n * Get all the tags currently set to filters the results.\n *\n * @return {string[]} The list of tags currently set.\n */\nAlgoliaSearchHelper.prototype.getTags = function() {\n  return this.state.tagRefinements;\n};\n\n/**\n * Get the list of refinements for a given attribute. This method works with\n * conjunctive, disjunctive, excluding and numerical filters.\n *\n * See also SearchResults#getRefinements\n *\n * @param {string} facetName attribute name used for faceting\n * @return {Array.<FacetRefinement|NumericRefinement>} All Refinement are objects that contain a value, and\n * a type. Numeric also contains an operator.\n * @example\n * helper.addNumericRefinement('price', '>', 100);\n * helper.getRefinements('price');\n * // [\n * //   {\n * //     \"value\": [\n * //       100\n * //     ],\n * //     \"operator\": \">\",\n * //     \"type\": \"numeric\"\n * //   }\n * // ]\n * @example\n * helper.addFacetRefinement('color', 'blue');\n * helper.addFacetExclusion('color', 'red');\n * helper.getRefinements('color');\n * // [\n * //   {\n * //     \"value\": \"blue\",\n * //     \"type\": \"conjunctive\"\n * //   },\n * //   {\n * //     \"value\": \"red\",\n * //     \"type\": \"exclude\"\n * //   }\n * // ]\n * @example\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * // [\n * //   {\n * //     \"value\": \"plastic\",\n * //     \"type\": \"disjunctive\"\n * //   }\n * // ]\n */\nAlgoliaSearchHelper.prototype.getRefinements = function(facetName) {\n  var refinements = [];\n\n  if (this.state.isConjunctiveFacet(facetName)) {\n    var conjRefinements = this.state.getConjunctiveRefinements(facetName);\n\n    conjRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'conjunctive'\n      });\n    });\n\n    var excludeRefinements = this.state.getExcludeRefinements(facetName);\n\n    excludeRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'exclude'\n      });\n    });\n  } else if (this.state.isDisjunctiveFacet(facetName)) {\n    var disjRefinements = this.state.getDisjunctiveRefinements(facetName);\n\n    disjRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'disjunctive'\n      });\n    });\n  }\n\n  var numericRefinements = this.state.getNumericRefinements(facetName);\n\n  Object.keys(numericRefinements).forEach(function(operator) {\n    var value = numericRefinements[operator];\n\n    refinements.push({\n      value: value,\n      operator: operator,\n      type: 'numeric'\n    });\n  });\n\n  return refinements;\n};\n\n/**\n * Return the current refinement for the (attribute, operator)\n * @param {string} attribute attribute in the record\n * @param {string} operator operator applied on the refined values\n * @return {Array.<number|number[]>} refined values\n */\nAlgoliaSearchHelper.prototype.getNumericRefinement = function(attribute, operator) {\n  return this.state.getNumericRefinement(attribute, operator);\n};\n\n/**\n * Get the current breadcrumb for a hierarchical facet, as an array\n * @param  {string} facetName Hierarchical facet name\n * @return {array.<string>} the path as an array of string\n */\nAlgoliaSearchHelper.prototype.getHierarchicalFacetBreadcrumb = function(facetName) {\n  return this.state.getHierarchicalFacetBreadcrumb(facetName);\n};\n\n// /////////// PRIVATE\n\n/**\n * Perform the underlying queries\n * @private\n * @return {undefined}\n * @fires search\n * @fires result\n * @fires error\n */\nAlgoliaSearchHelper.prototype._search = function(options) {\n  var state = this.state;\n  var states = [];\n  var mainQueries = [];\n\n  if (!options.onlyWithDerivedHelpers) {\n    mainQueries = requestBuilder._getQueries(state.index, state);\n\n    states.push({\n      state: state,\n      queriesCount: mainQueries.length,\n      helper: this\n    });\n\n    this.emit('search', {\n      state: state,\n      results: this.lastResults\n    });\n  }\n\n  var derivedQueries = this.derivedHelpers.map(function(derivedHelper) {\n    var derivedState = derivedHelper.getModifiedState(state);\n    var derivedStateQueries = requestBuilder._getQueries(derivedState.index, derivedState);\n\n    states.push({\n      state: derivedState,\n      queriesCount: derivedStateQueries.length,\n      helper: derivedHelper\n    });\n\n    derivedHelper.emit('search', {\n      state: derivedState,\n      results: derivedHelper.lastResults\n    });\n\n    return derivedStateQueries;\n  });\n\n  var queries = Array.prototype.concat.apply(mainQueries, derivedQueries);\n  var queryId = this._queryId++;\n\n  this._currentNbQueries++;\n\n  try {\n    this.client.search(queries)\n      .then(this._dispatchAlgoliaResponse.bind(this, states, queryId))\n      .catch(this._dispatchAlgoliaError.bind(this, queryId));\n  } catch (error) {\n    // If we reach this part, we're in an internal error state\n    this.emit('error', {\n      error: error\n    });\n  }\n};\n\n/**\n * Transform the responses as sent by the server and transform them into a user\n * usable object that merge the results of all the batch requests. It will dispatch\n * over the different helper + derived helpers (when there are some).\n * @private\n * @param {array.<{SearchParameters, AlgoliaQueries, AlgoliaSearchHelper}>}\n *  state state used for to generate the request\n * @param {number} queryId id of the current request\n * @param {object} content content of the response\n * @return {undefined}\n */\nAlgoliaSearchHelper.prototype._dispatchAlgoliaResponse = function(states, queryId, content) {\n  // FIXME remove the number of outdated queries discarded instead of just one\n\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= (queryId - this._lastQueryIdReceived);\n  this._lastQueryIdReceived = queryId;\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n\n  var results = content.results.slice();\n\n  states.forEach(function(s) {\n    var state = s.state;\n    var queriesCount = s.queriesCount;\n    var helper = s.helper;\n    var specificResults = results.splice(0, queriesCount);\n\n    var formattedResponse = helper.lastResults = new SearchResults(state, specificResults);\n\n    helper.emit('result', {\n      results: formattedResponse,\n      state: state\n    });\n  });\n};\n\nAlgoliaSearchHelper.prototype._dispatchAlgoliaError = function(queryId, error) {\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= queryId - this._lastQueryIdReceived;\n  this._lastQueryIdReceived = queryId;\n\n  this.emit('error', {\n    error: error\n  });\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n};\n\nAlgoliaSearchHelper.prototype.containsRefinement = function(query, facetFilters, numericFilters, tagFilters) {\n  return query ||\n    facetFilters.length !== 0 ||\n    numericFilters.length !== 0 ||\n    tagFilters.length !== 0;\n};\n\n/**\n * Test if there are some disjunctive refinements on the facet\n * @private\n * @param {string} facet the attribute to test\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype._hasDisjunctiveRefinements = function(facet) {\n  return this.state.disjunctiveRefinements[facet] &&\n    this.state.disjunctiveRefinements[facet].length > 0;\n};\n\nAlgoliaSearchHelper.prototype._change = function(event) {\n  var state = event.state;\n  var isPageReset = event.isPageReset;\n\n  if (state !== this.state) {\n    this.state = state;\n\n    this.emit('change', {\n      state: this.state,\n      results: this.lastResults,\n      isPageReset: isPageReset\n    });\n  }\n};\n\n/**\n * Clears the cache of the underlying Algolia client.\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.clearCache = function() {\n  this.client.clearCache && this.client.clearCache();\n  return this;\n};\n\n/**\n * Updates the internal client instance. If the reference of the clients\n * are equal then no update is actually done.\n * @param  {AlgoliaSearch} newClient an AlgoliaSearch client\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.setClient = function(newClient) {\n  if (this.client === newClient) return this;\n\n  if (typeof newClient.addAlgoliaAgent === 'function') {\n    newClient.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n  this.client = newClient;\n\n  return this;\n};\n\n/**\n * Gets the instance of the currently used client.\n * @return {AlgoliaSearch}\n */\nAlgoliaSearchHelper.prototype.getClient = function() {\n  return this.client;\n};\n\n/**\n * Creates an derived instance of the Helper. A derived helper\n * is a way to request other indices synchronised with the lifecycle\n * of the main Helper. This mechanism uses the multiqueries feature\n * of Algolia to aggregate all the requests in a single network call.\n *\n * This method takes a function that is used to create a new SearchParameter\n * that will be used to create requests to Algolia. Those new requests\n * are created just before the `search` event. The signature of the function\n * is `SearchParameters -> SearchParameters`.\n *\n * This method returns a new DerivedHelper which is an EventEmitter\n * that fires the same `search`, `result` and `error` events. Those\n * events, however, will receive data specific to this DerivedHelper\n * and the SearchParameters that is returned by the call of the\n * parameter function.\n * @param {function} fn SearchParameters -> SearchParameters\n * @return {DerivedHelper}\n */\nAlgoliaSearchHelper.prototype.derive = function(fn) {\n  var derivedHelper = new DerivedHelper(this, fn);\n  this.derivedHelpers.push(derivedHelper);\n  return derivedHelper;\n};\n\n/**\n * This method detaches a derived Helper from the main one. Prefer using the one from the\n * derived helper itself, to remove the event listeners too.\n * @private\n * @return {undefined}\n * @throws Error\n */\nAlgoliaSearchHelper.prototype.detachDerivedHelper = function(derivedHelper) {\n  var pos = this.derivedHelpers.indexOf(derivedHelper);\n  if (pos === -1) throw new Error('Derived helper already detached');\n  this.derivedHelpers.splice(pos, 1);\n};\n\n/**\n * This method returns true if there is currently at least one on-going search.\n * @return {boolean} true if there is a search pending\n */\nAlgoliaSearchHelper.prototype.hasPendingRequests = function() {\n  return this._currentNbQueries > 0;\n};\n\n/**\n * @typedef AlgoliaSearchHelper.NumericRefinement\n * @type {object}\n * @property {number[]} value the numbers that are used for filtering this attribute with\n * the operator specified.\n * @property {string} operator the faceting data: value, number of entries\n * @property {string} type will be 'numeric'\n */\n\n/**\n * @typedef AlgoliaSearchHelper.FacetRefinement\n * @type {object}\n * @property {string} value the string use to filter the attribute\n * @property {string} type the type of filter: 'conjunctive', 'disjunctive', 'exclude'\n */\n\nmodule.exports = AlgoliaSearchHelper;\n","'use strict';\n\nvar AlgoliaSearchHelper = require('./src/algoliasearch.helper');\n\nvar SearchParameters = require('./src/SearchParameters');\nvar SearchResults = require('./src/SearchResults');\n\n/**\n * The algoliasearchHelper module is the function that will let its\n * contains everything needed to use the Algoliasearch\n * Helper. It is a also a function that instanciate the helper.\n * To use the helper, you also need the Algolia JS client v3.\n * @example\n * //using the UMD build\n * var client = algoliasearch('latency', '6be0576ff61c053d5f9a3225e2a90f76');\n * var helper = algoliasearchHelper(client, 'bestbuy', {\n *   facets: ['shipping'],\n *   disjunctiveFacets: ['category']\n * });\n * helper.on('result', function(event) {\n *   console.log(event.results);\n * });\n * helper\n *   .toggleFacetRefinement('category', 'Movies & TV Shows')\n *   .toggleFacetRefinement('shipping', 'Free shipping')\n *   .search();\n * @example\n * // The helper is an event emitter using the node API\n * helper.on('result', updateTheResults);\n * helper.once('result', updateTheResults);\n * helper.removeListener('result', updateTheResults);\n * helper.removeAllListeners('result');\n * @module algoliasearchHelper\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the name of the index to query\n * @param  {SearchParameters|object} opts an object defining the initial config of the search. It doesn't have to be a {SearchParameters}, just an object containing the properties you need from it.\n * @return {AlgoliaSearchHelper}\n */\nfunction algoliasearchHelper(client, index, opts) {\n  return new AlgoliaSearchHelper(client, index, opts);\n}\n\n/**\n * The version currently used\n * @member module:algoliasearchHelper.version\n * @type {number}\n */\nalgoliasearchHelper.version = require('./src/version.js');\n\n/**\n * Constructor for the Helper.\n * @member module:algoliasearchHelper.AlgoliaSearchHelper\n * @type {AlgoliaSearchHelper}\n */\nalgoliasearchHelper.AlgoliaSearchHelper = AlgoliaSearchHelper;\n\n/**\n * Constructor for the object containing all the parameters of the search.\n * @member module:algoliasearchHelper.SearchParameters\n * @type {SearchParameters}\n */\nalgoliasearchHelper.SearchParameters = SearchParameters;\n\n/**\n * Constructor for the object containing the results of the search.\n * @member module:algoliasearchHelper.SearchResults\n * @type {SearchResults}\n */\nalgoliasearchHelper.SearchResults = SearchResults;\n\nmodule.exports = algoliasearchHelper;\n","export function createDocumentationLink(_ref) {\n  var name = _ref.name,\n      _ref$connector = _ref.connector,\n      connector = _ref$connector === void 0 ? false : _ref$connector;\n  return ['https://www.algolia.com/doc/api-reference/widgets/', name, '/js/', connector ? '#connector' : ''].join('');\n}\nexport function createDocumentationMessageGenerator() {\n  for (var _len = arguments.length, widgets = new Array(_len), _key = 0; _key < _len; _key++) {\n    widgets[_key] = arguments[_key];\n  }\n\n  var links = widgets.map(function (widget) {\n    return createDocumentationLink(widget);\n  }).join(', ');\n  return function (message) {\n    return [message, \"See documentation: \".concat(links)].filter(Boolean).join('\\n\\n');\n  };\n}","export function createInitArgs(instantSearchInstance, parent, uiState) {\n  var helper = parent.getHelper();\n  return {\n    uiState: uiState,\n    helper: helper,\n    parent: parent,\n    instantSearchInstance: instantSearchInstance,\n    state: helper.state,\n    renderState: instantSearchInstance.renderState,\n    templatesConfig: instantSearchInstance.templatesConfig,\n    createURL: parent.createURL,\n    scopedResults: [],\n    searchMetadata: {\n      isSearchStalled: instantSearchInstance.status === 'stalled'\n    },\n    status: instantSearchInstance.status,\n    error: instantSearchInstance.error\n  };\n}\nexport function createRenderArgs(instantSearchInstance, parent) {\n  var results = parent.getResults();\n  return {\n    helper: parent.getHelper(),\n    parent: parent,\n    instantSearchInstance: instantSearchInstance,\n    results: results,\n    scopedResults: parent.getScopedResults(),\n    state: results._state,\n    renderState: instantSearchInstance.renderState,\n    templatesConfig: instantSearchInstance.templatesConfig,\n    createURL: parent.createURL,\n    searchMetadata: {\n      isSearchStalled: instantSearchInstance.status === 'stalled'\n    },\n    status: instantSearchInstance.status,\n    error: instantSearchInstance.error\n  };\n}","export function isIndexWidget(widget) {\n  return widget.$$type === 'ais.index';\n}","// We aren't using the native `Array.prototype.findIndex` because the refactor away from Lodash is not\n// published as a major version.\n// Relying on the `findIndex` polyfill on user-land, which before was only required for niche use-cases,\n// was decided as too risky.\n// @MAJOR Replace with the native `Array.prototype.findIndex` method\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\nexport function findIndex(array, comparator) {\n  if (!Array.isArray(array)) {\n    return -1;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n}","export function uniq(array) {\n  return array.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { findIndex } from \"./findIndex.js\";\nimport { uniq } from \"./uniq.js\";\n\nvar mergeWithRest = function mergeWithRest(left, right) {\n  var facets = right.facets,\n      disjunctiveFacets = right.disjunctiveFacets,\n      facetsRefinements = right.facetsRefinements,\n      facetsExcludes = right.facetsExcludes,\n      disjunctiveFacetsRefinements = right.disjunctiveFacetsRefinements,\n      numericRefinements = right.numericRefinements,\n      tagRefinements = right.tagRefinements,\n      hierarchicalFacets = right.hierarchicalFacets,\n      hierarchicalFacetsRefinements = right.hierarchicalFacetsRefinements,\n      ruleContexts = right.ruleContexts,\n      rest = _objectWithoutProperties(right, [\"facets\", \"disjunctiveFacets\", \"facetsRefinements\", \"facetsExcludes\", \"disjunctiveFacetsRefinements\", \"numericRefinements\", \"tagRefinements\", \"hierarchicalFacets\", \"hierarchicalFacetsRefinements\", \"ruleContexts\"]);\n\n  return left.setQueryParameters(rest);\n}; // Merge facets\n\n\nvar mergeFacets = function mergeFacets(left, right) {\n  return right.facets.reduce(function (_, name) {\n    return _.addFacet(name);\n  }, left);\n};\n\nvar mergeDisjunctiveFacets = function mergeDisjunctiveFacets(left, right) {\n  return right.disjunctiveFacets.reduce(function (_, name) {\n    return _.addDisjunctiveFacet(name);\n  }, left);\n};\n\nvar mergeHierarchicalFacets = function mergeHierarchicalFacets(left, right) {\n  return left.setQueryParameters({\n    hierarchicalFacets: right.hierarchicalFacets.reduce(function (facets, facet) {\n      var index = findIndex(facets, function (_) {\n        return _.name === facet.name;\n      });\n\n      if (index === -1) {\n        return facets.concat(facet);\n      }\n\n      var nextFacets = facets.slice();\n      nextFacets.splice(index, 1, facet);\n      return nextFacets;\n    }, left.hierarchicalFacets)\n  });\n}; // Merge facet refinements\n\n\nvar mergeTagRefinements = function mergeTagRefinements(left, right) {\n  return right.tagRefinements.reduce(function (_, value) {\n    return _.addTagRefinement(value);\n  }, left);\n};\n\nvar mergeFacetRefinements = function mergeFacetRefinements(left, right) {\n  return left.setQueryParameters({\n    facetsRefinements: _objectSpread(_objectSpread({}, left.facetsRefinements), right.facetsRefinements)\n  });\n};\n\nvar mergeFacetsExcludes = function mergeFacetsExcludes(left, right) {\n  return left.setQueryParameters({\n    facetsExcludes: _objectSpread(_objectSpread({}, left.facetsExcludes), right.facetsExcludes)\n  });\n};\n\nvar mergeDisjunctiveFacetsRefinements = function mergeDisjunctiveFacetsRefinements(left, right) {\n  return left.setQueryParameters({\n    disjunctiveFacetsRefinements: _objectSpread(_objectSpread({}, left.disjunctiveFacetsRefinements), right.disjunctiveFacetsRefinements)\n  });\n};\n\nvar mergeNumericRefinements = function mergeNumericRefinements(left, right) {\n  return left.setQueryParameters({\n    numericRefinements: _objectSpread(_objectSpread({}, left.numericRefinements), right.numericRefinements)\n  });\n};\n\nvar mergeHierarchicalFacetsRefinements = function mergeHierarchicalFacetsRefinements(left, right) {\n  return left.setQueryParameters({\n    hierarchicalFacetsRefinements: _objectSpread(_objectSpread({}, left.hierarchicalFacetsRefinements), right.hierarchicalFacetsRefinements)\n  });\n};\n\nvar mergeRuleContexts = function mergeRuleContexts(left, right) {\n  var ruleContexts = uniq([].concat(left.ruleContexts).concat(right.ruleContexts).filter(Boolean));\n\n  if (ruleContexts.length > 0) {\n    return left.setQueryParameters({\n      ruleContexts: ruleContexts\n    });\n  }\n\n  return left;\n};\n\nexport var mergeSearchParameters = function mergeSearchParameters() {\n  for (var _len = arguments.length, parameters = new Array(_len), _key = 0; _key < _len; _key++) {\n    parameters[_key] = arguments[_key];\n  }\n\n  return parameters.reduce(function (left, right) {\n    var hierarchicalFacetsRefinementsMerged = mergeHierarchicalFacetsRefinements(left, right);\n    var hierarchicalFacetsMerged = mergeHierarchicalFacets(hierarchicalFacetsRefinementsMerged, right);\n    var tagRefinementsMerged = mergeTagRefinements(hierarchicalFacetsMerged, right);\n    var numericRefinementsMerged = mergeNumericRefinements(tagRefinementsMerged, right);\n    var disjunctiveFacetsRefinementsMerged = mergeDisjunctiveFacetsRefinements(numericRefinementsMerged, right);\n    var facetsExcludesMerged = mergeFacetsExcludes(disjunctiveFacetsRefinementsMerged, right);\n    var facetRefinementsMerged = mergeFacetRefinements(facetsExcludesMerged, right);\n    var disjunctiveFacetsMerged = mergeDisjunctiveFacets(facetRefinementsMerged, right);\n    var ruleContextsMerged = mergeRuleContexts(disjunctiveFacetsMerged, right);\n    var facetsMerged = mergeFacets(ruleContextsMerged, right);\n    return mergeWithRest(facetsMerged, right);\n  });\n};","export function resolveSearchParameters(current) {\n  var parent = current.getParent();\n  var states = [current.getHelper().state];\n\n  while (parent !== null) {\n    states = [parent.getHelper().state].concat(states);\n    parent = parent.getParent();\n  }\n\n  return states;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport { checkIndexUiState, createDocumentationMessageGenerator, resolveSearchParameters, mergeSearchParameters, warning, isIndexWidget, createInitArgs, createRenderArgs } from \"../../lib/utils/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'index-widget'\n});\n\n/**\n * This is the same content as helper._change / setState, but allowing for extra\n * UiState to be synchronized.\n * see: https://github.com/algolia/algoliasearch-helper-js/blob/6b835ffd07742f2d6b314022cce6848f5cfecd4a/src/algoliasearch.helper.js#L1311-L1324\n */\nfunction privateHelperSetState(helper, _ref) {\n  var state = _ref.state,\n      isPageReset = _ref.isPageReset,\n      _uiState = _ref._uiState;\n\n  if (state !== helper.state) {\n    helper.state = state;\n    helper.emit('change', {\n      state: helper.state,\n      results: helper.lastResults,\n      isPageReset: isPageReset,\n      _uiState: _uiState\n    });\n  }\n}\n\nfunction getLocalWidgetsUiState(widgets, widgetStateOptions) {\n  var initialUiState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return widgets.reduce(function (uiState, widget) {\n    if (isIndexWidget(widget)) {\n      return uiState;\n    }\n\n    if (!widget.getWidgetUiState && !widget.getWidgetState) {\n      return uiState;\n    }\n\n    if (widget.getWidgetUiState) {\n      return widget.getWidgetUiState(uiState, widgetStateOptions);\n    }\n\n    return widget.getWidgetState(uiState, widgetStateOptions);\n  }, initialUiState);\n}\n\nfunction getLocalWidgetsSearchParameters(widgets, widgetSearchParametersOptions) {\n  var initialSearchParameters = widgetSearchParametersOptions.initialSearchParameters,\n      rest = _objectWithoutProperties(widgetSearchParametersOptions, [\"initialSearchParameters\"]);\n\n  return widgets.filter(function (widget) {\n    return !isIndexWidget(widget);\n  }).reduce(function (state, widget) {\n    if (!widget.getWidgetSearchParameters) {\n      return state;\n    }\n\n    return widget.getWidgetSearchParameters(state, rest);\n  }, initialSearchParameters);\n}\n\nfunction resetPageFromWidgets(widgets) {\n  var indexWidgets = widgets.filter(isIndexWidget);\n\n  if (indexWidgets.length === 0) {\n    return;\n  }\n\n  indexWidgets.forEach(function (widget) {\n    var widgetHelper = widget.getHelper();\n    privateHelperSetState(widgetHelper, {\n      state: widgetHelper.state.resetPage(),\n      isPageReset: true\n    });\n    resetPageFromWidgets(widget.getWidgets());\n  });\n}\n\nfunction resolveScopedResultsFromWidgets(widgets) {\n  var indexWidgets = widgets.filter(isIndexWidget);\n  return indexWidgets.reduce(function (scopedResults, current) {\n    return scopedResults.concat.apply(scopedResults, [{\n      indexId: current.getIndexId(),\n      results: current.getResults(),\n      helper: current.getHelper()\n    }].concat(_toConsumableArray(resolveScopedResultsFromWidgets(current.getWidgets()))));\n  }, []);\n}\n\nvar index = function index(widgetParams) {\n  if (widgetParams === undefined || widgetParams.indexName === undefined) {\n    throw new Error(withUsage('The `indexName` option is required.'));\n  }\n\n  var indexName = widgetParams.indexName,\n      _widgetParams$indexId = widgetParams.indexId,\n      indexId = _widgetParams$indexId === void 0 ? indexName : _widgetParams$indexId;\n  var localWidgets = [];\n  var localUiState = {};\n  var localInstantSearchInstance = null;\n  var localParent = null;\n  var helper = null;\n  var derivedHelper = null;\n  return {\n    $$type: 'ais.index',\n    $$widgetType: 'ais.index',\n    getIndexName: function getIndexName() {\n      return indexName;\n    },\n    getIndexId: function getIndexId() {\n      return indexId;\n    },\n    getHelper: function getHelper() {\n      return helper;\n    },\n    getResults: function getResults() {\n      return derivedHelper && derivedHelper.lastResults;\n    },\n    getScopedResults: function getScopedResults() {\n      var widgetParent = this.getParent(); // If the widget is the root, we consider itself as the only sibling.\n\n      var widgetSiblings = widgetParent ? widgetParent.getWidgets() : [this];\n      return resolveScopedResultsFromWidgets(widgetSiblings);\n    },\n    getParent: function getParent() {\n      return localParent;\n    },\n    createURL: function createURL(nextState) {\n      return localInstantSearchInstance._createURL(_defineProperty({}, indexId, getLocalWidgetsUiState(localWidgets, {\n        searchParameters: nextState,\n        helper: helper\n      })));\n    },\n    getWidgets: function getWidgets() {\n      return localWidgets;\n    },\n    addWidgets: function addWidgets(widgets) {\n      var _this = this;\n\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n\n      localWidgets = localWidgets.concat(widgets);\n\n      if (localInstantSearchInstance && Boolean(widgets.length)) {\n        privateHelperSetState(helper, {\n          state: getLocalWidgetsSearchParameters(localWidgets, {\n            uiState: localUiState,\n            initialSearchParameters: helper.state\n          }),\n          _uiState: localUiState\n        }); // We compute the render state before calling `init` in a separate loop\n        // to construct the whole render state object that is then passed to\n        // `init`.\n\n        widgets.forEach(function (widget) {\n          if (widget.getRenderState) {\n            var renderState = widget.getRenderState(localInstantSearchInstance.renderState[_this.getIndexId()] || {}, createInitArgs(localInstantSearchInstance, _this, localInstantSearchInstance._initialUiState));\n            storeRenderState({\n              renderState: renderState,\n              instantSearchInstance: localInstantSearchInstance,\n              parent: _this\n            });\n          }\n        });\n        widgets.forEach(function (widget) {\n          if (widget.init) {\n            widget.init(createInitArgs(localInstantSearchInstance, _this, localInstantSearchInstance._initialUiState));\n          }\n        });\n        localInstantSearchInstance.scheduleSearch();\n      }\n\n      return this;\n    },\n    removeWidgets: function removeWidgets(widgets) {\n      var _this2 = this;\n\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n\n      localWidgets = localWidgets.filter(function (widget) {\n        return widgets.indexOf(widget) === -1;\n      });\n\n      if (localInstantSearchInstance && Boolean(widgets.length)) {\n        var nextState = widgets.reduce(function (state, widget) {\n          // the `dispose` method exists at this point we already assert it\n          var next = widget.dispose({\n            helper: helper,\n            state: state,\n            parent: _this2\n          });\n          return next || state;\n        }, helper.state);\n        localUiState = getLocalWidgetsUiState(localWidgets, {\n          searchParameters: nextState,\n          helper: helper\n        });\n        helper.setState(getLocalWidgetsSearchParameters(localWidgets, {\n          uiState: localUiState,\n          initialSearchParameters: nextState\n        }));\n\n        if (localWidgets.length) {\n          localInstantSearchInstance.scheduleSearch();\n        }\n      }\n\n      return this;\n    },\n    init: function init(_ref2) {\n      var _this3 = this,\n          _instantSearchInstanc;\n\n      var instantSearchInstance = _ref2.instantSearchInstance,\n          parent = _ref2.parent,\n          uiState = _ref2.uiState;\n\n      if (helper !== null) {\n        // helper is already initialized, therefore we do not need to set up\n        // any listeners\n        return;\n      }\n\n      localInstantSearchInstance = instantSearchInstance;\n      localParent = parent;\n      localUiState = uiState[indexId] || {}; // The `mainHelper` is already defined at this point. The instance is created\n      // inside InstantSearch at the `start` method, which occurs before the `init`\n      // step.\n\n      var mainHelper = instantSearchInstance.mainHelper;\n      var parameters = getLocalWidgetsSearchParameters(localWidgets, {\n        uiState: localUiState,\n        initialSearchParameters: new algoliasearchHelper.SearchParameters({\n          index: indexName\n        })\n      }); // This Helper is only used for state management we do not care about the\n      // `searchClient`. Only the \"main\" Helper created at the `InstantSearch`\n      // level is aware of the client.\n\n      helper = algoliasearchHelper({}, parameters.index, parameters); // We forward the call to `search` to the \"main\" instance of the Helper\n      // which is responsible for managing the queries (it's the only one that is\n      // aware of the `searchClient`).\n\n      helper.search = function () {\n        if (instantSearchInstance.onStateChange) {\n          instantSearchInstance.onStateChange({\n            uiState: instantSearchInstance.mainIndex.getWidgetUiState({}),\n            setUiState: function setUiState(nextState) {\n              return instantSearchInstance.setUiState(nextState, false);\n            }\n          }); // We don't trigger a search when controlled because it becomes the\n          // responsibility of `setUiState`.\n\n          return mainHelper;\n        }\n\n        return mainHelper.search();\n      };\n\n      helper.searchWithoutTriggeringOnStateChange = function () {\n        return mainHelper.search();\n      }; // We use the same pattern for the `searchForFacetValues`.\n\n\n      helper.searchForFacetValues = function (facetName, facetValue, maxFacetHits, userState) {\n        var state = helper.state.setQueryParameters(userState);\n        return mainHelper.searchForFacetValues(facetName, facetValue, maxFacetHits, state);\n      };\n\n      derivedHelper = mainHelper.derive(function () {\n        return mergeSearchParameters.apply(void 0, _toConsumableArray(resolveSearchParameters(_this3)));\n      });\n      var indexInitialResults = (_instantSearchInstanc = instantSearchInstance._initialResults) === null || _instantSearchInstanc === void 0 ? void 0 : _instantSearchInstanc[this.getIndexId()];\n\n      if (indexInitialResults) {\n        // We restore the shape of the results provided to the instance to respect\n        // the helper's structure.\n        var results = new algoliasearchHelper.SearchResults(new algoliasearchHelper.SearchParameters(indexInitialResults.state), indexInitialResults.results);\n        derivedHelper.lastResults = results;\n        helper.lastResults = results;\n      } // Subscribe to the Helper state changes for the page before widgets\n      // are initialized. This behavior mimics the original one of the Helper.\n      // It makes sense to replicate it at the `init` step. We have another\n      // listener on `change` below, once `init` is done.\n\n\n      helper.on('change', function (_ref3) {\n        var isPageReset = _ref3.isPageReset;\n\n        if (isPageReset) {\n          resetPageFromWidgets(localWidgets);\n        }\n      });\n      derivedHelper.on('search', function () {\n        // The index does not manage the \"staleness\" of the search. This is the\n        // responsibility of the main instance. It does not make sense to manage\n        // it at the index level because it's either: all of them or none of them\n        // that are stalled. The queries are performed into a single network request.\n        instantSearchInstance.scheduleStalledRender();\n\n        if (process.env.NODE_ENV === 'development') {\n          checkIndexUiState({\n            index: _this3,\n            indexUiState: localUiState\n          });\n        }\n      });\n      derivedHelper.on('result', function (_ref4) {\n        var results = _ref4.results;\n        // The index does not render the results it schedules a new render\n        // to let all the other indices emit their own results. It allows us to\n        // run the render process in one pass.\n        instantSearchInstance.scheduleRender(); // the derived helper is the one which actually searches, but the helper\n        // which is exposed e.g. via instance.helper, doesn't search, and thus\n        // does not have access to lastResults, which it used to in pre-federated\n        // search behavior.\n\n        helper.lastResults = results;\n      }); // We compute the render state before calling `init` in a separate loop\n      // to construct the whole render state object that is then passed to\n      // `init`.\n\n      localWidgets.forEach(function (widget) {\n        if (widget.getRenderState) {\n          var renderState = widget.getRenderState(instantSearchInstance.renderState[_this3.getIndexId()] || {}, createInitArgs(instantSearchInstance, _this3, uiState));\n          storeRenderState({\n            renderState: renderState,\n            instantSearchInstance: instantSearchInstance,\n            parent: _this3\n          });\n        }\n      });\n      localWidgets.forEach(function (widget) {\n        process.env.NODE_ENV === 'development' ? warning( // if it has NO getWidgetState or if it has getWidgetUiState, we don't warn\n        // aka we warn if there's _only_ getWidgetState\n        !widget.getWidgetState || Boolean(widget.getWidgetUiState), 'The `getWidgetState` method is renamed `getWidgetUiState` and will no longer exist under that name in InstantSearch.js 5.x. Please use `getWidgetUiState` instead.') : void 0;\n\n        if (widget.init) {\n          widget.init(createInitArgs(instantSearchInstance, _this3, uiState));\n        }\n      }); // Subscribe to the Helper state changes for the `uiState` once widgets\n      // are initialized. Until the first render, state changes are part of the\n      // configuration step. This is mainly for backward compatibility with custom\n      // widgets. When the subscription happens before the `init` step, the (static)\n      // configuration of the widget is pushed in the URL. That's what we want to avoid.\n      // https://github.com/algolia/instantsearch.js/pull/994/commits/4a672ae3fd78809e213de0368549ef12e9dc9454\n\n      helper.on('change', function (event) {\n        var state = event.state;\n        var _uiState = event._uiState;\n        localUiState = getLocalWidgetsUiState(localWidgets, {\n          searchParameters: state,\n          helper: helper\n        }, _uiState || {}); // We don't trigger an internal change when controlled because it\n        // becomes the responsibility of `setUiState`.\n\n        if (!instantSearchInstance.onStateChange) {\n          instantSearchInstance.onInternalStateChange();\n        }\n      });\n\n      if (indexInitialResults) {\n        // If there are initial results, we're not notified of the next results\n        // because we don't trigger an initial search. We therefore need to directly\n        // schedule a render that will render the results injected on the helper.\n        instantSearchInstance.scheduleRender();\n      }\n    },\n    render: function render(_ref5) {\n      var _this4 = this;\n\n      var instantSearchInstance = _ref5.instantSearchInstance;\n\n      if (!this.getResults()) {\n        return;\n      }\n\n      localWidgets.forEach(function (widget) {\n        if (widget.getRenderState) {\n          var renderState = widget.getRenderState(instantSearchInstance.renderState[_this4.getIndexId()] || {}, createRenderArgs(instantSearchInstance, _this4));\n          storeRenderState({\n            renderState: renderState,\n            instantSearchInstance: instantSearchInstance,\n            parent: _this4\n          });\n        }\n      });\n      localWidgets.forEach(function (widget) {\n        // At this point, all the variables used below are set. Both `helper`\n        // and `derivedHelper` have been created at the `init` step. The attribute\n        // `lastResults` might be `null` though. It's possible that a stalled render\n        // happens before the result e.g with a dynamically added index the request might\n        // be delayed. The render is triggered for the complete tree but some parts do\n        // not have results yet.\n        if (widget.render) {\n          widget.render(createRenderArgs(instantSearchInstance, _this4));\n        }\n      });\n    },\n    dispose: function dispose() {\n      var _this5 = this;\n\n      localWidgets.forEach(function (widget) {\n        if (widget.dispose) {\n          // The dispose function is always called once the instance is started\n          // (it's an effect of `removeWidgets`). The index is initialized and\n          // the Helper is available. We don't care about the return value of\n          // `dispose` because the index is removed. We can't call `removeWidgets`\n          // because we want to keep the widgets on the instance, to allow idempotent\n          // operations on `add` & `remove`.\n          widget.dispose({\n            helper: helper,\n            state: helper.state,\n            parent: _this5\n          });\n        }\n      });\n      localInstantSearchInstance = null;\n      localParent = null;\n      helper.removeAllListeners();\n      helper = null;\n      derivedHelper.detach();\n      derivedHelper = null;\n    },\n    getWidgetUiState: function getWidgetUiState(uiState) {\n      return localWidgets.filter(isIndexWidget).reduce(function (previousUiState, innerIndex) {\n        return innerIndex.getWidgetUiState(previousUiState);\n      }, _objectSpread(_objectSpread({}, uiState), {}, _defineProperty({}, indexId, _objectSpread(_objectSpread({}, uiState[indexId]), localUiState))));\n    },\n    getWidgetState: function getWidgetState(uiState) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'The `getWidgetState` method is renamed `getWidgetUiState` and will no longer exist under that name in InstantSearch.js 5.x. Please use `getWidgetUiState` instead.') : void 0;\n      return this.getWidgetUiState(uiState);\n    },\n    getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n      var uiState = _ref6.uiState;\n      return getLocalWidgetsSearchParameters(localWidgets, {\n        uiState: uiState,\n        initialSearchParameters: searchParameters\n      });\n    },\n    refreshUiState: function refreshUiState() {\n      localUiState = getLocalWidgetsUiState(localWidgets, {\n        searchParameters: this.getHelper().state,\n        helper: this.getHelper()\n      }, localUiState);\n    }\n  };\n};\n\nexport default index;\n\nfunction storeRenderState(_ref7) {\n  var renderState = _ref7.renderState,\n      instantSearchInstance = _ref7.instantSearchInstance,\n      parent = _ref7.parent;\n  var parentIndexName = parent ? parent.getIndexId() : instantSearchInstance.mainIndex.getIndexId();\n  instantSearchInstance.renderState = _objectSpread(_objectSpread({}, instantSearchInstance.renderState), {}, _defineProperty({}, parentIndexName, _objectSpread(_objectSpread({}, instantSearchInstance.renderState[parentIndexName]), renderState)));\n}","export default '4.49.1';","var NAMESPACE = 'ais';\nexport var component = function component(componentName) {\n  return function () {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        descendantName = _ref.descendantName,\n        modifierName = _ref.modifierName;\n\n    var descendent = descendantName ? \"-\".concat(descendantName) : '';\n    var modifier = modifierName ? \"--\".concat(modifierName) : '';\n    return \"\".concat(NAMESPACE, \"-\").concat(componentName).concat(descendent).concat(modifier);\n  };\n};","export function getPropertyByPath(object, path) {\n  var parts = Array.isArray(path) ? path : path.split('.');\n  return parts.reduce(function (current, key) {\n    return current && current[key];\n  }, object);\n}","/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/4.17.11-npm/escape.js\n */\n// Used to map characters to HTML entities.\nvar htmlEntities = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n}; // Used to match HTML entities and HTML characters.\n\nvar regexUnescapedHtml = /[&<>\"']/g;\nvar regexHasUnescapedHtml = RegExp(regexUnescapedHtml.source);\n/**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n */\n\nexport function escape(value) {\n  return value && regexHasUnescapedHtml.test(value) ? value.replace(regexUnescapedHtml, function (character) {\n    return htmlEntities[character];\n  }) : value;\n}\n/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/4.17.11-npm/unescape.js\n */\n// Used to map HTML entities to characters.\n\nvar htmlCharacters = {\n  '&amp;': '&',\n  '&lt;': '<',\n  '&gt;': '>',\n  '&quot;': '\"',\n  '&#39;': \"'\"\n}; // Used to match HTML entities and HTML characters.\n\nvar regexEscapedHtml = /&(amp|quot|lt|gt|#39);/g;\nvar regexHasEscapedHtml = RegExp(regexEscapedHtml.source);\n/**\n * Converts the HTML entities \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * characters.\n */\n\nexport function unescape(value) {\n  return value && regexHasEscapedHtml.test(value) ? value.replace(regexEscapedHtml, function (character) {\n    return htmlCharacters[character];\n  }) : value;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/master/isPlainObject.js\n */\nfunction getTag(value) {\n  if (value === null) {\n    return value === undefined ? '[object Undefined]' : '[object Null]';\n  }\n\n  return Object.prototype.toString.call(value);\n}\n\nfunction isObjectLike(value) {\n  return _typeof(value) === 'object' && value !== null;\n}\n/**\n * Checks if `value` is a plain object.\n *\n * A plain object is an object created by the `Object`\n * constructor or with a `[[Prototype]]` of `null`.\n */\n\n\nexport function isPlainObject(value) {\n  if (!isObjectLike(value) || getTag(value) !== '[object Object]') {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n\n  var proto = value;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(value) === proto;\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { escape } from \"./escape-html.js\";\nimport { isPlainObject } from \"./isPlainObject.js\";\nexport var TAG_PLACEHOLDER = {\n  highlightPreTag: '__ais-highlight__',\n  highlightPostTag: '__/ais-highlight__'\n};\nexport var TAG_REPLACEMENT = {\n  highlightPreTag: '<mark>',\n  highlightPostTag: '</mark>'\n};\n\nfunction replaceTagsAndEscape(value) {\n  return escape(value).replace(new RegExp(TAG_PLACEHOLDER.highlightPreTag, 'g'), TAG_REPLACEMENT.highlightPreTag).replace(new RegExp(TAG_PLACEHOLDER.highlightPostTag, 'g'), TAG_REPLACEMENT.highlightPostTag);\n}\n\nfunction recursiveEscape(input) {\n  if (isPlainObject(input) && typeof input.value !== 'string') {\n    return Object.keys(input).reduce(function (acc, key) {\n      return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, recursiveEscape(input[key])));\n    }, {});\n  }\n\n  if (Array.isArray(input)) {\n    return input.map(recursiveEscape);\n  }\n\n  return _objectSpread(_objectSpread({}, input), {}, {\n    value: replaceTagsAndEscape(input.value)\n  });\n}\n\nexport function escapeHits(hits) {\n  if (hits.__escaped === undefined) {\n    // We don't override the value on hit because it will mutate the raw results\n    // instead we make a shallow copy and we assign the escaped values on it.\n    hits = hits.map(function (_ref) {\n      var hit = _extends({}, _ref);\n\n      if (hit._highlightResult) {\n        hit._highlightResult = recursiveEscape(hit._highlightResult);\n      }\n\n      if (hit._snippetResult) {\n        hit._snippetResult = recursiveEscape(hit._snippetResult);\n      }\n\n      return hit;\n    });\n    hits.__escaped = true;\n  }\n\n  return hits;\n}\nexport function escapeFacets(facetHits) {\n  return facetHits.map(function (h) {\n    return _objectSpread(_objectSpread({}, h), {}, {\n      highlighted: replaceTagsAndEscape(h.highlighted)\n    });\n  });\n}","import { component } from \"../lib/suit.js\";\nimport { getPropertyByPath, TAG_REPLACEMENT, warning } from \"../lib/utils/index.js\";\nvar suit = component('Highlight');\nexport default function highlight(_ref) {\n  var attribute = _ref.attribute,\n      _ref$highlightedTagNa = _ref.highlightedTagName,\n      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n      hit = _ref.hit,\n      _ref$cssClasses = _ref.cssClasses,\n      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var highlightAttributeResult = getPropertyByPath(hit._highlightResult, attribute); // @MAJOR fallback to attribute value if highlight is not found\n\n  process.env.NODE_ENV === 'development' ? warning(highlightAttributeResult, \"Could not enable highlight for \\\"\".concat(attribute, \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is either searchable or specified in `attributesToHighlight`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n\n  var _ref2 = highlightAttributeResult || {},\n      _ref2$value = _ref2.value,\n      attributeValue = _ref2$value === void 0 ? '' : _ref2$value; // cx is not used, since it would be bundled as a dependency for Vue & Angular\n\n\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  return attributeValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","export function serializePayload(payload) {\n  return btoa(encodeURIComponent(JSON.stringify(payload)));\n}\nexport function deserializePayload(serialized) {\n  return JSON.parse(decodeURIComponent(atob(serialized)));\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { warning, serializePayload, deserializePayload } from \"../lib/utils/index.js\";\nexport function readDataAttributes(domElement) {\n  var method = domElement.getAttribute('data-insights-method');\n  var serializedPayload = domElement.getAttribute('data-insights-payload');\n\n  if (typeof serializedPayload !== 'string') {\n    throw new Error('The insights helper expects `data-insights-payload` to be a base64-encoded JSON string.');\n  }\n\n  try {\n    var payload = deserializePayload(serializedPayload);\n    return {\n      method: method,\n      payload: payload\n    };\n  } catch (error) {\n    throw new Error('The insights helper was unable to parse `data-insights-payload`.');\n  }\n}\nexport function hasDataAttributes(domElement) {\n  return domElement.hasAttribute('data-insights-method');\n}\nexport function writeDataAttributes(_ref) {\n  var method = _ref.method,\n      payload = _ref.payload;\n\n  if (_typeof(payload) !== 'object') {\n    throw new Error(\"The insights helper expects the payload to be an object.\");\n  }\n\n  var serializedPayload;\n\n  try {\n    serializedPayload = serializePayload(payload);\n  } catch (error) {\n    throw new Error(\"Could not JSON serialize the payload object.\");\n  }\n\n  return \"data-insights-method=\\\"\".concat(method, \"\\\" data-insights-payload=\\\"\").concat(serializedPayload, \"\\\"\");\n}\n/**\n * @deprecated This function will be still supported in 4.x releases, but not further. It is replaced by the `insights` middleware. For more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\n */\n\nexport default function insights(method, payload) {\n  process.env.NODE_ENV === 'development' ? warning(false, \"`insights` function has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\\n\\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\") : void 0;\n  return writeDataAttributes({\n    method: method,\n    payload: payload\n  });\n}","import { TAG_REPLACEMENT } from \"./escape-highlight.js\";\nexport function concatHighlightedParts(parts) {\n  var highlightPreTag = TAG_REPLACEMENT.highlightPreTag,\n      highlightPostTag = TAG_REPLACEMENT.highlightPostTag;\n  return parts.map(function (part) {\n    return part.isHighlighted ? highlightPreTag + part.value + highlightPostTag : part.value;\n  }).join('');\n}","import { TAG_REPLACEMENT } from \"./escape-highlight.js\";\nexport function getHighlightedParts(highlightedValue) {\n  var highlightPostTag = TAG_REPLACEMENT.highlightPostTag,\n      highlightPreTag = TAG_REPLACEMENT.highlightPreTag;\n  var splitByPreTag = highlightedValue.split(highlightPreTag);\n  var firstValue = splitByPreTag.shift();\n  var elements = !firstValue ? [] : [{\n    value: firstValue,\n    isHighlighted: false\n  }];\n  splitByPreTag.forEach(function (split) {\n    var splitByPostTag = split.split(highlightPostTag);\n    elements.push({\n      value: splitByPostTag[0],\n      isHighlighted: true\n    });\n\n    if (splitByPostTag[1] !== '') {\n      elements.push({\n        value: splitByPostTag[1],\n        isHighlighted: false\n      });\n    }\n  });\n  return elements;\n}","import { unescape } from \"./escape-html.js\";\nvar hasAlphanumeric = new RegExp(/\\w/i);\nexport function getHighlightFromSiblings(parts, i) {\n  var _parts, _parts2;\n\n  var current = parts[i];\n  var isNextHighlighted = ((_parts = parts[i + 1]) === null || _parts === void 0 ? void 0 : _parts.isHighlighted) || true;\n  var isPreviousHighlighted = ((_parts2 = parts[i - 1]) === null || _parts2 === void 0 ? void 0 : _parts2.isHighlighted) || true;\n\n  if (!hasAlphanumeric.test(unescape(current.value)) && isPreviousHighlighted === isNextHighlighted) {\n    return isPreviousHighlighted;\n  }\n\n  return current.isHighlighted;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { getHighlightFromSiblings } from \"./getHighlightFromSiblings.js\";\nexport function reverseHighlightedParts(parts) {\n  if (!parts.some(function (part) {\n    return part.isHighlighted;\n  })) {\n    return parts.map(function (part) {\n      return _objectSpread(_objectSpread({}, part), {}, {\n        isHighlighted: false\n      });\n    });\n  }\n\n  return parts.map(function (part, i) {\n    return _objectSpread(_objectSpread({}, part), {}, {\n      isHighlighted: !getHighlightFromSiblings(parts, i)\n    });\n  });\n}","import { TAG_REPLACEMENT, getPropertyByPath, getHighlightedParts, reverseHighlightedParts, concatHighlightedParts, warning } from \"../lib/utils/index.js\";\nimport { component } from \"../lib/suit.js\";\nvar suit = component('ReverseHighlight');\nexport default function reverseHighlight(_ref) {\n  var attribute = _ref.attribute,\n      _ref$highlightedTagNa = _ref.highlightedTagName,\n      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n      hit = _ref.hit,\n      _ref$cssClasses = _ref.cssClasses,\n      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var highlightAttributeResult = getPropertyByPath(hit._highlightResult, attribute); // @MAJOR fallback to attribute value if highlight is not found\n\n  process.env.NODE_ENV === 'development' ? warning(highlightAttributeResult, \"Could not enable reverse highlight for \\\"\".concat(attribute, \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is either searchable or specified in `attributesToHighlight`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n\n  var _ref2 = highlightAttributeResult || {},\n      _ref2$value = _ref2.value,\n      attributeValue = _ref2$value === void 0 ? '' : _ref2$value; // cx is not used, since it would be bundled as a dependency for Vue & Angular\n\n\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  var reverseHighlightedValue = concatHighlightedParts(reverseHighlightedParts(getHighlightedParts(attributeValue)));\n  return reverseHighlightedValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","import { TAG_REPLACEMENT, getPropertyByPath, getHighlightedParts, reverseHighlightedParts, concatHighlightedParts, warning } from \"../lib/utils/index.js\";\nimport { component } from \"../lib/suit.js\";\nvar suit = component('ReverseSnippet');\nexport default function reverseSnippet(_ref) {\n  var attribute = _ref.attribute,\n      _ref$highlightedTagNa = _ref.highlightedTagName,\n      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n      hit = _ref.hit,\n      _ref$cssClasses = _ref.cssClasses,\n      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var snippetAttributeResult = getPropertyByPath(hit._snippetResult, attribute); // @MAJOR fallback to attribute value if snippet is not found\n\n  process.env.NODE_ENV === 'development' ? warning(snippetAttributeResult, \"Could not enable reverse snippet for \\\"\".concat(attribute, \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is specified in `attributesToSnippet`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n\n  var _ref2 = snippetAttributeResult || {},\n      _ref2$value = _ref2.value,\n      attributeValue = _ref2$value === void 0 ? '' : _ref2$value; // cx is not used, since it would be bundled as a dependency for Vue & Angular\n\n\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  var reverseHighlightedValue = concatHighlightedParts(reverseHighlightedParts(getHighlightedParts(attributeValue)));\n  return reverseHighlightedValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","import { component } from \"../lib/suit.js\";\nimport { TAG_REPLACEMENT, getPropertyByPath, warning } from \"../lib/utils/index.js\";\nvar suit = component('Snippet');\nexport default function snippet(_ref) {\n  var attribute = _ref.attribute,\n      _ref$highlightedTagNa = _ref.highlightedTagName,\n      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n      hit = _ref.hit,\n      _ref$cssClasses = _ref.cssClasses,\n      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var snippetAttributeResult = getPropertyByPath(hit._snippetResult, attribute); // @MAJOR fallback to attribute value if snippet is not found\n\n  process.env.NODE_ENV === 'development' ? warning(snippetAttributeResult, \"Could not enable snippet for \\\"\".concat(attribute, \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is specified in `attributesToSnippet`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n\n  var _ref2 = snippetAttributeResult || {},\n      _ref2$value = _ref2.value,\n      attributeValue = _ref2$value === void 0 ? '' : _ref2$value; // cx is not used, since it would be bundled as a dependency for Vue & Angular\n\n\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  return attributeValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","export function formatNumber(value, numberLocale) {\n  return value.toLocaleString(numberLocale);\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { highlight as _highlight, reverseHighlight as _reverseHighlight, snippet as _snippet, reverseSnippet as _reverseSnippet, insights as _insights } from \"../helpers/index.js\";\nimport { formatNumber as _formatNumber } from \"./formatNumber.js\";\nexport default function hoganHelpers(_ref) {\n  var numberLocale = _ref.numberLocale;\n  return {\n    formatNumber: function formatNumber(value, render) {\n      return _formatNumber(Number(render(value)), numberLocale);\n    },\n    highlight: function highlight(options, render) {\n      try {\n        var highlightOptions = JSON.parse(options);\n        return render(_highlight(_objectSpread(_objectSpread({}, highlightOptions), {}, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\nThe highlight helper expects a JSON object of the format:\\n{ \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    reverseHighlight: function reverseHighlight(options, render) {\n      try {\n        var reverseHighlightOptions = JSON.parse(options);\n        return render(_reverseHighlight(_objectSpread(_objectSpread({}, reverseHighlightOptions), {}, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\n  The reverseHighlight helper expects a JSON object of the format:\\n  { \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    snippet: function snippet(options, render) {\n      try {\n        var snippetOptions = JSON.parse(options);\n        return render(_snippet(_objectSpread(_objectSpread({}, snippetOptions), {}, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\nThe snippet helper expects a JSON object of the format:\\n{ \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    reverseSnippet: function reverseSnippet(options, render) {\n      try {\n        var reverseSnippetOptions = JSON.parse(options);\n        return render(_reverseSnippet(_objectSpread(_objectSpread({}, reverseSnippetOptions), {}, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\n  The reverseSnippet helper expects a JSON object of the format:\\n  { \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    insights: function insights(options, render) {\n      try {\n        var _JSON$parse = JSON.parse(options),\n            method = _JSON$parse.method,\n            payload = _JSON$parse.payload;\n\n        return render(_insights(method, _objectSpread({\n          objectIDs: [this.objectID]\n        }, payload)));\n      } catch (error) {\n        throw new Error(\"\\nThe insights helper expects a JSON object of the format:\\n{ \\\"method\\\": \\\"method-name\\\", \\\"payload\\\": { \\\"eventName\\\": \\\"name of the event\\\" } }\");\n      }\n    }\n  };\n}","var nextMicroTask = Promise.resolve();\nexport function defer(callback) {\n  var progress = null;\n  var cancelled = false;\n\n  var fn = function fn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (progress !== null) {\n      return;\n    }\n\n    progress = nextMicroTask.then(function () {\n      progress = null;\n\n      if (cancelled) {\n        cancelled = false;\n        return;\n      }\n\n      callback.apply(void 0, args);\n    });\n  };\n\n  fn.wait = function () {\n    if (progress === null) {\n      throw new Error('The deferred function should be called before calling `wait()`');\n    }\n\n    return progress;\n  };\n\n  fn.cancel = function () {\n    if (progress === null) {\n      return;\n    }\n\n    cancelled = true;\n  };\n\n  return fn;\n}","export function noop() {}","import { isIndexWidget } from \"./isIndexWidget.js\";\nimport { checkIndexUiState } from \"./checkIndexUiState.js\";\nexport function setIndexHelperState(finalUiState, indexWidget) {\n  var nextIndexUiState = finalUiState[indexWidget.getIndexId()] || {};\n\n  if (process.env.NODE_ENV === 'development') {\n    checkIndexUiState({\n      index: indexWidget,\n      indexUiState: nextIndexUiState\n    });\n  }\n\n  indexWidget.getHelper().setState(indexWidget.getWidgetSearchParameters(indexWidget.getHelper().state, {\n    uiState: nextIndexUiState\n  }));\n  indexWidget.getWidgets().filter(isIndexWidget).forEach(function (widget) {\n    return setIndexHelperState(finalUiState, widget);\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction getIndexStateWithoutConfigure(uiState) {\n  var configure = uiState.configure,\n      trackedUiState = _objectWithoutProperties(uiState, [\"configure\"]);\n\n  return trackedUiState;\n} // technically a URL could contain any key, since users provide it,\n// which is why the input to this function is UiState, not something\n// which excludes \"configure\" as this function does.\n\n\nexport default function simpleStateMapping() {\n  return {\n    stateToRoute: function stateToRoute(uiState) {\n      return Object.keys(uiState).reduce(function (state, indexId) {\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, indexId, getIndexStateWithoutConfigure(uiState[indexId])));\n      }, {});\n    },\n    routeToState: function routeToState() {\n      var routeState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return Object.keys(routeState).reduce(function (state, indexId) {\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, indexId, getIndexStateWithoutConfigure(routeState[indexId])));\n      }, {});\n    }\n  };\n}","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = {\n    'default': Format.RFC3986,\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return String(value);\n        }\n    },\n    RFC1738: Format.RFC1738,\n    RFC3986: Format.RFC3986\n};\n","'use strict';\n\nvar formats = require('./formats');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset, kind, format) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n            || (format === formats.RFC1738 && (c === 0x28 || c === 0x29)) // ( )\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        /* eslint operator-linebreak: [2, \"before\"] */\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar split = String.prototype.split;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    format,\n    formatter,\n    encodeValuesOnly,\n    charset\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = utils.maybeMap(obj, function (value) {\n            if (value instanceof Date) {\n                return serializeDate(value);\n            }\n            return value;\n        });\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key', format) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key', format);\n            if (generateArrayPrefix === 'comma' && encodeValuesOnly) {\n                var valuesArray = split.call(String(obj), ',');\n                var valuesJoined = '';\n                for (var i = 0; i < valuesArray.length; ++i) {\n                    valuesJoined += (i === 0 ? '' : ',') + formatter(encoder(valuesArray[i], defaults.encoder, charset, 'value', format));\n                }\n                return [formatter(keyValue) + '=' + valuesJoined];\n            }\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value', format))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        // we need to join elements in\n        objKeys = [{ value: obj.length > 0 ? obj.join(',') || null : void undefined }];\n    } else if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var j = 0; j < objKeys.length; ++j) {\n        var key = objKeys[j];\n        var value = typeof key === 'object' && typeof key.value !== 'undefined' ? key.value : obj[key];\n\n        if (skipNulls && value === null) {\n            continue;\n        }\n\n        var keyPrefix = isArray(obj)\n            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix\n            : prefix + (allowDots ? '.' + key : '[' + key + ']');\n\n        pushToArray(values, stringify(\n            value,\n            keyPrefix,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encoder,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            format,\n            formatter,\n            encodeValuesOnly,\n            charset\n        ));\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && typeof opts.encoder !== 'undefined' && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        format: format,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.format,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('✓')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\n// This is what browsers will submit when the ✓ character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the ✓ character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = utils.maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else if (cleanRoot !== '__proto__') {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","// eslint-disable-next-line no-restricted-globals\n\n/**\n * Runs code on browser environments safely.\n */\nexport function safelyRunOnBrowser(callback) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    fallback: function fallback() {\n      return undefined;\n    }\n  },\n      fallback = _ref.fallback;\n\n  // eslint-disable-next-line no-restricted-globals\n  if (typeof window === 'undefined') {\n    return fallback();\n  } // eslint-disable-next-line no-restricted-globals\n\n\n  return callback({\n    window: window\n  });\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport qs from 'qs';\nimport { safelyRunOnBrowser } from \"../utils/index.js\";\n\nvar setWindowTitle = function setWindowTitle(title) {\n  if (title) {\n    // This function is only executed on browsers so we can disable this check.\n    // eslint-disable-next-line no-restricted-globals\n    window.document.title = title;\n  }\n};\n\nvar BrowserHistory = /*#__PURE__*/function () {\n  /**\n   * Initializes a new storage provider that syncs the search state to the URL\n   * using web APIs (`window.location.pushState` and `onpopstate` event).\n   */\n  function BrowserHistory(_ref) {\n    var _this = this;\n\n    var windowTitle = _ref.windowTitle,\n        _ref$writeDelay = _ref.writeDelay,\n        writeDelay = _ref$writeDelay === void 0 ? 400 : _ref$writeDelay,\n        createURL = _ref.createURL,\n        parseURL = _ref.parseURL,\n        getLocation = _ref.getLocation;\n\n    _classCallCheck(this, BrowserHistory);\n\n    _defineProperty(this, \"windowTitle\", void 0);\n\n    _defineProperty(this, \"writeDelay\", void 0);\n\n    _defineProperty(this, \"_createURL\", void 0);\n\n    _defineProperty(this, \"parseURL\", void 0);\n\n    _defineProperty(this, \"getLocation\", void 0);\n\n    _defineProperty(this, \"writeTimer\", void 0);\n\n    _defineProperty(this, \"inPopState\", false);\n\n    _defineProperty(this, \"isDisposed\", false);\n\n    _defineProperty(this, \"latestAcknowledgedHistory\", 0);\n\n    this.windowTitle = windowTitle;\n    this.writeTimer = undefined;\n    this.writeDelay = writeDelay;\n    this._createURL = createURL;\n    this.parseURL = parseURL;\n    this.getLocation = getLocation;\n    safelyRunOnBrowser(function (_ref2) {\n      var window = _ref2.window;\n\n      var title = _this.windowTitle && _this.windowTitle(_this.read());\n\n      setWindowTitle(title);\n      _this.latestAcknowledgedHistory = window.history.length;\n    });\n  }\n  /**\n   * Reads the URL and returns a syncable UI search state.\n   */\n\n\n  _createClass(BrowserHistory, [{\n    key: \"read\",\n    value: function read() {\n      return this.parseURL({\n        qsModule: qs,\n        location: this.getLocation()\n      });\n    }\n    /**\n     * Pushes a search state into the URL.\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(routeState) {\n      var _this2 = this;\n\n      safelyRunOnBrowser(function (_ref3) {\n        var window = _ref3.window;\n\n        var url = _this2.createURL(routeState);\n\n        var title = _this2.windowTitle && _this2.windowTitle(routeState);\n\n        if (_this2.writeTimer) {\n          clearTimeout(_this2.writeTimer);\n        }\n\n        _this2.writeTimer = setTimeout(function () {\n          setWindowTitle(title);\n\n          if (_this2.shouldWrite(url)) {\n            window.history.pushState(routeState, title || '', url);\n            _this2.latestAcknowledgedHistory = window.history.length;\n          }\n\n          _this2.inPopState = false;\n          _this2.writeTimer = undefined;\n        }, _this2.writeDelay);\n      });\n    }\n    /**\n     * Sets a callback on the `onpopstate` event of the history API of the current page.\n     * It enables the URL sync to keep track of the changes.\n     */\n\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(callback) {\n      var _this3 = this;\n\n      this._onPopState = function (event) {\n        if (_this3.writeTimer) {\n          clearTimeout(_this3.writeTimer);\n          _this3.writeTimer = undefined;\n        }\n\n        _this3.inPopState = true;\n        var routeState = event.state; // At initial load, the state is read from the URL without update.\n        // Therefore the state object is not available.\n        // In this case, we fallback and read the URL.\n\n        if (!routeState) {\n          callback(_this3.read());\n        } else {\n          callback(routeState);\n        }\n      };\n\n      safelyRunOnBrowser(function (_ref4) {\n        var window = _ref4.window;\n        window.addEventListener('popstate', _this3._onPopState);\n      });\n    }\n    /**\n     * Creates a complete URL from a given syncable UI state.\n     *\n     * It always generates the full URL, not a relative one.\n     * This allows to handle cases like using a <base href>.\n     * See: https://github.com/algolia/instantsearch.js/issues/790\n     */\n\n  }, {\n    key: \"createURL\",\n    value: function createURL(routeState) {\n      return this._createURL({\n        qsModule: qs,\n        routeState: routeState,\n        location: this.getLocation()\n      });\n    }\n    /**\n     * Removes the event listener and cleans up the URL.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var _this4 = this;\n\n      this.isDisposed = true;\n      safelyRunOnBrowser(function (_ref5) {\n        var window = _ref5.window;\n\n        if (_this4._onPopState) {\n          window.removeEventListener('popstate', _this4._onPopState);\n        }\n      });\n\n      if (this.writeTimer) {\n        clearTimeout(this.writeTimer);\n      }\n\n      this.write({});\n    }\n  }, {\n    key: \"shouldWrite\",\n    value: function shouldWrite(url) {\n      var _this5 = this;\n\n      return safelyRunOnBrowser(function (_ref6) {\n        var window = _ref6.window;\n        // We do want to `pushState` if:\n        // - the router is not disposed, IS.js needs to update the URL\n        // OR\n        // - the last write was from InstantSearch.js\n        // (unlike a SPA, where it would have last written)\n        var lastPushWasByISAfterDispose = !(_this5.isDisposed && _this5.latestAcknowledgedHistory !== window.history.length);\n        return (// When the last state change was through popstate, the IS.js state changes,\n          // but that should not write the URL.\n          !_this5.inPopState && // When the previous pushState after dispose was by IS.js, we want to write the URL.\n          lastPushWasByISAfterDispose && // When the URL is the same as the current one, we do not want to write it.\n          url !== window.location.href\n        );\n      });\n    }\n  }]);\n\n  return BrowserHistory;\n}();\n\nexport default function historyRouter() {\n  var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref7$createURL = _ref7.createURL,\n      createURL = _ref7$createURL === void 0 ? function (_ref8) {\n    var qsModule = _ref8.qsModule,\n        routeState = _ref8.routeState,\n        location = _ref8.location;\n    var protocol = location.protocol,\n        hostname = location.hostname,\n        _location$port = location.port,\n        port = _location$port === void 0 ? '' : _location$port,\n        pathname = location.pathname,\n        hash = location.hash;\n    var queryString = qsModule.stringify(routeState);\n    var portWithPrefix = port === '' ? '' : \":\".concat(port); // IE <= 11 has no proper `location.origin` so we cannot rely on it.\n\n    // IE <= 11 has no proper `location.origin` so we cannot rely on it.\n    if (!queryString) {\n      return \"\".concat(protocol, \"//\").concat(hostname).concat(portWithPrefix).concat(pathname).concat(hash);\n    }\n\n    return \"\".concat(protocol, \"//\").concat(hostname).concat(portWithPrefix).concat(pathname, \"?\").concat(queryString).concat(hash);\n  } : _ref7$createURL,\n      _ref7$parseURL = _ref7.parseURL,\n      parseURL = _ref7$parseURL === void 0 ? function (_ref9) {\n    var qsModule = _ref9.qsModule,\n        location = _ref9.location;\n    // `qs` by default converts arrays with more than 20 items to an object.\n    // We want to avoid this because the data structure manipulated can therefore vary.\n    // Setting the limit to `100` seems a good number because the engine's default is 100\n    // (it can go up to 1000 but it is very unlikely to select more than 100 items in the UI).\n    //\n    // Using an `arrayLimit` of `n` allows `n + 1` items.\n    //\n    // See:\n    //   - https://github.com/ljharb/qs#parsing-arrays\n    //   - https://www.algolia.com/doc/api-reference/api-parameters/maxValuesPerFacet/\n    return qsModule.parse(location.search.slice(1), {\n      arrayLimit: 99\n    });\n  } : _ref7$parseURL,\n      _ref7$writeDelay = _ref7.writeDelay,\n      writeDelay = _ref7$writeDelay === void 0 ? 400 : _ref7$writeDelay,\n      windowTitle = _ref7.windowTitle,\n      _ref7$getLocation = _ref7.getLocation,\n      getLocation = _ref7$getLocation === void 0 ? function () {\n    return safelyRunOnBrowser(function (_ref10) {\n      var window = _ref10.window;\n      return window.location;\n    }, {\n      fallback: function fallback() {\n        throw new Error('You need to provide `getLocation` to the `history` router in environments where `window` does not exist.');\n      }\n    });\n  } : _ref7$getLocation;\n\n  return new BrowserHistory({\n    createURL: createURL,\n    parseURL: parseURL,\n    writeDelay: writeDelay,\n    windowTitle: windowTitle,\n    getLocation: getLocation\n  });\n}","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","function isPrimitive(obj) {\n  return obj !== Object(obj);\n}\n\nexport function isEqual(first, second) {\n  if (first === second) {\n    return true;\n  }\n\n  if (isPrimitive(first) || isPrimitive(second) || typeof first === 'function' || typeof second === 'function') {\n    return first === second;\n  }\n\n  if (Object.keys(first).length !== Object.keys(second).length) {\n    return false;\n  }\n\n  for (var _i = 0, _Object$keys = Object.keys(first); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n\n    if (!(key in second)) {\n      return false;\n    }\n\n    if (!isEqual(first[key], second[key])) {\n      return false;\n    }\n  }\n\n  return true;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport simpleStateMapping from \"../lib/stateMappings/simple.js\";\nimport historyRouter from \"../lib/routers/history.js\";\nimport { isEqual } from \"../lib/utils/index.js\";\nexport var createRouterMiddleware = function createRouterMiddleware() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _props$router = props.router,\n      router = _props$router === void 0 ? historyRouter() : _props$router,\n      _props$stateMapping = props.stateMapping,\n      stateMapping = _props$stateMapping === void 0 ? simpleStateMapping() : _props$stateMapping;\n  return function (_ref) {\n    var instantSearchInstance = _ref.instantSearchInstance;\n\n    function topLevelCreateURL(nextState) {\n      var uiState = Object.keys(nextState).reduce(function (acc, indexId) {\n        return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, indexId, nextState[indexId]));\n      }, instantSearchInstance.mainIndex.getWidgetUiState({}));\n      var route = stateMapping.stateToRoute(uiState);\n      return router.createURL(route);\n    } // casting to UiState here to keep createURL unaware of custom UiState\n    // (as long as it's an object, it's ok)\n\n\n    instantSearchInstance._createURL = topLevelCreateURL;\n    var lastRouteState = undefined;\n    var initialUiState = instantSearchInstance._initialUiState;\n    return {\n      onStateChange: function onStateChange(_ref2) {\n        var uiState = _ref2.uiState;\n        var routeState = stateMapping.stateToRoute(uiState);\n\n        if (lastRouteState === undefined || !isEqual(lastRouteState, routeState)) {\n          router.write(routeState);\n          lastRouteState = routeState;\n        }\n      },\n      subscribe: function subscribe() {\n        instantSearchInstance._initialUiState = _objectSpread(_objectSpread({}, initialUiState), stateMapping.routeToState(router.read()));\n        router.onUpdate(function (route) {\n          instantSearchInstance.setUiState(stateMapping.routeToState(route));\n        });\n      },\n      started: function started() {},\n      unsubscribe: function unsubscribe() {\n        router.dispose();\n      }\n    };\n  };\n};","import { createInitArgs, safelyRunOnBrowser } from \"../lib/utils/index.js\";\n\nfunction extractPayload(widgets, instantSearchInstance, payload) {\n  var initOptions = createInitArgs(instantSearchInstance, instantSearchInstance.mainIndex, instantSearchInstance._initialUiState);\n  widgets.forEach(function (widget) {\n    var widgetParams = {};\n\n    if (widget.getWidgetRenderState) {\n      var renderState = widget.getWidgetRenderState(initOptions);\n\n      if (renderState && renderState.widgetParams) {\n        // casting, as we just earlier checked widgetParams exists, and thus an object\n        widgetParams = renderState.widgetParams;\n      }\n    } // since we destructure in all widgets, the parameters with defaults are set to \"undefined\"\n\n\n    var params = Object.keys(widgetParams).filter(function (key) {\n      return widgetParams[key] !== undefined;\n    });\n    payload.widgets.push({\n      type: widget.$$type,\n      widgetType: widget.$$widgetType,\n      params: params\n    });\n\n    if (widget.$$type === 'ais.index') {\n      extractPayload(widget.getWidgets(), instantSearchInstance, payload);\n    }\n  });\n}\n\nexport function isMetadataEnabled() {\n  return safelyRunOnBrowser(function (_ref) {\n    var _window$navigator, _window$navigator$use;\n\n    var window = _ref.window;\n    return ((_window$navigator = window.navigator) === null || _window$navigator === void 0 ? void 0 : (_window$navigator$use = _window$navigator.userAgent) === null || _window$navigator$use === void 0 ? void 0 : _window$navigator$use.indexOf('Algolia Crawler')) > -1;\n  }, {\n    fallback: function fallback() {\n      return false;\n    }\n  });\n}\n/**\n * Exposes the metadata of mounted widgets in a custom\n * `<meta name=\"instantsearch:widgets\" />` tag. The metadata per widget is:\n * - applied parameters\n * - widget name\n * - connector name\n */\n\nexport function createMetadataMiddleware() {\n  return function (_ref2) {\n    var instantSearchInstance = _ref2.instantSearchInstance;\n    var payload = {\n      widgets: []\n    };\n    var payloadContainer = document.createElement('meta');\n    var refNode = document.querySelector('head');\n    payloadContainer.name = 'instantsearch:widgets';\n    return {\n      onStateChange: function onStateChange() {},\n      subscribe: function subscribe() {\n        // using setTimeout here to delay extraction until widgets have been added in a tick (e.g. Vue)\n        setTimeout(function () {\n          var client = instantSearchInstance.client;\n          payload.ua = client.transporter && client.transporter.userAgent ? client.transporter.userAgent.value : client._ua;\n          extractPayload(instantSearchInstance.mainIndex.getWidgets(), instantSearchInstance, payload);\n          payloadContainer.content = JSON.stringify(payload);\n          refNode.appendChild(payloadContainer);\n        }, 0);\n      },\n      started: function started() {},\n      unsubscribe: function unsubscribe() {\n        payloadContainer.remove();\n      }\n    };\n  };\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport EventEmitter from '@algolia/events';\nimport index from \"../widgets/index/index.js\";\nimport version from \"./version.js\";\nimport createHelpers from \"./createHelpers.js\";\nimport { createDocumentationMessageGenerator, createDocumentationLink, defer, noop, warning, setIndexHelperState } from \"./utils/index.js\";\nimport { createRouterMiddleware } from \"../middlewares/createRouterMiddleware.js\";\nimport { createMetadataMiddleware, isMetadataEnabled } from \"../middlewares/createMetadataMiddleware.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'instantsearch'\n});\n\nfunction defaultCreateURL() {\n  return '#';\n} // this purposely breaks typescript's type inference to ensure it's not used\n// as it's used for a default parameter for example\n// source: https://github.com/Microsoft/TypeScript/issues/14829#issuecomment-504042546\n\n\n/**\n * The actual implementation of the InstantSearch. This is\n * created using the `instantsearch` factory function.\n * It emits the 'render' event every time a search is done\n */\nvar InstantSearch = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(InstantSearch, _EventEmitter);\n\n  var _super = _createSuper(InstantSearch);\n\n  function InstantSearch(options) {\n    var _this;\n\n    _classCallCheck(this, InstantSearch);\n\n    _this = _super.call(this); // prevent `render` event listening from causing a warning\n\n    _defineProperty(_assertThisInitialized(_this), \"client\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"indexName\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"insightsClient\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onStateChange\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"helper\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mainHelper\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mainIndex\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"started\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"templatesConfig\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"renderState\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"_stalledSearchDelay\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_searchStalledTimer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_initialUiState\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_initialResults\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_createURL\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_searchFunction\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mainHelperSearch\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"middleware\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"sendEventToInsights\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"status\", 'idle');\n\n    _defineProperty(_assertThisInitialized(_this), \"error\", undefined);\n\n    _defineProperty(_assertThisInitialized(_this), \"scheduleSearch\", defer(function () {\n      if (_this.started) {\n        _this.mainHelper.search();\n      }\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"scheduleRender\", defer(function () {\n      var shouldResetStatus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (!_this.mainHelper.hasPendingRequests()) {\n        clearTimeout(_this._searchStalledTimer);\n        _this._searchStalledTimer = null;\n\n        if (shouldResetStatus) {\n          _this.status = 'idle';\n          _this.error = undefined;\n        }\n      }\n\n      _this.mainIndex.render({\n        instantSearchInstance: _assertThisInitialized(_this)\n      });\n\n      _this.emit('render');\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"onInternalStateChange\", defer(function () {\n      var nextUiState = _this.mainIndex.getWidgetUiState({});\n\n      _this.middleware.forEach(function (_ref) {\n        var instance = _ref.instance;\n        instance.onStateChange({\n          uiState: nextUiState\n        });\n      });\n    }));\n\n    _this.setMaxListeners(100);\n\n    var _options$indexName = options.indexName,\n        indexName = _options$indexName === void 0 ? null : _options$indexName,\n        numberLocale = options.numberLocale,\n        _options$initialUiSta = options.initialUiState,\n        initialUiState = _options$initialUiSta === void 0 ? {} : _options$initialUiSta,\n        _options$routing = options.routing,\n        routing = _options$routing === void 0 ? null : _options$routing,\n        searchFunction = options.searchFunction,\n        _options$stalledSearc = options.stalledSearchDelay,\n        stalledSearchDelay = _options$stalledSearc === void 0 ? 200 : _options$stalledSearc,\n        _options$searchClient = options.searchClient,\n        searchClient = _options$searchClient === void 0 ? null : _options$searchClient,\n        _options$insightsClie = options.insightsClient,\n        insightsClient = _options$insightsClie === void 0 ? null : _options$insightsClie,\n        _options$onStateChang = options.onStateChange,\n        onStateChange = _options$onStateChang === void 0 ? null : _options$onStateChang;\n\n    if (indexName === null) {\n      throw new Error(withUsage('The `indexName` option is required.'));\n    }\n\n    if (searchClient === null) {\n      throw new Error(withUsage('The `searchClient` option is required.'));\n    }\n\n    if (typeof searchClient.search !== 'function') {\n      throw new Error(\"The `searchClient` must implement a `search` method.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/\");\n    }\n\n    if (typeof searchClient.addAlgoliaAgent === 'function') {\n      searchClient.addAlgoliaAgent(\"instantsearch.js (\".concat(version, \")\"));\n    }\n\n    process.env.NODE_ENV === 'development' ? warning(insightsClient === null, \"`insightsClient` property has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\\n\\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\") : void 0;\n\n    if (insightsClient && typeof insightsClient !== 'function') {\n      throw new Error(withUsage('The `insightsClient` option should be a function.'));\n    }\n\n    process.env.NODE_ENV === 'development' ? warning(!options.searchParameters, \"The `searchParameters` option is deprecated and will not be supported in InstantSearch.js 4.x.\\n\\nYou can replace it with the `configure` widget:\\n\\n```\\nsearch.addWidgets([\\n  configure(\".concat(JSON.stringify(options.searchParameters, null, 2), \")\\n]);\\n```\\n\\nSee \").concat(createDocumentationLink({\n      name: 'configure'\n    }))) : void 0;\n    _this.client = searchClient;\n    _this.insightsClient = insightsClient;\n    _this.indexName = indexName;\n    _this.helper = null;\n    _this.mainHelper = null;\n    _this.mainIndex = index({\n      indexName: indexName\n    });\n    _this.onStateChange = onStateChange;\n    _this.started = false;\n    _this.templatesConfig = {\n      helpers: createHelpers({\n        numberLocale: numberLocale\n      }),\n      compileOptions: {}\n    };\n    _this._stalledSearchDelay = stalledSearchDelay;\n    _this._searchStalledTimer = null;\n    _this._createURL = defaultCreateURL;\n    _this._initialUiState = initialUiState;\n    _this._initialResults = null;\n\n    if (searchFunction) {\n      _this._searchFunction = searchFunction;\n    }\n\n    _this.sendEventToInsights = noop;\n\n    if (routing) {\n      var routerOptions = typeof routing === 'boolean' ? undefined : routing;\n\n      _this.use(createRouterMiddleware(routerOptions));\n    }\n\n    if (isMetadataEnabled()) {\n      _this.use(createMetadataMiddleware());\n    }\n\n    return _this;\n  }\n  /**\n   * Hooks a middleware into the InstantSearch lifecycle.\n   */\n\n\n  _createClass(InstantSearch, [{\n    key: \"_isSearchStalled\",\n    get:\n    /**\n     * The status of the search. Can be \"idle\", \"loading\", \"stalled\", or \"error\".\n     */\n\n    /**\n     * The last returned error from the Search API.\n     * The error gets cleared when the next valid search response is rendered.\n     */\n\n    /**\n     * @deprecated use `status === 'stalled'` instead\n     */\n    function get() {\n      process.env.NODE_ENV === 'development' ? warning(false, \"`InstantSearch._isSearchStalled` is deprecated and will be removed in InstantSearch.js 5.0.\\n\\nUse `InstantSearch.status === \\\"stalled\\\"` instead.\") : void 0;\n      return this.status === 'stalled';\n    }\n  }, {\n    key: \"use\",\n    value: function use() {\n      var _this2 = this;\n\n      for (var _len = arguments.length, middleware = new Array(_len), _key = 0; _key < _len; _key++) {\n        middleware[_key] = arguments[_key];\n      }\n\n      var newMiddlewareList = middleware.map(function (fn) {\n        var newMiddleware = _objectSpread({\n          subscribe: noop,\n          started: noop,\n          unsubscribe: noop,\n          onStateChange: noop\n        }, fn({\n          instantSearchInstance: _this2\n        }));\n\n        _this2.middleware.push({\n          creator: fn,\n          instance: newMiddleware\n        });\n\n        return newMiddleware;\n      }); // If the instance has already started, we directly subscribe the\n      // middleware so they're notified of changes.\n\n      if (this.started) {\n        newMiddlewareList.forEach(function (m) {\n          m.subscribe();\n          m.started();\n        });\n      }\n\n      return this;\n    }\n    /**\n     * Removes a middleware from the InstantSearch lifecycle.\n     */\n\n  }, {\n    key: \"unuse\",\n    value: function unuse() {\n      for (var _len2 = arguments.length, middlewareToUnuse = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        middlewareToUnuse[_key2] = arguments[_key2];\n      }\n\n      this.middleware.filter(function (m) {\n        return middlewareToUnuse.includes(m.creator);\n      }).forEach(function (m) {\n        return m.instance.unsubscribe();\n      });\n      this.middleware = this.middleware.filter(function (m) {\n        return !middlewareToUnuse.includes(m.creator);\n      });\n      return this;\n    } // @major we shipped with EXPERIMENTAL_use, but have changed that to just `use` now\n\n  }, {\n    key: \"EXPERIMENTAL_use\",\n    value: function EXPERIMENTAL_use() {\n      process.env.NODE_ENV === 'development' ? warning(false, 'The middleware API is now considered stable, so we recommend replacing `EXPERIMENTAL_use` with `use` before upgrading to the next major version.') : void 0;\n      return this.use.apply(this, arguments);\n    }\n    /**\n     * Adds a widget to the search instance.\n     * A widget can be added either before or after InstantSearch has started.\n     * @param widget The widget to add to InstantSearch.\n     *\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`.\n     */\n\n  }, {\n    key: \"addWidget\",\n    value: function addWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'addWidget will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`') : void 0;\n      return this.addWidgets([widget]);\n    }\n    /**\n     * Adds multiple widgets to the search instance.\n     * Widgets can be added either before or after InstantSearch has started.\n     * @param widgets The array of widgets to add to InstantSearch.\n     */\n\n  }, {\n    key: \"addWidgets\",\n    value: function addWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets. Please use `addWidget`.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n\n      this.mainIndex.addWidgets(widgets);\n      return this;\n    }\n    /**\n     * Removes a widget from the search instance.\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`\n     * @param widget The widget instance to remove from InstantSearch.\n     *\n     * The widget must implement a `dispose()` method to clear its state.\n     */\n\n  }, {\n    key: \"removeWidget\",\n    value: function removeWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'removeWidget will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`') : void 0;\n      return this.removeWidgets([widget]);\n    }\n    /**\n     * Removes multiple widgets from the search instance.\n     * @param widgets Array of widgets instances to remove from InstantSearch.\n     *\n     * The widgets must implement a `dispose()` method to clear their states.\n     */\n\n  }, {\n    key: \"removeWidgets\",\n    value: function removeWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets. Please use `removeWidget`.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n\n      this.mainIndex.removeWidgets(widgets);\n      return this;\n    }\n    /**\n     * Ends the initialization of InstantSearch.js and triggers the\n     * first search. This method should be called after all widgets have been added\n     * to the instance of InstantSearch.js. InstantSearch.js also supports adding and removing\n     * widgets after the start as an **EXPERIMENTAL** feature.\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this3 = this;\n\n      if (this.started) {\n        throw new Error(withUsage('The `start` method has already been called once.'));\n      } // This Helper is used for the queries, we don't care about its state. The\n      // states are managed at the `index` level. We use this Helper to create\n      // DerivedHelper scoped into the `index` widgets.\n      // In Vue InstantSearch' hydrate, a main helper gets set before start, so\n      // we need to respect this helper as a way to keep all listeners correct.\n\n\n      var mainHelper = this.mainHelper || algoliasearchHelper(this.client, this.indexName);\n\n      mainHelper.search = function () {\n        _this3.status = 'loading'; // @MAJOR: use scheduleRender here\n        // For now, widgets don't expect to be rendered at the start of `loading`,\n        // so it would be a breaking change to add an extra render. We don't have\n        // these guarantees about the render event, thus emitting it once more\n        // isn't a breaking change.\n\n        _this3.emit('render'); // This solution allows us to keep the exact same API for the users but\n        // under the hood, we have a different implementation. It should be\n        // completely transparent for the rest of the codebase. Only this module\n        // is impacted.\n\n\n        return mainHelper.searchOnlyWithDerivedHelpers();\n      };\n\n      if (this._searchFunction) {\n        // this client isn't used to actually search, but required for the helper\n        // to not throw errors\n        var fakeClient = {\n          search: function search() {\n            return new Promise(noop);\n          }\n        };\n        this._mainHelperSearch = mainHelper.search.bind(mainHelper);\n\n        mainHelper.search = function () {\n          var mainIndexHelper = _this3.mainIndex.getHelper();\n\n          var searchFunctionHelper = algoliasearchHelper(fakeClient, mainIndexHelper.state.index, mainIndexHelper.state);\n          searchFunctionHelper.once('search', function (_ref2) {\n            var state = _ref2.state;\n            mainIndexHelper.overrideStateWithoutTriggeringChangeEvent(state);\n\n            _this3._mainHelperSearch();\n          }); // Forward state changes from `searchFunctionHelper` to `mainIndexHelper`\n\n          searchFunctionHelper.on('change', function (_ref3) {\n            var state = _ref3.state;\n            mainIndexHelper.setState(state);\n          });\n\n          _this3._searchFunction(searchFunctionHelper);\n\n          return mainHelper;\n        };\n      } // Only the \"main\" Helper emits the `error` event vs the one for `search`\n      // and `results` that are also emitted on the derived one.\n\n\n      mainHelper.on('error', function (_ref4) {\n        var error = _ref4.error;\n\n        if (!(error instanceof Error)) {\n          // typescript lies here, error is in some cases { name: string, message: string }\n          var err = error;\n          error = Object.keys(err).reduce(function (acc, key) {\n            acc[key] = err[key];\n            return acc;\n          }, new Error(err.message));\n        } // If an error is emitted, it is re-thrown by events. In previous versions\n        // we emitted {error}, which is thrown as:\n        // \"Uncaught, unspecified \\\"error\\\" event. ([object Object])\"\n        // To avoid breaking changes, we make the error available in both\n        // `error` and `error.error`\n        // @MAJOR emit only error\n\n\n        error.error = error;\n        _this3.error = error;\n        _this3.status = 'error';\n\n        _this3.scheduleRender(false); // This needs to execute last because it throws the error.\n\n\n        _this3.emit('error', error);\n      });\n      this.mainHelper = mainHelper;\n      this.middleware.forEach(function (_ref5) {\n        var instance = _ref5.instance;\n        instance.subscribe();\n      });\n      this.mainIndex.init({\n        instantSearchInstance: this,\n        parent: null,\n        uiState: this._initialUiState\n      });\n\n      if (this._initialResults) {\n        var originalScheduleSearch = this.scheduleSearch; // We don't schedule a first search when initial results are provided\n        // because we already have the results to render. This skips the initial\n        // network request on the browser on `start`.\n\n        this.scheduleSearch = defer(noop); // We also skip the initial network request when widgets are dynamically\n        // added in the first tick (that's the case in all the framework-based flavors).\n        // When we add a widget to `index`, it calls `scheduleSearch`. We can rely\n        // on our `defer` util to restore the original `scheduleSearch` value once\n        // widgets are added to hook back to the regular lifecycle.\n\n        defer(function () {\n          _this3.scheduleSearch = originalScheduleSearch;\n        })();\n      } // We only schedule a search when widgets have been added before `start()`\n      // because there are listeners that can use these results.\n      // This is especially useful in framework-based flavors that wait for\n      // dynamically-added widgets to trigger a network request. It avoids\n      // having to batch this initial network request with the one coming from\n      // `addWidgets()`.\n      // Later, we could also skip `index()` widgets and widgets that don't read\n      // the results, but this is an optimization that has a very low impact for now.\n      else if (this.mainIndex.getWidgets().length > 0) {\n          this.scheduleSearch();\n        } // Keep the previous reference for legacy purpose, some pattern use\n      // the direct Helper access `search.helper` (e.g multi-index).\n\n\n      this.helper = this.mainIndex.getHelper(); // track we started the search if we add more widgets,\n      // to init them directly after add\n\n      this.started = true;\n      this.middleware.forEach(function (_ref6) {\n        var instance = _ref6.instance;\n        instance.started();\n      });\n    }\n    /**\n     * Removes all widgets without triggering a search afterwards. This is an **EXPERIMENTAL** feature,\n     * if you find an issue with it, please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20dispose).\n     * @return {undefined} This method does not return anything\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.scheduleSearch.cancel();\n      this.scheduleRender.cancel();\n      clearTimeout(this._searchStalledTimer);\n      this.removeWidgets(this.mainIndex.getWidgets());\n      this.mainIndex.dispose(); // You can not start an instance two times, therefore a disposed instance\n      // needs to set started as false otherwise this can not be restarted at a\n      // later point.\n\n      this.started = false; // The helper needs to be reset to perform the next search from a fresh state.\n      // If not reset, it would use the state stored before calling `dispose()`.\n\n      this.removeAllListeners();\n      this.mainHelper.removeAllListeners();\n      this.mainHelper = null;\n      this.helper = null;\n      this.middleware.forEach(function (_ref7) {\n        var instance = _ref7.instance;\n        instance.unsubscribe();\n      });\n    }\n  }, {\n    key: \"scheduleStalledRender\",\n    value: function scheduleStalledRender() {\n      var _this4 = this;\n\n      if (!this._searchStalledTimer) {\n        this._searchStalledTimer = setTimeout(function () {\n          _this4.status = 'stalled';\n\n          _this4.scheduleRender();\n        }, this._stalledSearchDelay);\n      }\n    }\n    /**\n     * Set the UI state and trigger a search.\n     * @param uiState The next UI state or a function computing it from the current state\n     * @param callOnStateChange private parameter used to know if the method is called from a state change\n     */\n\n  }, {\n    key: \"setUiState\",\n    value: function setUiState(uiState) {\n      var _this5 = this;\n\n      var callOnStateChange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `setUiState`.'));\n      } // We refresh the index UI state to update the local UI state that the\n      // main index passes to the function form of `setUiState`.\n\n\n      this.mainIndex.refreshUiState();\n      var nextUiState = typeof uiState === 'function' ? uiState(this.mainIndex.getWidgetUiState({})) : uiState;\n\n      if (this.onStateChange && callOnStateChange) {\n        this.onStateChange({\n          uiState: nextUiState,\n          setUiState: function setUiState(finalUiState) {\n            setIndexHelperState(typeof finalUiState === 'function' ? finalUiState(nextUiState) : finalUiState, _this5.mainIndex);\n\n            _this5.scheduleSearch();\n\n            _this5.onInternalStateChange();\n          }\n        });\n      } else {\n        setIndexHelperState(nextUiState, this.mainIndex);\n        this.scheduleSearch();\n        this.onInternalStateChange();\n      }\n    }\n  }, {\n    key: \"getUiState\",\n    value: function getUiState() {\n      if (this.started) {\n        // We refresh the index UI state to make sure changes from `refine` are taken in account\n        this.mainIndex.refreshUiState();\n      }\n\n      return this.mainIndex.getWidgetUiState({});\n    }\n  }, {\n    key: \"createURL\",\n    value: function createURL() {\n      var nextState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.started) {\n        throw new Error(withUsage('The `start` method needs to be called before `createURL`.'));\n      }\n\n      return this._createURL(nextState);\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `refresh`.'));\n      }\n\n      this.mainHelper.clearCache().search();\n    }\n  }]);\n\n  return InstantSearch;\n}(EventEmitter);\n\nexport default InstantSearch;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { warning } from \"../lib/utils/index.js\";\nexport var ANONYMOUS_TOKEN_COOKIE_KEY = '_ALGOLIA';\n\nfunction getCookie(name) {\n  if ((typeof document === \"undefined\" ? \"undefined\" : _typeof(document)) !== 'object' || typeof document.cookie !== 'string') {\n    return undefined;\n  }\n\n  var prefix = \"\".concat(name, \"=\");\n  var cookies = document.cookie.split(';');\n\n  for (var i = 0; i < cookies.length; i++) {\n    var cookie = cookies[i];\n\n    while (cookie.charAt(0) === ' ') {\n      cookie = cookie.substring(1);\n    }\n\n    if (cookie.indexOf(prefix) === 0) {\n      return cookie.substring(prefix.length, cookie.length);\n    }\n  }\n\n  return undefined;\n}\n\nexport function getInsightsAnonymousUserTokenInternal() {\n  return getCookie(ANONYMOUS_TOKEN_COOKIE_KEY);\n}\n/**\n * @deprecated This function will be still supported in 4.x releases, but not further. It is replaced by the `insights` middleware. For more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\n */\n\nexport default function getInsightsAnonymousUserToken() {\n  process.env.NODE_ENV === 'development' ? warning(false, \"`getInsightsAnonymousUserToken` function has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\\n\\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\") : void 0;\n  return getInsightsAnonymousUserTokenInternal();\n}","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { isEqual, safelyRunOnBrowser } from \"../utils/index.js\";\n\nfunction getStateWithoutPage(state) {\n  var _ref = state || {},\n      page = _ref.page,\n      rest = _objectWithoutProperties(_ref, [\"page\"]);\n\n  return rest;\n}\n\nvar KEY = 'ais.infiniteHits';\nexport default function createInfiniteHitsSessionStorageCache() {\n  return {\n    read: function read(_ref2) {\n      var state = _ref2.state;\n      var sessionStorage = safelyRunOnBrowser(function (_ref3) {\n        var window = _ref3.window;\n        return window.sessionStorage;\n      });\n\n      if (!sessionStorage) {\n        return null;\n      }\n\n      try {\n        var cache = JSON.parse( // @ts-expect-error JSON.parse() requires a string, but it actually accepts null, too.\n        sessionStorage.getItem(KEY));\n        return cache && isEqual(cache.state, getStateWithoutPage(state)) ? cache.hits : null;\n      } catch (error) {\n        if (error instanceof SyntaxError) {\n          try {\n            sessionStorage.removeItem(KEY);\n          } catch (err) {// do nothing\n          }\n        }\n\n        return null;\n      }\n    },\n    write: function write(_ref4) {\n      var state = _ref4.state,\n          hits = _ref4.hits;\n      var sessionStorage = safelyRunOnBrowser(function (_ref5) {\n        var window = _ref5.window;\n        return window.sessionStorage;\n      });\n\n      if (!sessionStorage) {\n        return;\n      }\n\n      try {\n        sessionStorage.setItem(KEY, JSON.stringify({\n          state: getStateWithoutPage(state),\n          hits: hits\n        }));\n      } catch (error) {// do nothing\n      }\n    }\n  };\n}","import { noop } from \"./noop.js\";\n\n/**\n * Logs a warning when this function is called, in development environment only.\n */\nvar deprecate = function deprecate(fn, message) {\n  return fn;\n};\n/**\n * Logs a warning\n * This is used to log issues in development environment only.\n */\n\n\nvar warn = noop;\n/**\n * Logs a warning if the condition is not met.\n * This is used to log issues in development environment only.\n */\n\nvar _warning = noop;\n\nif (process.env.NODE_ENV === 'development') {\n  warn = function warn(message) {\n    // eslint-disable-next-line no-console\n    console.warn(\"[InstantSearch.js]: \".concat(message.trim()));\n  };\n\n  deprecate = function deprecate(fn, message) {\n    var hasAlreadyPrinted = false;\n    return function () {\n      if (!hasAlreadyPrinted) {\n        hasAlreadyPrinted = true;\n        warn(message);\n      }\n\n      return fn.apply(void 0, arguments);\n    };\n  };\n\n  _warning = function warning(condition, message) {\n    if (condition) {\n      return;\n    }\n\n    var hasAlreadyPrinted = _warning.cache[message];\n\n    if (!hasAlreadyPrinted) {\n      _warning.cache[message] = true;\n      warn(message);\n    }\n  };\n\n  _warning.cache = {};\n}\n\nexport { warn, deprecate, _warning as warning };","import InstantSearch from \"./lib/InstantSearch.js\";\nimport version from \"./lib/version.js\";\nimport { snippet, reverseSnippet, highlight, reverseHighlight, insights, getInsightsAnonymousUserToken } from \"./helpers/index.js\";\nimport { createInfiniteHitsSessionStorageCache } from \"./lib/infiniteHitsCache/index.js\";\nimport { deprecate } from \"./lib/utils/index.js\";\n\n/**\n * InstantSearch is the main component of InstantSearch.js. This object\n * manages the widget and lets you add new ones.\n *\n * Two parameters are required to get you started with InstantSearch.js:\n *  - `indexName`: the main index that you will use for your new search UI\n *  - `searchClient`: the search client to plug to InstantSearch.js\n *\n * The [search client provided by Algolia](algolia.com/doc/api-client/getting-started/what-is-the-api-client/javascript/)\n * needs an `appId` and an `apiKey`. Those parameters can be found in your\n * [Algolia dashboard](https://www.algolia.com/api-keys).\n *\n * If you want to get up and running quickly with InstantSearch.js, have a\n * look at the [getting started](https://www.algolia.com/doc/guides/building-search-ui/getting-started/js/).\n */\nvar instantsearch = function instantsearch(options) {\n  return new InstantSearch(options);\n};\n\ninstantsearch.version = version;\ninstantsearch.createInfiniteHitsSessionStorageCache = deprecate(createInfiniteHitsSessionStorageCache, \"import { createInfiniteHitsSessionStorageCache } from 'instantsearch.js/es/lib/infiniteHitsCache'\");\ninstantsearch.highlight = deprecate(highlight, \"import { highlight } from 'instantsearch.js/es/helpers'\");\ninstantsearch.reverseHighlight = deprecate(reverseHighlight, \"import { reverseHighlight } from 'instantsearch.js/es/helpers'\");\ninstantsearch.snippet = deprecate(snippet, \"import { snippet } from 'instantsearch.js/es/helpers'\");\ninstantsearch.reverseSnippet = deprecate(reverseSnippet, \"import { reverseSnippet } from 'instantsearch.js/es/helpers'\");\ninstantsearch.insights = insights;\ninstantsearch.getInsightsAnonymousUserToken = getInsightsAnonymousUserToken;\nObject.defineProperty(instantsearch, 'widgets', {\n  get: function get() {\n    throw new ReferenceError(\"\\\"instantsearch.widgets\\\" are not available from the ES build.\\n\\nTo import the widgets:\\n\\nimport { searchBox } from 'instantsearch.js/es/widgets'\");\n  }\n});\nObject.defineProperty(instantsearch, 'connectors', {\n  get: function get() {\n    throw new ReferenceError(\"\\\"instantsearch.connectors\\\" are not available from the ES build.\\n\\nTo import the connectors:\\n\\nimport { connectSearchBox } from 'instantsearch.js/es/connectors'\");\n  }\n});\nexport default instantsearch;\nexport * from \"./types/index.js\";\n","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport { createDocumentationMessageGenerator, isPlainObject, mergeSearchParameters, noop } from \"../../lib/utils/index.js\";\n/**\n * Refine the given search parameters.\n */\n\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'configure',\n  connector: true\n});\n\nfunction getInitialSearchParameters(state, widgetParams) {\n  // We leverage the helper internals to remove the `widgetParams` from\n  // the state. The function `setQueryParameters` omits the values that\n  // are `undefined` on the next state.\n  return state.setQueryParameters(Object.keys(widgetParams.searchParameters).reduce(function (acc, key) {\n    return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, undefined));\n  }, {}));\n}\n\nvar connectConfigure = function connectConfigure() {\n  var renderFn = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  return function (widgetParams) {\n    if (!widgetParams || !isPlainObject(widgetParams.searchParameters)) {\n      throw new Error(withUsage('The `searchParameters` option expects an object.'));\n    }\n\n    var connectorState = {};\n\n    function refine(helper) {\n      return function (searchParameters) {\n        // Merge new `searchParameters` with the ones set from other widgets\n        var actualState = getInitialSearchParameters(helper.state, widgetParams);\n        var nextSearchParameters = mergeSearchParameters(actualState, new algoliasearchHelper.SearchParameters(searchParameters)); // Update original `widgetParams.searchParameters` to the new refined one\n\n        widgetParams.searchParameters = searchParameters; // Trigger a search with the resolved search parameters\n\n        helper.setState(nextSearchParameters).search();\n      };\n    }\n\n    return {\n      $$type: 'ais.configure',\n      init: function init(initOptions) {\n        var instantSearchInstance = initOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        var instantSearchInstance = renderOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), false);\n      },\n      dispose: function dispose(_ref) {\n        var state = _ref.state;\n        unmountFn();\n        return getInitialSearchParameters(state, widgetParams);\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        var _renderState$configur;\n\n        var widgetRenderState = this.getWidgetRenderState(renderOptions);\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          configure: _objectSpread(_objectSpread({}, widgetRenderState), {}, {\n            widgetParams: _objectSpread(_objectSpread({}, widgetRenderState.widgetParams), {}, {\n              searchParameters: mergeSearchParameters(new algoliasearchHelper.SearchParameters((_renderState$configur = renderState.configure) === null || _renderState$configur === void 0 ? void 0 : _renderState$configur.widgetParams.searchParameters), new algoliasearchHelper.SearchParameters(widgetRenderState.widgetParams.searchParameters)).getQueryParams()\n            })\n          })\n        });\n      },\n      getWidgetRenderState: function getWidgetRenderState(_ref2) {\n        var helper = _ref2.helper;\n\n        if (!connectorState.refine) {\n          connectorState.refine = refine(helper);\n        }\n\n        return {\n          refine: connectorState.refine,\n          widgetParams: widgetParams\n        };\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(state, _ref3) {\n        var uiState = _ref3.uiState;\n        return mergeSearchParameters(state, new algoliasearchHelper.SearchParameters(_objectSpread(_objectSpread({}, uiState.configure), widgetParams.searchParameters)));\n      },\n      getWidgetUiState: function getWidgetUiState(uiState) {\n        return _objectSpread(_objectSpread({}, uiState), {}, {\n          configure: _objectSpread(_objectSpread({}, uiState.configure), widgetParams.searchParameters)\n        });\n      }\n    };\n  };\n};\n\nexport default connectConfigure;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport connectConfigure from \"../../connectors/configure/connectConfigure.js\";\nimport { noop } from \"../../lib/utils/index.js\";\n/**\n * A list of [search parameters](https://www.algolia.com/doc/api-reference/search-api-parameters/)\n * to enable when the widget mounts.\n */\n\nvar configure = function configure(widgetParams) {\n  // This is a renderless widget that falls back to the connector's\n  // noop render and unmount functions.\n  var makeWidget = connectConfigure(noop);\n  return _objectSpread(_objectSpread({}, makeWidget({\n    searchParameters: widgetParams\n  })), {}, {\n    $$widgetType: 'ais.configure'\n  });\n};\n\nexport default configure;","import { EMPTY_ARR } from \"./constants\";\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-ignore We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","import { slice } from './util';\nimport options from './options';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\t_hydrating: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++vnodeId : original\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tconst oldVNode = assign({}, vnode);\n\t\toldVNode._original = vnode._original + 1;\n\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tvnode._hydrating != null ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom,\n\t\t\tvnode._hydrating\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (vnode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || setTimeout)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet queue;\n\twhile ((process._rerenderCount = rerenderQueue.length)) {\n\t\tqueue = rerenderQueue.sort((a, b) => a._vnode._depth - b._vnode._depth);\n\t\trerenderQueue = [];\n\t\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t\t// process() calls from getting scheduled while `queue` is still being consumed.\n\t\tqueue.some(c => {\n\t\t\tif (c._dirty) renderComponent(c);\n\t\t});\n\t}\n}\n\nprocess._rerenderCount = 0;\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').ComponentChildren[]} renderResult\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, childVNode, newDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < renderResult.length; i++) {\n\t\tchildVNode = renderResult[i];\n\n\t\tif (childVNode == null || typeof childVNode == 'boolean') {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t} else if (Array.isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : null,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\t// Terser removes the `continue` here and wraps the loop body\n\t\t// in a `if (childVNode) { ... } condition\n\t\tif (childVNode == null) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Check if we find a corresponding element in oldChildren.\n\t\t// If found, delete the array item by setting to `undefined`.\n\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t// (holes).\n\t\toldVNode = oldChildren[i];\n\n\t\tif (\n\t\t\toldVNode === null ||\n\t\t\t(oldVNode &&\n\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t) {\n\t\t\toldChildren[i] = undefined;\n\t\t} else {\n\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t// We always match by type (in either case).\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toldVNode = null;\n\t\t\t}\n\t\t}\n\n\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating\n\t\t);\n\n\t\tnewDom = childVNode._dom;\n\n\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\tif (!refs) refs = [];\n\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t}\n\n\t\tif (newDom != null) {\n\t\t\tif (firstChildDom == null) {\n\t\t\t\tfirstChildDom = newDom;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\t\tchildVNode._children === oldVNode._children\n\t\t\t) {\n\t\t\t\tchildVNode._nextDom = oldDom = reorderChildren(\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldDom,\n\t\t\t\t\tparentDom\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\toldChildren,\n\t\t\t\t\tnewDom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t//\n\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t// node's nextSibling.\n\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t}\n\t\t} else if (\n\t\t\toldDom &&\n\t\t\toldVNode._dom == oldDom &&\n\t\t\toldDom.parentNode != parentDom\n\t\t) {\n\t\t\t// The above condition is to handle null placeholders. See test in placeholder.test.js:\n\t\t\t// `efficiently replace null placeholders in parent rerenders`\n\t\t\toldDom = getDomSibling(oldVNode);\n\t\t}\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) {\n\t\t\tunmount(oldChildren[i], oldChildren[i]);\n\t\t}\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\nfunction reorderChildren(childVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\tlet c = childVNode._children;\n\tlet tmp = 0;\n\tfor (; c && tmp < c.length; tmp++) {\n\t\tlet vnode = c[tmp];\n\t\tif (vnode) {\n\t\t\t// We typically enter this code path on sCU bailout, where we copy\n\t\t\t// oldVNode._children to newVNode._children. If that is the case, we need\n\t\t\t// to update the old children's _parent pointer to point to the newVNode\n\t\t\t// (childVNode here).\n\t\t\tvnode._parent = childVNode;\n\n\t\t\tif (typeof vnode.type == 'function') {\n\t\t\t\toldDom = reorderChildren(vnode, oldDom, parentDom);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(parentDom, vnode, vnode, c, vnode._dom, oldDom);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (Array.isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\nfunction placeChild(\n\tparentDom,\n\tchildVNode,\n\toldVNode,\n\toldChildren,\n\tnewDom,\n\toldDom\n) {\n\tlet nextDom;\n\tif (childVNode._nextDom !== undefined) {\n\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t// of last DOM child of this child VNode\n\t\tnextDom = childVNode._nextDom;\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t// can clean up the property\n\t\tchildVNode._nextDom = undefined;\n\t} else if (\n\t\toldVNode == null ||\n\t\tnewDom != oldDom ||\n\t\tnewDom.parentNode == null\n\t) {\n\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\tparentDom.appendChild(newDom);\n\t\t\tnextDom = null;\n\t\t} else {\n\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\tfor (\n\t\t\t\tlet sibDom = oldDom, j = 0;\n\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildren.length;\n\t\t\t\tj += 1\n\t\t\t) {\n\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\tnextDom = oldDom;\n\t\t}\n\t}\n\n\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t// See more detail in create-element.js:createVNode\n\tif (nextDom !== undefined) {\n\t\toldDom = nextDom;\n\t} else {\n\t\toldDom = newDom.nextSibling;\n\t}\n\n\treturn oldDom;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (i !== 'children' && i !== 'key' && !(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'children' &&\n\t\t\ti !== 'key' &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet useCapture;\n\n\to: if (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture = name !== (name = name.replace(/Capture$/, ''));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (name.toLowerCase() in dom) name = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\t\tdom.addEventListener(name, handler, useCapture);\n\t\t\t}\n\t\t} else {\n\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\tdom.removeEventListener(name, handler, useCapture);\n\t\t}\n\t} else if (name !== 'dangerouslySetInnerHTML') {\n\t\tif (isSvg) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname !== 'href' &&\n\t\t\tname !== 'list' &&\n\t\t\tname !== 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname !== 'tabIndex' &&\n\t\t\tname !== 'download' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// ARIA-attributes have a different notion of boolean values.\n\t\t// The value `false` is different from the attribute not\n\t\t// existing on the DOM, so we can't remove it. For non-boolean\n\t\t// ARIA-attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost us too many bytes. On top of\n\t\t// that other VDOM frameworks also always stringify `false`.\n\n\t\tif (typeof value === 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != null && (value !== false || name.indexOf('-') != -1)) {\n\t\t\tdom.setAttribute(name, value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type + false](options.event ? options.event(e) : e);\n}\n\nfunction eventProxyCapture(e) {\n\tthis._listeners[e.type + true](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ } from '../constants';\nimport { Component, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { diffProps, setProperty } from './props';\nimport { assign, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._hydrating != null) {\n\t\tisHydrating = oldVNode._hydrating;\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\t// if we resume, we want the tree to be \"unlocked\"\n\t\tnewVNode._hydrating = null;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType == 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\t// @ts-ignore The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, componentContext);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original === oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) c._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.forEach(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tArray.isArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._hydrating = null;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else if (\n\t\t\texcessDomChildren == null &&\n\t\t\tnewVNode._original === oldVNode._original\n\t\t) {\n\t\t\tnewVNode._children = oldVNode._children;\n\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\tnewVNode._original = null;\n\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\tnewVNode._dom = oldDom;\n\t\t\tnewVNode._hydrating = !!isHydrating;\n\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t// ^ could possibly be simplified to:\n\t\t\t// excessDomChildren.length = 0;\n\t\t}\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-ignore Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-ignore See above ts-ignore on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = newVNode.type;\n\tlet i = 0;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tif (nodeType === 'svg') isSvg = true;\n\n\tif (excessDomChildren != null) {\n\t\tfor (; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tchild &&\n\t\t\t\t'setAttribute' in child === !!nodeType &&\n\t\t\t\t(nodeType ? child.localName === nodeType : child.nodeType === 3)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType === null) {\n\t\t\t// @ts-ignore createTextNode returns Text, we expect PreactElement\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tif (isSvg) {\n\t\t\tdom = document.createElementNS(\n\t\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType\n\t\t\t);\n\t\t} else {\n\t\t\tdom = document.createElement(\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType,\n\t\t\t\tnewProps.is && newProps\n\t\t\t);\n\t\t}\n\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\t// But, if we are in a situation where we are using existing DOM (e.g. replaceNode)\n\t\t\t// we should read the existing DOM attributes to diff them\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (\n\t\t\t\t\t!newHtml ||\n\t\t\t\t\t((!oldHtml || newHtml.__html != oldHtml.__html) &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML)\n\t\t\t\t) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\ti = newVNode.props.children;\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tArray.isArray(i) ? i : [i],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg && nodeType !== 'foreignObject',\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\t(i = newProps.value) !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(i !== dom.value ||\n\t\t\t\t\t(nodeType === 'progress' && !i) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType === 'option' && i !== oldProps.value))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'value', i, oldProps.value, false);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\t(i = newProps.checked) !== undefined &&\n\t\t\t\ti !== dom.checked\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'checked', i, oldProps.checked, false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) {\n\t\t\tapplyRef(r, null, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t\tvnode._component = undefined;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type !== 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove && vnode._dom != null) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._parent = vnode._dom = vnode._nextDom = undefined;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode === 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = (\n\t\t(!isHydrating && replaceNode) ||\n\t\tparentDom\n\t)._children = createElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: parentDom.firstChild\n\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t? oldVNode._dom\n\t\t\t: parentDom.firstChild,\n\t\tisHydrating\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n","export function cx() {\n  for (var _len = arguments.length, cssClasses = new Array(_len), _key = 0; _key < _len; _key++) {\n    cssClasses[_key] = arguments[_key];\n  }\n\n  return cssClasses.reduce(function (acc, className) {\n    if (Array.isArray(className)) {\n      return acc.concat(className);\n    }\n\n    return acc.concat([className]);\n  }, []).filter(Boolean).join(' ');\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport function addAbsolutePosition(hits, page, hitsPerPage) {\n  return hits.map(function (hit, idx) {\n    return _objectSpread(_objectSpread({}, hit), {}, {\n      __position: hitsPerPage * page + idx + 1\n    });\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport function addQueryID(hits, queryID) {\n  if (!queryID) {\n    return hits;\n  }\n\n  return hits.map(function (hit) {\n    return _objectSpread(_objectSpread({}, hit), {}, {\n      __queryID: queryID\n    });\n  });\n}","import { getObjectType } from \"./getObjectType.js\";\nexport function checkRendering(rendering, usage) {\n  if (rendering === undefined || typeof rendering !== 'function') {\n    throw new Error(\"The render function is not valid (received type \".concat(getObjectType(rendering), \").\\n\\n\").concat(usage));\n  }\n}","export function getObjectType(object) {\n  return Object.prototype.toString.call(object).slice(8, -1);\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { serializePayload } from \"./serializer.js\";\n\nfunction chunk(arr) {\n  var chunkSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;\n  var chunks = [];\n\n  for (var i = 0; i < Math.ceil(arr.length / chunkSize); i++) {\n    chunks.push(arr.slice(i * chunkSize, (i + 1) * chunkSize));\n  }\n\n  return chunks;\n}\n\nvar buildPayloads = function buildPayloads(_ref) {\n  var index = _ref.index,\n      widgetType = _ref.widgetType,\n      methodName = _ref.methodName,\n      args = _ref.args,\n      isSearchStalled = _ref.isSearchStalled;\n\n  // when there's only one argument, that means it's custom\n  if (args.length === 1 && _typeof(args[0]) === 'object') {\n    return [args[0]];\n  }\n\n  var eventType = args[0];\n  var hits = args[1];\n  var eventName = args[2];\n\n  if (!hits) {\n    if (process.env.NODE_ENV === 'development') {\n      throw new Error(\"You need to pass hit or hits as the second argument like:\\n  \".concat(methodName, \"(eventType, hit);\\n  \"));\n    } else {\n      return [];\n    }\n  }\n\n  if ((eventType === 'click' || eventType === 'conversion') && !eventName) {\n    if (process.env.NODE_ENV === 'development') {\n      throw new Error(\"You need to pass eventName as the third argument for 'click' or 'conversion' events like:\\n  \".concat(methodName, \"('click', hit, 'Product Purchased');\\n\\n  To learn more about event naming: https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/in-depth/clicks-conversions-best-practices/\\n  \"));\n    } else {\n      return [];\n    }\n  }\n\n  var hitsArray = Array.isArray(hits) ? removeEscapedFromHits(hits) : [hits];\n\n  if (hitsArray.length === 0) {\n    return [];\n  }\n\n  var queryID = hitsArray[0].__queryID;\n  var hitsChunks = chunk(hitsArray);\n  var objectIDsByChunk = hitsChunks.map(function (batch) {\n    return batch.map(function (hit) {\n      return hit.objectID;\n    });\n  });\n  var positionsByChunk = hitsChunks.map(function (batch) {\n    return batch.map(function (hit) {\n      return hit.__position;\n    });\n  });\n\n  if (eventType === 'view') {\n    if (isSearchStalled) {\n      return [];\n    }\n\n    return hitsChunks.map(function (batch, i) {\n      return {\n        insightsMethod: 'viewedObjectIDs',\n        widgetType: widgetType,\n        eventType: eventType,\n        payload: {\n          eventName: eventName || 'Hits Viewed',\n          index: index,\n          objectIDs: objectIDsByChunk[i]\n        },\n        hits: batch\n      };\n    });\n  } else if (eventType === 'click') {\n    return hitsChunks.map(function (batch, i) {\n      return {\n        insightsMethod: 'clickedObjectIDsAfterSearch',\n        widgetType: widgetType,\n        eventType: eventType,\n        payload: {\n          eventName: eventName,\n          index: index,\n          queryID: queryID,\n          objectIDs: objectIDsByChunk[i],\n          positions: positionsByChunk[i]\n        },\n        hits: batch\n      };\n    });\n  } else if (eventType === 'conversion') {\n    return hitsChunks.map(function (batch, i) {\n      return {\n        insightsMethod: 'convertedObjectIDsAfterSearch',\n        widgetType: widgetType,\n        eventType: eventType,\n        payload: {\n          eventName: eventName,\n          index: index,\n          queryID: queryID,\n          objectIDs: objectIDsByChunk[i]\n        },\n        hits: batch\n      };\n    });\n  } else if (process.env.NODE_ENV === 'development') {\n    throw new Error(\"eventType(\\\"\".concat(eventType, \"\\\") is not supported.\\n    If you want to send a custom payload, you can pass one object: \").concat(methodName, \"(customPayload);\\n    \"));\n  } else {\n    return [];\n  }\n};\n\nfunction removeEscapedFromHits(hits) {\n  // remove `hits.__escaped` without mutating\n  return hits.slice();\n}\n\nexport function createSendEventForHits(_ref2) {\n  var instantSearchInstance = _ref2.instantSearchInstance,\n      index = _ref2.index,\n      widgetType = _ref2.widgetType;\n\n  var sendEventForHits = function sendEventForHits() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var payloads = buildPayloads({\n      widgetType: widgetType,\n      index: index,\n      methodName: 'sendEvent',\n      args: args,\n      isSearchStalled: instantSearchInstance.status === 'stalled'\n    });\n    payloads.forEach(function (payload) {\n      return instantSearchInstance.sendEventToInsights(payload);\n    });\n  };\n\n  return sendEventForHits;\n}\nexport function createBindEventForHits(_ref3) {\n  var index = _ref3.index,\n      widgetType = _ref3.widgetType;\n\n  var bindEventForHits = function bindEventForHits() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var payloads = buildPayloads({\n      widgetType: widgetType,\n      index: index,\n      methodName: 'bindEvent',\n      args: args,\n      isSearchStalled: false\n    });\n    return payloads.length ? \"data-insights-event=\".concat(serializePayload(payloads)) : '';\n  };\n\n  return bindEventForHits;\n}","/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component, ctor, handled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { escapeHits, TAG_PLACEHOLDER, checkRendering, createDocumentationMessageGenerator, addAbsolutePosition, addQueryID, createSendEventForHits, createBindEventForHits, noop } from \"../../lib/utils/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'hits',\n  connector: true\n});\n\nvar connectHits = function connectHits(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _ref = widgetParams || {},\n        _ref$escapeHTML = _ref.escapeHTML,\n        escapeHTML = _ref$escapeHTML === void 0 ? true : _ref$escapeHTML,\n        _ref$transformItems = _ref.transformItems,\n        transformItems = _ref$transformItems === void 0 ? function (items) {\n      return items;\n    } : _ref$transformItems;\n\n    var sendEvent;\n    var bindEvent;\n    return {\n      $$type: 'ais.hits',\n      init: function init(initOptions) {\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: initOptions.instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        var renderState = this.getWidgetRenderState(renderOptions);\n        renderFn(_objectSpread(_objectSpread({}, renderState), {}, {\n          instantSearchInstance: renderOptions.instantSearchInstance\n        }), false);\n        renderState.sendEvent('view', renderState.hits);\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          hits: this.getWidgetRenderState(renderOptions)\n        });\n      },\n      getWidgetRenderState: function getWidgetRenderState(_ref2) {\n        var results = _ref2.results,\n            helper = _ref2.helper,\n            instantSearchInstance = _ref2.instantSearchInstance;\n\n        if (!sendEvent) {\n          sendEvent = createSendEventForHits({\n            instantSearchInstance: instantSearchInstance,\n            index: helper.getIndex(),\n            widgetType: this.$$type\n          });\n        }\n\n        if (!bindEvent) {\n          bindEvent = createBindEventForHits({\n            index: helper.getIndex(),\n            widgetType: this.$$type\n          });\n        }\n\n        if (!results) {\n          return {\n            hits: [],\n            results: undefined,\n            sendEvent: sendEvent,\n            bindEvent: bindEvent,\n            widgetParams: widgetParams\n          };\n        }\n\n        if (escapeHTML && results.hits.length > 0) {\n          results.hits = escapeHits(results.hits);\n        }\n\n        var hitsWithAbsolutePosition = addAbsolutePosition(results.hits, results.page, results.hitsPerPage);\n        var hitsWithAbsolutePositionAndQueryID = addQueryID(hitsWithAbsolutePosition, results.queryID);\n        var transformedHits = transformItems(hitsWithAbsolutePositionAndQueryID, {\n          results: results\n        });\n        return {\n          hits: transformedHits,\n          results: results,\n          sendEvent: sendEvent,\n          bindEvent: bindEvent,\n          widgetParams: widgetParams\n        };\n      },\n      dispose: function dispose(_ref3) {\n        var state = _ref3.state;\n        unmountFn();\n\n        if (!escapeHTML) {\n          return state;\n        }\n\n        return state.setQueryParameters(Object.keys(TAG_PLACEHOLDER).reduce(function (acc, key) {\n          return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, undefined));\n        }, {}));\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(state) {\n        if (!escapeHTML) {\n          return state;\n        }\n\n        return state.setQueryParameters(TAG_PLACEHOLDER);\n      }\n    };\n  };\n};\n\nexport default connectHits;","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n(function (Hogan) {\n  // Setup regex  assignments\n  // remove whitespace according to Mustache spec\n  var rIsWhitespace = /\\S/,\n      rQuot = /\\\"/g,\n      rNewline =  /\\n/g,\n      rCr = /\\r/g,\n      rSlash = /\\\\/g,\n      rLineSep = /\\u2028/,\n      rParagraphSep = /\\u2029/;\n\n  Hogan.tags = {\n    '#': 1, '^': 2, '<': 3, '$': 4,\n    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,\n    '{': 10, '&': 11, '_t': 12\n  };\n\n  Hogan.scan = function scan(text, delimiters) {\n    var len = text.length,\n        IN_TEXT = 0,\n        IN_TAG_TYPE = 1,\n        IN_TAG = 2,\n        state = IN_TEXT,\n        tagType = null,\n        tag = null,\n        buf = '',\n        tokens = [],\n        seenTag = false,\n        i = 0,\n        lineStart = 0,\n        otag = '{{',\n        ctag = '}}';\n\n    function addBuf() {\n      if (buf.length > 0) {\n        tokens.push({tag: '_t', text: new String(buf)});\n        buf = '';\n      }\n    }\n\n    function lineIsWhitespace() {\n      var isAllWhitespace = true;\n      for (var j = lineStart; j < tokens.length; j++) {\n        isAllWhitespace =\n          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||\n          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);\n        if (!isAllWhitespace) {\n          return false;\n        }\n      }\n\n      return isAllWhitespace;\n    }\n\n    function filterLine(haveSeenTag, noNewLine) {\n      addBuf();\n\n      if (haveSeenTag && lineIsWhitespace()) {\n        for (var j = lineStart, next; j < tokens.length; j++) {\n          if (tokens[j].text) {\n            if ((next = tokens[j+1]) && next.tag == '>') {\n              // set indent to token value\n              next.indent = tokens[j].text.toString()\n            }\n            tokens.splice(j, 1);\n          }\n        }\n      } else if (!noNewLine) {\n        tokens.push({tag:'\\n'});\n      }\n\n      seenTag = false;\n      lineStart = tokens.length;\n    }\n\n    function changeDelimiters(text, index) {\n      var close = '=' + ctag,\n          closeIndex = text.indexOf(close, index),\n          delimiters = trim(\n            text.substring(text.indexOf('=', index) + 1, closeIndex)\n          ).split(' ');\n\n      otag = delimiters[0];\n      ctag = delimiters[delimiters.length - 1];\n\n      return closeIndex + close.length - 1;\n    }\n\n    if (delimiters) {\n      delimiters = delimiters.split(' ');\n      otag = delimiters[0];\n      ctag = delimiters[1];\n    }\n\n    for (i = 0; i < len; i++) {\n      if (state == IN_TEXT) {\n        if (tagChange(otag, text, i)) {\n          --i;\n          addBuf();\n          state = IN_TAG_TYPE;\n        } else {\n          if (text.charAt(i) == '\\n') {\n            filterLine(seenTag);\n          } else {\n            buf += text.charAt(i);\n          }\n        }\n      } else if (state == IN_TAG_TYPE) {\n        i += otag.length - 1;\n        tag = Hogan.tags[text.charAt(i + 1)];\n        tagType = tag ? text.charAt(i + 1) : '_v';\n        if (tagType == '=') {\n          i = changeDelimiters(text, i);\n          state = IN_TEXT;\n        } else {\n          if (tag) {\n            i++;\n          }\n          state = IN_TAG;\n        }\n        seenTag = i;\n      } else {\n        if (tagChange(ctag, text, i)) {\n          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});\n          buf = '';\n          i += ctag.length - 1;\n          state = IN_TEXT;\n          if (tagType == '{') {\n            if (ctag == '}}') {\n              i++;\n            } else {\n              cleanTripleStache(tokens[tokens.length - 1]);\n            }\n          }\n        } else {\n          buf += text.charAt(i);\n        }\n      }\n    }\n\n    filterLine(seenTag, true);\n\n    return tokens;\n  }\n\n  function cleanTripleStache(token) {\n    if (token.n.substr(token.n.length - 1) === '}') {\n      token.n = token.n.substring(0, token.n.length - 1);\n    }\n  }\n\n  function trim(s) {\n    if (s.trim) {\n      return s.trim();\n    }\n\n    return s.replace(/^\\s*|\\s*$/g, '');\n  }\n\n  function tagChange(tag, text, index) {\n    if (text.charAt(index) != tag.charAt(0)) {\n      return false;\n    }\n\n    for (var i = 1, l = tag.length; i < l; i++) {\n      if (text.charAt(index + i) != tag.charAt(i)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // the tags allowed inside super templates\n  var allowedInSuper = {'_t': true, '\\n': true, '$': true, '/': true};\n\n  function buildTree(tokens, kind, stack, customTags) {\n    var instructions = [],\n        opener = null,\n        tail = null,\n        token = null;\n\n    tail = stack[stack.length - 1];\n\n    while (tokens.length > 0) {\n      token = tokens.shift();\n\n      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {\n        throw new Error('Illegal content in < super tag.');\n      }\n\n      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {\n        stack.push(token);\n        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n      } else if (token.tag == '/') {\n        if (stack.length === 0) {\n          throw new Error('Closing tag without opener: /' + token.n);\n        }\n        opener = stack.pop();\n        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);\n        }\n        opener.end = token.i;\n        return instructions;\n      } else if (token.tag == '\\n') {\n        token.last = (tokens.length == 0) || (tokens[0].tag == '\\n');\n      }\n\n      instructions.push(token);\n    }\n\n    if (stack.length > 0) {\n      throw new Error('missing closing tag: ' + stack.pop().n);\n    }\n\n    return instructions;\n  }\n\n  function isOpener(token, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].o == token.n) {\n        token.tag = '#';\n        return true;\n      }\n    }\n  }\n\n  function isCloser(close, open, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].c == close && tags[i].o == open) {\n        return true;\n      }\n    }\n  }\n\n  function stringifySubstitutions(obj) {\n    var items = [];\n    for (var key in obj) {\n      items.push('\"' + esc(key) + '\": function(c,p,t,i) {' + obj[key] + '}');\n    }\n    return \"{ \" + items.join(\",\") + \" }\";\n  }\n\n  function stringifyPartials(codeObj) {\n    var partials = [];\n    for (var key in codeObj.partials) {\n      partials.push('\"' + esc(key) + '\":{name:\"' + esc(codeObj.partials[key].name) + '\", ' + stringifyPartials(codeObj.partials[key]) + \"}\");\n    }\n    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n  }\n\n  Hogan.stringify = function(codeObj, text, options) {\n    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) +  \"}\";\n  }\n\n  var serialNo = 0;\n  Hogan.generate = function(tree, text, options) {\n    serialNo = 0;\n    var context = { code: '', subs: {}, partials: {} };\n    Hogan.walk(tree, context);\n\n    if (options.asString) {\n      return this.stringify(context, text, options);\n    }\n\n    return this.makeTemplate(context, text, options);\n  }\n\n  Hogan.wrapMain = function(code) {\n    return 'var t=this;t.b(i=i||\"\");' + code + 'return t.fl();';\n  }\n\n  Hogan.template = Hogan.Template;\n\n  Hogan.makeTemplate = function(codeObj, text, options) {\n    var template = this.makePartials(codeObj);\n    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));\n    return new this.template(template, text, this, options);\n  }\n\n  Hogan.makePartials = function(codeObj) {\n    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};\n    for (key in template.partials) {\n      template.partials[key] = this.makePartials(template.partials[key]);\n    }\n    for (key in codeObj.subs) {\n      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);\n    }\n    return template;\n  }\n\n  function esc(s) {\n    return s.replace(rSlash, '\\\\\\\\')\n            .replace(rQuot, '\\\\\\\"')\n            .replace(rNewline, '\\\\n')\n            .replace(rCr, '\\\\r')\n            .replace(rLineSep, '\\\\u2028')\n            .replace(rParagraphSep, '\\\\u2029');\n  }\n\n  function chooseMethod(s) {\n    return (~s.indexOf('.')) ? 'd' : 'f';\n  }\n\n  function createPartial(node, context) {\n    var prefix = \"<\" + (context.prefix || \"\");\n    var sym = prefix + node.n + serialNo++;\n    context.partials[sym] = {name: node.n, partials: {}};\n    context.code += 't.b(t.rp(\"' +  esc(sym) + '\",c,p,\"' + (node.indent || '') + '\"));';\n    return sym;\n  }\n\n  Hogan.codegen = {\n    '#': function(node, context) {\n      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),' +\n                      'c,p,0,' + node.i + ',' + node.end + ',\"' + node.otag + \" \" + node.ctag + '\")){' +\n                      't.rs(c,p,' + 'function(c,p,t){';\n      Hogan.walk(node.nodes, context);\n      context.code += '});c.pop();}';\n    },\n\n    '^': function(node, context) {\n      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),c,p,1,0,0,\"\")){';\n      Hogan.walk(node.nodes, context);\n      context.code += '};';\n    },\n\n    '>': createPartial,\n    '<': function(node, context) {\n      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};\n      Hogan.walk(node.nodes, ctx);\n      var template = context.partials[createPartial(node, context)];\n      template.subs = ctx.subs;\n      template.partials = ctx.partials;\n    },\n\n    '$': function(node, context) {\n      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};\n      Hogan.walk(node.nodes, ctx);\n      context.subs[node.n] = ctx.code;\n      if (!context.inPartial) {\n        context.code += 't.sub(\"' + esc(node.n) + '\",c,p,i);';\n      }\n    },\n\n    '\\n': function(node, context) {\n      context.code += write('\"\\\\n\"' + (node.last ? '' : ' + i'));\n    },\n\n    '_v': function(node, context) {\n      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n    },\n\n    '_t': function(node, context) {\n      context.code += write('\"' + esc(node.text) + '\"');\n    },\n\n    '{': tripleStache,\n\n    '&': tripleStache\n  }\n\n  function tripleStache(node, context) {\n    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n  }\n\n  function write(s) {\n    return 't.b(' + s + ');';\n  }\n\n  Hogan.walk = function(nodelist, context) {\n    var func;\n    for (var i = 0, l = nodelist.length; i < l; i++) {\n      func = Hogan.codegen[nodelist[i].tag];\n      func && func(nodelist[i], context);\n    }\n    return context;\n  }\n\n  Hogan.parse = function(tokens, text, options) {\n    options = options || {};\n    return buildTree(tokens, '', [], options.sectionTags || []);\n  }\n\n  Hogan.cache = {};\n\n  Hogan.cacheKey = function(text, options) {\n    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');\n  }\n\n  Hogan.compile = function(text, options) {\n    options = options || {};\n    var key = Hogan.cacheKey(text, options);\n    var template = this.cache[key];\n\n    if (template) {\n      var partials = template.partials;\n      for (var name in partials) {\n        delete partials[name].instance;\n      }\n      return template;\n    }\n\n    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n    return this.cache[key] = template;\n  }\n})(typeof exports !== 'undefined' ? exports : Hogan);\n","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n// This file is for use with Node.js. See dist/ for browser files.\n\nvar Hogan = require('./compiler');\nHogan.Template = require('./template').Template;\nHogan.template = Hogan.Template;\nmodule.exports = Hogan;\n","var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","import{h as r,Component as o,render as t}from\"preact\";export{h,render,Component}from\"preact\";import e from\"htm\";var m=e.bind(r);export{m as html};\n","function _extends() {\n  module.exports = _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _extends.apply(this, arguments);\n}\nmodule.exports = _extends, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nmodule.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"parts\", \"highlightedTagName\", \"nonHighlightedTagName\", \"separator\", \"className\", \"classNames\"];\nimport { cx } from '@algolia/ui-components-shared'; // Basic types to allow this file to compile without a JSX implementation.\n// This is a minimal subset of the actual types from the `JSX` namespace.\n\nfunction createHighlightPartComponent(_ref) {\n  var createElement = _ref.createElement;\n  return function HighlightPart(_ref2) {\n    var classNames = _ref2.classNames,\n        children = _ref2.children,\n        highlightedTagName = _ref2.highlightedTagName,\n        isHighlighted = _ref2.isHighlighted,\n        nonHighlightedTagName = _ref2.nonHighlightedTagName;\n    var TagName = isHighlighted ? highlightedTagName : nonHighlightedTagName;\n    return createElement(TagName, {\n      className: isHighlighted ? classNames.highlighted : classNames.nonHighlighted\n    }, children);\n  };\n}\n\nexport function createHighlightComponent(_ref3) {\n  var createElement = _ref3.createElement,\n      Fragment = _ref3.Fragment;\n  var HighlightPart = createHighlightPartComponent({\n    createElement: createElement,\n    Fragment: Fragment\n  });\n  return function Highlight(_ref4) {\n    var parts = _ref4.parts,\n        _ref4$highlightedTagN = _ref4.highlightedTagName,\n        highlightedTagName = _ref4$highlightedTagN === void 0 ? 'mark' : _ref4$highlightedTagN,\n        _ref4$nonHighlightedT = _ref4.nonHighlightedTagName,\n        nonHighlightedTagName = _ref4$nonHighlightedT === void 0 ? 'span' : _ref4$nonHighlightedT,\n        _ref4$separator = _ref4.separator,\n        separator = _ref4$separator === void 0 ? ', ' : _ref4$separator,\n        className = _ref4.className,\n        _ref4$classNames = _ref4.classNames,\n        classNames = _ref4$classNames === void 0 ? {} : _ref4$classNames,\n        props = _objectWithoutProperties(_ref4, _excluded);\n\n    return createElement(\"span\", _extends({}, props, {\n      className: cx(classNames.root, className)\n    }), parts.map(function (part, partIndex) {\n      var isLastPart = partIndex === parts.length - 1;\n      return createElement(Fragment, {\n        key: partIndex\n      }, part.map(function (subPart, subPartIndex) {\n        return createElement(HighlightPart, {\n          key: subPartIndex,\n          classNames: classNames,\n          highlightedTagName: highlightedTagName,\n          nonHighlightedTagName: nonHighlightedTagName,\n          isHighlighted: subPart.isHighlighted\n        }, subPart.value);\n      }), !isLastPart && createElement(\"span\", {\n        className: classNames.separator\n      }, separator));\n    }));\n  };\n}","import { createHighlightComponent } from '@algolia/ui-components-highlight-vdom';\nimport { createElement, Fragment } from 'preact';\nexport var InternalHighlight = createHighlightComponent({\n  createElement: createElement,\n  Fragment: Fragment\n});","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { cx } from '@algolia/ui-components-shared';\nimport { h } from 'preact';\nimport { InternalHighlight } from \"../InternalHighlight/InternalHighlight.js\";\nexport function Highlight(_ref) {\n  var _ref$classNames = _ref.classNames,\n      classNames = _ref$classNames === void 0 ? {} : _ref$classNames,\n      props = _objectWithoutProperties(_ref, [\"classNames\"]);\n\n  return h(InternalHighlight, _extends({\n    classNames: {\n      root: cx('ais-Highlight', classNames.root),\n      highlighted: cx('ais-Highlight-highlighted', classNames.highlighted),\n      nonHighlighted: cx('ais-Highlight-nonHighlighted', classNames.nonHighlighted),\n      separator: cx('ais-Highlight-separator', classNames.separator)\n    }\n  }, props));\n}","export function toArray(value) {\n  return Array.isArray(value) ? value : [value];\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { h } from 'preact';\nimport { Highlight as HighlightUiComponent } from \"../../components/Highlight/Highlight.js\";\nimport { getPropertyByPath, unescape, toArray, warning, getHighlightedParts } from \"../../lib/utils/index.js\";\nexport function Highlight(_ref) {\n  var hit = _ref.hit,\n      attribute = _ref.attribute,\n      cssClasses = _ref.cssClasses,\n      props = _objectWithoutProperties(_ref, [\"hit\", \"attribute\", \"cssClasses\"]);\n\n  var property = getPropertyByPath(hit._highlightResult, attribute) || [];\n  var properties = toArray(property);\n  process.env.NODE_ENV === 'development' ? warning(Boolean(properties.length), \"Could not enable highlight for \\\"\".concat(attribute.toString(), \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is either searchable or specified in `attributesToHighlight`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n  var parts = properties.map(function (_ref2) {\n    var value = _ref2.value;\n    return getHighlightedParts(unescape(value || ''));\n  });\n  return h(HighlightUiComponent, _extends({}, props, {\n    parts: parts,\n    classNames: cssClasses\n  }));\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { cx } from '@algolia/ui-components-shared';\nimport { h } from 'preact';\nimport { InternalHighlight } from \"../InternalHighlight/InternalHighlight.js\";\nexport function ReverseHighlight(_ref) {\n  var _ref$classNames = _ref.classNames,\n      classNames = _ref$classNames === void 0 ? {} : _ref$classNames,\n      props = _objectWithoutProperties(_ref, [\"classNames\"]);\n\n  return h(InternalHighlight, _extends({\n    classNames: {\n      root: cx('ais-ReverseHighlight', classNames.root),\n      highlighted: cx('ais-ReverseHighlight-highlighted', classNames.highlighted),\n      nonHighlighted: cx('ais-ReverseHighlight-nonHighlighted', classNames.nonHighlighted),\n      separator: cx('ais-ReverseHighlight-separator', classNames.separator)\n    }\n  }, props));\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { h } from 'preact';\nimport { ReverseHighlight as ReverseHighlightUiComponent } from \"../../components/ReverseHighlight/ReverseHighlight.js\";\nimport { getPropertyByPath, unescape, toArray, warning, getHighlightedParts } from \"../../lib/utils/index.js\";\nexport function ReverseHighlight(_ref) {\n  var hit = _ref.hit,\n      attribute = _ref.attribute,\n      cssClasses = _ref.cssClasses,\n      props = _objectWithoutProperties(_ref, [\"hit\", \"attribute\", \"cssClasses\"]);\n\n  var property = getPropertyByPath(hit._highlightResult, attribute) || [];\n  var properties = toArray(property);\n  process.env.NODE_ENV === 'development' ? warning(Boolean(properties.length), \"Could not enable highlight for \\\"\".concat(attribute.toString(), \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is either searchable or specified in `attributesToHighlight`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n  var parts = properties.map(function (_ref2) {\n    var value = _ref2.value;\n    return getHighlightedParts(unescape(value || '')).map(function (_ref3) {\n      var isHighlighted = _ref3.isHighlighted,\n          rest = _objectWithoutProperties(_ref3, [\"isHighlighted\"]);\n\n      return _objectSpread(_objectSpread({}, rest), {}, {\n        isHighlighted: !isHighlighted\n      });\n    });\n  });\n  return h(ReverseHighlightUiComponent, _extends({}, props, {\n    parts: parts,\n    classNames: cssClasses\n  }));\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { cx } from '@algolia/ui-components-shared';\nimport { h } from 'preact';\nimport { InternalHighlight } from \"../InternalHighlight/InternalHighlight.js\";\nexport function ReverseSnippet(_ref) {\n  var _ref$classNames = _ref.classNames,\n      classNames = _ref$classNames === void 0 ? {} : _ref$classNames,\n      props = _objectWithoutProperties(_ref, [\"classNames\"]);\n\n  return h(InternalHighlight, _extends({\n    classNames: {\n      root: cx('ais-ReverseSnippet', classNames.root),\n      highlighted: cx('ais-ReverseSnippet-highlighted', classNames.highlighted),\n      nonHighlighted: cx('ais-ReverseSnippet-nonHighlighted', classNames.nonHighlighted),\n      separator: cx('ais-ReverseSnippet-separator', classNames.separator)\n    }\n  }, props));\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { h } from 'preact';\nimport { ReverseSnippet as ReverseSnippetUiComponent } from \"../../components/ReverseSnippet/ReverseSnippet.js\";\nimport { getPropertyByPath, unescape, toArray, warning, getHighlightedParts } from \"../../lib/utils/index.js\";\nexport function ReverseSnippet(_ref) {\n  var hit = _ref.hit,\n      attribute = _ref.attribute,\n      cssClasses = _ref.cssClasses,\n      props = _objectWithoutProperties(_ref, [\"hit\", \"attribute\", \"cssClasses\"]);\n\n  var property = getPropertyByPath(hit._snippetResult, attribute) || [];\n  var properties = toArray(property);\n  process.env.NODE_ENV === 'development' ? warning(Boolean(properties.length), \"Could not enable snippet for \\\"\".concat(attribute.toString(), \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is specified in `attributesToSnippet`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n  var parts = properties.map(function (_ref2) {\n    var value = _ref2.value;\n    return getHighlightedParts(unescape(value || '')).map(function (_ref3) {\n      var isHighlighted = _ref3.isHighlighted,\n          rest = _objectWithoutProperties(_ref3, [\"isHighlighted\"]);\n\n      return _objectSpread(_objectSpread({}, rest), {}, {\n        isHighlighted: !isHighlighted\n      });\n    });\n  });\n  return h(ReverseSnippetUiComponent, _extends({}, props, {\n    parts: parts,\n    classNames: cssClasses\n  }));\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { cx } from '@algolia/ui-components-shared';\nimport { h } from 'preact';\nimport { InternalHighlight } from \"../InternalHighlight/InternalHighlight.js\";\nexport function Snippet(_ref) {\n  var _ref$classNames = _ref.classNames,\n      classNames = _ref$classNames === void 0 ? {} : _ref$classNames,\n      props = _objectWithoutProperties(_ref, [\"classNames\"]);\n\n  return h(InternalHighlight, _extends({\n    classNames: {\n      root: cx('ais-Snippet', classNames.root),\n      highlighted: cx('ais-Snippet-highlighted', classNames.highlighted),\n      nonHighlighted: cx('ais-Snippet-nonHighlighted', classNames.nonHighlighted),\n      separator: cx('ais-Snippet-separator', classNames.separator)\n    }\n  }, props));\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { h } from 'preact';\nimport { Snippet as SnippetUiComponent } from \"../../components/Snippet/Snippet.js\";\nimport { getPropertyByPath, unescape, toArray, warning, getHighlightedParts } from \"../../lib/utils/index.js\";\nexport function Snippet(_ref) {\n  var hit = _ref.hit,\n      attribute = _ref.attribute,\n      cssClasses = _ref.cssClasses,\n      props = _objectWithoutProperties(_ref, [\"hit\", \"attribute\", \"cssClasses\"]);\n\n  var property = getPropertyByPath(hit._snippetResult, attribute) || [];\n  var properties = toArray(property);\n  process.env.NODE_ENV === 'development' ? warning(Boolean(properties.length), \"Could not enable snippet for \\\"\".concat(attribute.toString(), \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is specified in `attributesToSnippet`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n  var parts = properties.map(function (_ref2) {\n    var value = _ref2.value;\n    return getHighlightedParts(unescape(value || ''));\n  });\n  return h(SnippetUiComponent, _extends({}, props, {\n    parts: parts,\n    classNames: cssClasses\n  }));\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport hogan from 'hogan.js';\nimport { html } from 'htm/preact';\nimport { Highlight, ReverseHighlight, ReverseSnippet, Snippet } from \"../../helpers/components/index.js\";\n\n// We add all our template helper methods to the template as lambdas. Note\n// that lambdas in Mustache are supposed to accept a second argument of\n// `render` to get the rendered value, not the literal `{{value}}`. But\n// this is currently broken (see https://github.com/twitter/hogan.js/issues/222).\nfunction transformHelpersToHogan() {\n  var helpers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var compileOptions = arguments.length > 1 ? arguments[1] : undefined;\n  var data = arguments.length > 2 ? arguments[2] : undefined;\n  return Object.keys(helpers).reduce(function (acc, helperKey) {\n    return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, helperKey, function () {\n      var _this = this;\n\n      return function (text) {\n        var render = function render(value) {\n          return hogan.compile(value, compileOptions).render(_this);\n        };\n\n        return helpers[helperKey].call(data, text, render);\n      };\n    }));\n  }, {});\n}\n\nexport function renderTemplate(_ref) {\n  var templates = _ref.templates,\n      templateKey = _ref.templateKey,\n      compileOptions = _ref.compileOptions,\n      helpers = _ref.helpers,\n      data = _ref.data,\n      bindEvent = _ref.bindEvent,\n      sendEvent = _ref.sendEvent;\n  var template = templates[templateKey];\n\n  if (typeof template !== 'string' && typeof template !== 'function') {\n    throw new Error(\"Template must be 'string' or 'function', was '\".concat(_typeof(template), \"' (key: \").concat(templateKey, \")\"));\n  }\n\n  if (typeof template === 'function') {\n    // @MAJOR no longer pass bindEvent when string templates are removed\n    var params = bindEvent || {};\n    params.html = html;\n    params.sendEvent = sendEvent;\n    params.components = {\n      Highlight: Highlight,\n      ReverseHighlight: ReverseHighlight,\n      Snippet: Snippet,\n      ReverseSnippet: ReverseSnippet\n    };\n    return template(data, params);\n  }\n\n  var transformedHelpers = transformHelpersToHogan(helpers, compileOptions, data);\n  return hogan.compile(template, compileOptions).render(_objectSpread(_objectSpread({}, data), {}, {\n    helpers: transformedHelpers\n  })).replace(/[ \\n\\r\\t\\f\\xA0]+/g, function (spaces) {\n    return spaces.replace(/(^|\\xA0+)[^\\xA0]+/g, '$1 ');\n  }).trim();\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { h, Component } from 'preact';\nimport { warning, isEqual } from \"../../lib/utils/index.js\";\nimport { renderTemplate } from \"../../lib/templating/index.js\";\nvar defaultProps = {\n  data: {},\n  rootTagName: 'div',\n  useCustomCompileOptions: {},\n  templates: {},\n  templatesConfig: {}\n};\n\n// @TODO: Template should be a generic and receive TData to pass to Templates (to avoid TTemplateData to be set as `any`)\nvar Template = /*#__PURE__*/function (_Component) {\n  _inherits(Template, _Component);\n\n  var _super = _createSuper(Template);\n\n  function Template() {\n    _classCallCheck(this, Template);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Template, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return !isEqual(this.props.data, nextProps.data) || this.props.templateKey !== nextProps.templateKey || !isEqual(this.props.rootProps, nextProps.rootProps);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      process.env.NODE_ENV === 'development' ? warning(Object.keys(this.props.templates).every(function (key) {\n        return typeof _this.props.templates[key] === 'function';\n      }), \"Hogan.js and string-based templates are deprecated and will not be supported in InstantSearch.js 5.x.\\n\\nYou can replace them with function-form templates and use either the provided `html` function or JSX templates.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/upgrade-guides/js/#upgrade-templates\") : void 0;\n      var RootTagName = this.props.rootTagName;\n      var useCustomCompileOptions = this.props.useCustomCompileOptions[this.props.templateKey];\n      var compileOptions = useCustomCompileOptions ? this.props.templatesConfig.compileOptions : {};\n      var content = renderTemplate({\n        templates: this.props.templates,\n        templateKey: this.props.templateKey,\n        compileOptions: compileOptions,\n        helpers: this.props.templatesConfig.helpers,\n        data: this.props.data,\n        bindEvent: this.props.bindEvent,\n        sendEvent: this.props.sendEvent\n      });\n\n      if (content === null) {\n        // Adds a noscript to the DOM but virtual DOM is null\n        // See http://facebook.github.io/react/docs/component-specs.html#render\n        return null;\n      }\n\n      if (_typeof(content) === 'object') {\n        return h(RootTagName, this.props.rootProps, content);\n      }\n\n      return h(RootTagName, _extends({}, this.props.rootProps, {\n        dangerouslySetInnerHTML: {\n          __html: content\n        }\n      }));\n    }\n  }]);\n\n  return Template;\n}(Component);\n\n_defineProperty(Template, \"defaultProps\", defaultProps);\n\nexport default Template;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { h } from 'preact';\nimport { cx } from '@algolia/ui-components-shared';\nimport Template from \"../Template/Template.js\";\n\nvar Hits = function Hits(_ref) {\n  var results = _ref.results,\n      hits = _ref.hits,\n      bindEvent = _ref.bindEvent,\n      sendEvent = _ref.sendEvent,\n      cssClasses = _ref.cssClasses,\n      templateProps = _ref.templateProps;\n\n  if (results.hits.length === 0) {\n    return h(Template, _extends({}, templateProps, {\n      templateKey: \"empty\",\n      rootProps: {\n        className: cx(cssClasses.root, cssClasses.emptyRoot)\n      },\n      data: results\n    }));\n  }\n\n  return h(\"div\", {\n    className: cssClasses.root\n  }, h(\"ol\", {\n    className: cssClasses.list\n  }, hits.map(function (hit, index) {\n    return h(Template, _extends({}, templateProps, {\n      templateKey: \"item\",\n      rootTagName: \"li\",\n      rootProps: {\n        className: cssClasses.item\n      },\n      key: hit.objectID,\n      data: _objectSpread(_objectSpread({}, hit), {}, {\n        __hitIndex: index\n      }),\n      bindEvent: bindEvent,\n      sendEvent: sendEvent\n    }));\n  })));\n};\n\nexport default Hits;","var defaultTemplates = {\n  empty: function empty() {\n    return 'No results';\n  },\n  item: function item(data) {\n    return JSON.stringify(data, null, 2);\n  }\n};\nexport default defaultTemplates;","import { isDomElement } from \"./isDomElement.js\";\n/**\n * Return the container. If it's a string, it is considered a\n * css selector and retrieves the first matching element. Otherwise\n * test if it validates that it's a correct DOMElement.\n *\n * @param {string|HTMLElement} selectorOrHTMLElement CSS Selector or container node.\n * @return {HTMLElement} Container node\n * @throws Error when the type is not correct\n */\n\nexport function getContainerNode(selectorOrHTMLElement) {\n  var isSelectorString = typeof selectorOrHTMLElement === 'string';\n  var domElement = isSelectorString ? document.querySelector(selectorOrHTMLElement) : selectorOrHTMLElement;\n\n  if (!isDomElement(domElement)) {\n    var errorMessage = 'Container must be `string` or `HTMLElement`.';\n\n    if (isSelectorString) {\n      errorMessage += \" Unable to find \".concat(selectorOrHTMLElement);\n    }\n\n    throw new Error(errorMessage);\n  }\n\n  return domElement;\n}","export function isDomElement(object) {\n  return object instanceof HTMLElement || Boolean(object) && object.nodeType > 0;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { uniq } from \"../utils/uniq.js\";\n\nfunction prepareTemplates( // can not use = {} here, since the template could have different constraints\ndefaultTemplates) {\n  var templates = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var allKeys = uniq([].concat(_toConsumableArray(Object.keys(defaultTemplates || {})), _toConsumableArray(Object.keys(templates))));\n  return allKeys.reduce(function (config, key) {\n    var defaultTemplate = defaultTemplates ? defaultTemplates[key] : undefined;\n    var customTemplate = templates[key];\n    var isCustomTemplate = customTemplate !== undefined && customTemplate !== defaultTemplate;\n    config.templates[key] = isCustomTemplate ? customTemplate // typescript doesn't recognize that this condition asserts customTemplate is defined\n    : defaultTemplate;\n    config.useCustomCompileOptions[key] = isCustomTemplate;\n    return config;\n  }, {\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    templates: {},\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    useCustomCompileOptions: {}\n  });\n}\n/**\n * Prepares an object to be passed to the Template widget\n */\n\n\nexport function prepareTemplateProps(_ref) {\n  var defaultTemplates = _ref.defaultTemplates,\n      templates = _ref.templates,\n      templatesConfig = _ref.templatesConfig;\n  var preparedTemplates = prepareTemplates(defaultTemplates, templates);\n  return _objectSpread({\n    templatesConfig: templatesConfig\n  }, preparedTemplates);\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { uniq, find, createDocumentationMessageGenerator, warning } from \"../utils/index.js\";\n\nvar getSelectedHits = function getSelectedHits(hits, selectedObjectIDs) {\n  return selectedObjectIDs.map(function (objectID) {\n    var hit = find(hits, function (h) {\n      return h.objectID === objectID;\n    });\n\n    if (typeof hit === 'undefined') {\n      throw new Error(\"Could not find objectID \\\"\".concat(objectID, \"\\\" passed to `clickedObjectIDsAfterSearch` in the returned hits. This is necessary to infer the absolute position and the query ID.\"));\n    }\n\n    return hit;\n  });\n};\n\nvar getQueryID = function getQueryID(selectedHits) {\n  var queryIDs = uniq(selectedHits.map(function (hit) {\n    return hit.__queryID;\n  }));\n\n  if (queryIDs.length > 1) {\n    throw new Error('Insights currently allows a single `queryID`. The `objectIDs` provided map to multiple `queryID`s.');\n  }\n\n  var queryID = queryIDs[0];\n\n  if (typeof queryID !== 'string') {\n    throw new Error(\"Could not infer `queryID`. Ensure InstantSearch `clickAnalytics: true` was added with the Configure widget.\\n\\nSee: https://alg.li/lNiZZ7\");\n  }\n\n  return queryID;\n};\n\nvar getPositions = function getPositions(selectedHits) {\n  return selectedHits.map(function (hit) {\n    return hit.__position;\n  });\n};\n\nexport var inferPayload = function inferPayload(_ref) {\n  var method = _ref.method,\n      results = _ref.results,\n      hits = _ref.hits,\n      objectIDs = _ref.objectIDs;\n  var index = results.index;\n  var selectedHits = getSelectedHits(hits, objectIDs);\n  var queryID = getQueryID(selectedHits);\n\n  switch (method) {\n    case 'clickedObjectIDsAfterSearch':\n      {\n        var positions = getPositions(selectedHits);\n        return {\n          index: index,\n          queryID: queryID,\n          objectIDs: objectIDs,\n          positions: positions\n        };\n      }\n\n    case 'convertedObjectIDsAfterSearch':\n      return {\n        index: index,\n        queryID: queryID,\n        objectIDs: objectIDs\n      };\n\n    default:\n      throw new Error(\"Unsupported method passed to insights: \\\"\".concat(method, \"\\\".\"));\n  }\n};\n\nvar wrapInsightsClient = function wrapInsightsClient(aa, results, hits) {\n  return function (method) {\n    for (var _len = arguments.length, payloads = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      payloads[_key - 1] = arguments[_key];\n    }\n\n    var payload = payloads[0];\n    process.env.NODE_ENV === 'development' ? warning(false, \"`insights` function has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\\n\\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\") : void 0;\n\n    if (!aa) {\n      var withInstantSearchUsage = createDocumentationMessageGenerator({\n        name: 'instantsearch'\n      });\n      throw new Error(withInstantSearchUsage('The `insightsClient` option has not been provided to `instantsearch`.'));\n    }\n\n    if (!Array.isArray(payload.objectIDs)) {\n      throw new TypeError('Expected `objectIDs` to be an array.');\n    }\n\n    var inferredPayload = inferPayload({\n      method: method,\n      results: results,\n      hits: hits,\n      objectIDs: payload.objectIDs\n    });\n    aa(method, _objectSpread(_objectSpread({}, inferredPayload), payload));\n  };\n};\n/**\n * @deprecated This function will be still supported in 4.x releases, but not further. It is replaced by the `insights` middleware. For more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\n * It passes `insights` to `HitsWithInsightsListener` and `InfiniteHitsWithInsightsListener`.\n */\n\n\nexport default function withInsights(connector) {\n  return function (renderFn, unmountFn) {\n    return connector(function (renderOptions, isFirstRender) {\n      var results = renderOptions.results,\n          hits = renderOptions.hits,\n          instantSearchInstance = renderOptions.instantSearchInstance;\n\n      if (results && hits && instantSearchInstance) {\n        var insights = wrapInsightsClient(instantSearchInstance.insightsClient, results, hits);\n        return renderFn(_objectSpread(_objectSpread({}, renderOptions), {}, {\n          insights: insights\n        }), isFirstRender);\n      }\n\n      return renderFn(renderOptions, isFirstRender);\n    }, unmountFn);\n  };\n}","// We aren't using the native `Array.prototype.find` because the refactor away from Lodash is not\n// published as a major version.\n// Relying on the `find` polyfill on user-land, which before was only required for niche use-cases,\n// was decided as too risky.\n// @MAJOR Replace with the native `Array.prototype.find` method\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\nexport function find(items, predicate) {\n  var value;\n\n  for (var i = 0; i < items.length; i++) {\n    value = items[i]; // inlined for performance: if (Call(predicate, thisArg, [value, i, list])) {\n\n    if (predicate(value, i, items)) {\n      return value;\n    }\n  }\n\n  return undefined;\n}","import { h } from 'preact';\nimport { deserializePayload } from \"../utils/index.js\";\nimport { readDataAttributes, hasDataAttributes } from \"../../helpers/insights.js\";\n\nvar findInsightsTarget = function findInsightsTarget(startElement, endElement, validator) {\n  var element = startElement;\n\n  while (element && !validator(element)) {\n    if (element === endElement) {\n      return null;\n    }\n\n    element = element.parentElement;\n  }\n\n  return element;\n};\n\nvar parseInsightsEvent = function parseInsightsEvent(element) {\n  var serializedPayload = element.getAttribute('data-insights-event');\n\n  if (typeof serializedPayload !== 'string') {\n    throw new Error('The insights middleware expects `data-insights-event` to be a base64-encoded JSON string.');\n  }\n\n  try {\n    return deserializePayload(serializedPayload);\n  } catch (error) {\n    throw new Error('The insights middleware was unable to parse `data-insights-event`.');\n  }\n};\n\nvar insightsListener = function insightsListener(BaseComponent) {\n  function WithInsightsListener(props) {\n    var handleClick = function handleClick(event) {\n      if (props.sendEvent) {\n        // new way with insights middleware\n        var targetWithEvent = findInsightsTarget(event.target, event.currentTarget, function (element) {\n          return element.hasAttribute('data-insights-event');\n        });\n\n        if (targetWithEvent) {\n          var payload = parseInsightsEvent(targetWithEvent);\n          payload.forEach(function (single) {\n            return props.sendEvent(single);\n          });\n        }\n      } // old way, e.g. instantsearch.insights(\"clickedObjectIDsAfterSearch\", { .. })\n\n\n      var insightsTarget = findInsightsTarget(event.target, event.currentTarget, function (element) {\n        return hasDataAttributes(element);\n      });\n\n      if (insightsTarget) {\n        var _readDataAttributes = readDataAttributes(insightsTarget),\n            method = _readDataAttributes.method,\n            _payload = _readDataAttributes.payload;\n\n        props.insights(method, _payload);\n      }\n    };\n\n    return h(\"div\", {\n      onClick: handleClick\n    }, h(BaseComponent, props));\n  }\n\n  return WithInsightsListener;\n};\n\nexport default insightsListener;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { h, render } from 'preact';\nimport { cx } from '@algolia/ui-components-shared';\nimport connectHits from \"../../connectors/hits/connectHits.js\";\nimport Hits from \"../../components/Hits/Hits.js\";\nimport defaultTemplates from \"./defaultTemplates.js\";\nimport { getContainerNode, createDocumentationMessageGenerator } from \"../../lib/utils/index.js\";\nimport { prepareTemplateProps } from \"../../lib/templating/index.js\";\nimport { component } from \"../../lib/suit.js\";\nimport { withInsights, withInsightsListener } from \"../../lib/insights/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'hits'\n});\nvar suit = component('Hits');\nvar HitsWithInsightsListener = withInsightsListener(Hits);\n\nvar renderer = function renderer(_ref) {\n  var renderState = _ref.renderState,\n      cssClasses = _ref.cssClasses,\n      containerNode = _ref.containerNode,\n      templates = _ref.templates;\n  return function (_ref2, isFirstRendering) {\n    var receivedHits = _ref2.hits,\n        results = _ref2.results,\n        instantSearchInstance = _ref2.instantSearchInstance,\n        insights = _ref2.insights,\n        bindEvent = _ref2.bindEvent;\n\n    if (isFirstRendering) {\n      renderState.templateProps = prepareTemplateProps({\n        defaultTemplates: defaultTemplates,\n        templatesConfig: instantSearchInstance.templatesConfig,\n        templates: templates\n      });\n      return;\n    }\n\n    render(h(HitsWithInsightsListener, {\n      cssClasses: cssClasses,\n      hits: receivedHits,\n      results: results,\n      templateProps: renderState.templateProps,\n      insights: insights,\n      sendEvent: function sendEvent(event) {\n        instantSearchInstance.sendEventToInsights(event);\n      },\n      bindEvent: bindEvent\n    }), containerNode);\n  };\n};\n\nvar hits = function hits(widgetParams) {\n  var _ref3 = widgetParams || {},\n      container = _ref3.container,\n      escapeHTML = _ref3.escapeHTML,\n      transformItems = _ref3.transformItems,\n      _ref3$templates = _ref3.templates,\n      templates = _ref3$templates === void 0 ? {} : _ref3$templates,\n      _ref3$cssClasses = _ref3.cssClasses,\n      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses;\n\n  if (!container) {\n    throw new Error(withUsage('The `container` option is required.'));\n  }\n\n  var containerNode = getContainerNode(container);\n  var cssClasses = {\n    root: cx(suit(), userCssClasses.root),\n    emptyRoot: cx(suit({\n      modifierName: 'empty'\n    }), userCssClasses.emptyRoot),\n    list: cx(suit({\n      descendantName: 'list'\n    }), userCssClasses.list),\n    item: cx(suit({\n      descendantName: 'item'\n    }), userCssClasses.item)\n  };\n  var specializedRenderer = renderer({\n    containerNode: containerNode,\n    cssClasses: cssClasses,\n    renderState: {},\n    templates: templates\n  });\n  var makeWidget = withInsights(connectHits)(specializedRenderer, function () {\n    return render(null, containerNode);\n  });\n  return _objectSpread(_objectSpread({}, makeWidget({\n    escapeHTML: escapeHTML,\n    transformItems: transformItems\n  })), {}, {\n    $$widgetType: 'ais.hits'\n  });\n};\n\nexport default hits;","export function isSpecialClick(event) {\n  var isMiddleClick = event.button === 1;\n  return isMiddleClick || event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { h } from 'preact';\nimport Template from \"../Template/Template.js\";\n\nfunction RefinementListItem(_ref) {\n  var className = _ref.className,\n      handleClick = _ref.handleClick,\n      facetValueToRefine = _ref.facetValueToRefine,\n      isRefined = _ref.isRefined,\n      templateProps = _ref.templateProps,\n      templateKey = _ref.templateKey,\n      templateData = _ref.templateData,\n      subItems = _ref.subItems;\n  return h(\"li\", {\n    className: className,\n    onClick: function onClick(originalEvent) {\n      handleClick({\n        facetValueToRefine: facetValueToRefine,\n        isRefined: isRefined,\n        originalEvent: originalEvent\n      });\n    }\n  }, h(Template, _extends({}, templateProps, {\n    templateKey: templateKey,\n    data: templateData\n  })), subItems);\n}\n\nexport default RefinementListItem;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { h, createRef, Component } from 'preact';\nimport { noop } from \"../../lib/utils/index.js\";\nimport Template from \"../Template/Template.js\";\nvar defaultProps = {\n  query: '',\n  showSubmit: true,\n  showReset: true,\n  showLoadingIndicator: true,\n  autofocus: false,\n  searchAsYouType: true,\n  isSearchStalled: false,\n  disabled: false,\n  onChange: noop,\n  onSubmit: noop,\n  onReset: noop,\n  refine: noop\n};\n\nvar SearchBox = /*#__PURE__*/function (_Component) {\n  _inherits(SearchBox, _Component);\n\n  var _super = _createSuper(SearchBox);\n\n  function SearchBox() {\n    var _this;\n\n    _classCallCheck(this, SearchBox);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      query: _this.props.query,\n      focused: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"input\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"onInput\", function (event) {\n      var _this$props = _this.props,\n          searchAsYouType = _this$props.searchAsYouType,\n          refine = _this$props.refine,\n          onChange = _this$props.onChange;\n      var query = event.target.value;\n\n      if (searchAsYouType) {\n        refine(query);\n      }\n\n      _this.setState({\n        query: query\n      });\n\n      onChange(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function (event) {\n      var _this$props2 = _this.props,\n          searchAsYouType = _this$props2.searchAsYouType,\n          refine = _this$props2.refine,\n          onSubmit = _this$props2.onSubmit;\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (_this.input.current) {\n        _this.input.current.blur();\n      }\n\n      if (!searchAsYouType) {\n        refine(_this.state.query);\n      }\n\n      onSubmit(event);\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReset\", function (event) {\n      var _this$props3 = _this.props,\n          refine = _this$props3.refine,\n          onReset = _this$props3.onReset;\n      var query = '';\n\n      if (_this.input.current) {\n        _this.input.current.focus();\n      }\n\n      refine(query);\n\n      _this.setState({\n        query: query\n      });\n\n      onReset(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBlur\", function () {\n      _this.setState({\n        focused: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function () {\n      _this.setState({\n        focused: true\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(SearchBox, [{\n    key: \"resetInput\",\n    value:\n    /**\n     * This public method is used in the RefinementList SFFV search box\n     * to reset the input state when an item is selected.\n     *\n     * @see RefinementList#componentWillReceiveProps\n     * @return {undefined}\n     */\n    function resetInput() {\n      this.setState({\n        query: ''\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      /**\n       * when the user is typing, we don't want to replace the query typed\n       * by the user (state.query) with the query exposed by the connector (props.query)\n       * see: https://github.com/algolia/instantsearch.js/issues/4141\n       */\n      if (!this.state.focused && nextProps.query !== this.state.query) {\n        this.setState({\n          query: nextProps.query\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          cssClasses = _this$props4.cssClasses,\n          placeholder = _this$props4.placeholder,\n          autofocus = _this$props4.autofocus,\n          showSubmit = _this$props4.showSubmit,\n          showReset = _this$props4.showReset,\n          showLoadingIndicator = _this$props4.showLoadingIndicator,\n          templates = _this$props4.templates,\n          isSearchStalled = _this$props4.isSearchStalled;\n      return h(\"div\", {\n        className: cssClasses.root\n      }, h(\"form\", {\n        action: \"\",\n        role: \"search\",\n        className: cssClasses.form,\n        noValidate: true,\n        onSubmit: this.onSubmit,\n        onReset: this.onReset\n      }, h(\"input\", {\n        ref: this.input,\n        value: this.state.query,\n        disabled: this.props.disabled,\n        className: cssClasses.input,\n        type: \"search\",\n        placeholder: placeholder,\n        autoFocus: autofocus,\n        autoComplete: \"off\",\n        autoCorrect: \"off\",\n        autoCapitalize: \"off\" // @ts-expect-error `spellCheck` attribute is missing in preact JSX types\n        ,\n        spellCheck: \"false\",\n        maxLength: 512,\n        onInput: this.onInput,\n        onBlur: this.onBlur,\n        onFocus: this.onFocus\n      }), h(Template, {\n        templateKey: \"submit\",\n        rootTagName: \"button\",\n        rootProps: {\n          className: cssClasses.submit,\n          type: 'submit',\n          title: 'Submit the search query.',\n          hidden: !showSubmit\n        },\n        templates: templates,\n        data: {\n          cssClasses: cssClasses\n        }\n      }), h(Template, {\n        templateKey: \"reset\",\n        rootTagName: \"button\",\n        rootProps: {\n          className: cssClasses.reset,\n          type: 'reset',\n          title: 'Clear the search query.',\n          hidden: !(showReset && this.state.query.trim() && !isSearchStalled)\n        },\n        templates: templates,\n        data: {\n          cssClasses: cssClasses\n        }\n      }), showLoadingIndicator && h(Template, {\n        templateKey: \"loadingIndicator\",\n        rootTagName: \"span\",\n        rootProps: {\n          className: cssClasses.loadingIndicator,\n          hidden: !isSearchStalled\n        },\n        templates: templates,\n        data: {\n          cssClasses: cssClasses\n        }\n      })));\n    }\n  }]);\n\n  return SearchBox;\n}(Component);\n\n_defineProperty(SearchBox, \"defaultProps\", defaultProps);\n\nexport default SearchBox;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { h, createRef, Component } from 'preact';\nimport { cx } from '@algolia/ui-components-shared';\nimport { isSpecialClick, isEqual } from \"../../lib/utils/index.js\";\nimport Template from \"../Template/Template.js\";\nimport RefinementListItem from \"./RefinementListItem.js\";\nimport SearchBox from \"../SearchBox/SearchBox.js\";\nvar defaultProps = {\n  cssClasses: {},\n  depth: 0\n};\n\nfunction isHierarchicalMenuItem(facetValue) {\n  return facetValue.data !== undefined;\n}\n\nvar RefinementList = /*#__PURE__*/function (_Component) {\n  _inherits(RefinementList, _Component);\n\n  var _super = _createSuper(RefinementList);\n\n  function RefinementList(props) {\n    var _this;\n\n    _classCallCheck(this, RefinementList);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"searchBox\", createRef());\n\n    _this.handleItemClick = _this.handleItemClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(RefinementList, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var areFacetValuesDifferent = !isEqual(this.props.facetValues, nextProps.facetValues);\n      return areFacetValuesDifferent;\n    }\n  }, {\n    key: \"refine\",\n    value: function refine(facetValueToRefine) {\n      this.props.toggleRefinement(facetValueToRefine);\n    }\n  }, {\n    key: \"_generateFacetItem\",\n    value: function _generateFacetItem(facetValue) {\n      var subItems;\n\n      if (isHierarchicalMenuItem(facetValue) && Array.isArray(facetValue.data) && facetValue.data.length > 0) {\n        var _this$props$cssClasse = this.props.cssClasses,\n            root = _this$props$cssClasse.root,\n            cssClasses = _objectWithoutProperties(_this$props$cssClasse, [\"root\"]);\n\n        subItems = h(RefinementList, _extends({}, this.props, {\n          // We want to keep `root` required for external usage but not for the\n          // sub items.\n          cssClasses: cssClasses,\n          depth: this.props.depth + 1,\n          facetValues: facetValue.data,\n          showMore: false,\n          className: this.props.cssClasses.childList\n        }));\n      }\n\n      var url = this.props.createURL(facetValue.value);\n\n      var templateData = _objectSpread(_objectSpread({}, facetValue), {}, {\n        url: url,\n        attribute: this.props.attribute,\n        cssClasses: this.props.cssClasses,\n        isFromSearch: this.props.isFromSearch\n      });\n\n      var key = facetValue.value;\n\n      if (facetValue.isRefined !== undefined) {\n        key += \"/\".concat(facetValue.isRefined);\n      }\n\n      if (facetValue.count !== undefined) {\n        key += \"/\".concat(facetValue.count);\n      }\n\n      var refinementListItemClassName = cx(this.props.cssClasses.item, facetValue.isRefined && this.props.cssClasses.selectedItem, !facetValue.count && this.props.cssClasses.disabledItem, Boolean(isHierarchicalMenuItem(facetValue) && Array.isArray(facetValue.data) && facetValue.data.length > 0) && this.props.cssClasses.parentItem);\n      return h(RefinementListItem, {\n        templateKey: \"item\",\n        key: key,\n        facetValueToRefine: facetValue.value,\n        handleClick: this.handleItemClick,\n        isRefined: facetValue.isRefined,\n        className: refinementListItemClassName,\n        subItems: subItems,\n        templateData: templateData,\n        templateProps: this.props.templateProps\n      });\n    } // Click events on DOM tree like LABEL > INPUT will result in two click events\n    // instead of one.\n    // No matter the framework, see https://www.google.com/search?q=click+label+twice\n    //\n    // Thus making it hard to distinguish activation from deactivation because both click events\n    // are very close. Debounce is a solution but hacky.\n    //\n    // So the code here checks if the click was done on or in a LABEL. If this LABEL\n    // has a checkbox inside, we ignore the first click event because we will get another one.\n    //\n    // We also check if the click was done inside a link and then e.preventDefault() because we already\n    // handle the url\n    //\n    // Finally, we always stop propagation of the event to avoid multiple levels RefinementLists to fail: click\n    // on child would click on parent also\n\n  }, {\n    key: \"handleItemClick\",\n    value: function handleItemClick(_ref) {\n      var facetValueToRefine = _ref.facetValueToRefine,\n          isRefined = _ref.isRefined,\n          originalEvent = _ref.originalEvent;\n\n      if (isSpecialClick(originalEvent)) {\n        // do not alter the default browser behavior\n        // if one special key is down\n        return;\n      }\n\n      if (!(originalEvent.target instanceof HTMLElement) || !(originalEvent.target.parentNode instanceof HTMLElement)) {\n        return;\n      }\n\n      if (isRefined && originalEvent.target.parentNode.querySelector('input[type=\"radio\"]:checked')) {\n        // Prevent refinement for being reset if the user clicks on an already checked radio button\n        return;\n      }\n\n      if (originalEvent.target.tagName === 'INPUT') {\n        this.refine(facetValueToRefine);\n        return;\n      }\n\n      var parent = originalEvent.target;\n\n      while (parent !== originalEvent.currentTarget) {\n        if (parent.tagName === 'LABEL' && (parent.querySelector('input[type=\"checkbox\"]') || parent.querySelector('input[type=\"radio\"]'))) {\n          return;\n        }\n\n        if (parent.tagName === 'A' && parent.href) {\n          originalEvent.preventDefault();\n        }\n\n        parent = parent.parentNode;\n      }\n\n      originalEvent.stopPropagation();\n      this.refine(facetValueToRefine);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.searchBox.current && !nextProps.isFromSearch) {\n        this.searchBox.current.resetInput();\n      }\n    }\n  }, {\n    key: \"refineFirstValue\",\n    value: function refineFirstValue() {\n      var firstValue = this.props.facetValues && this.props.facetValues[0];\n\n      if (firstValue) {\n        var actualValue = firstValue.value;\n        this.props.toggleRefinement(actualValue);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var showMoreButtonClassName = cx(this.props.cssClasses.showMore, !(this.props.showMore === true && this.props.canToggleShowMore) && this.props.cssClasses.disabledShowMore);\n      var showMoreButton = this.props.showMore === true && h(Template, _extends({}, this.props.templateProps, {\n        templateKey: \"showMoreText\",\n        rootTagName: \"button\",\n        rootProps: {\n          className: showMoreButtonClassName,\n          disabled: !this.props.canToggleShowMore,\n          onClick: this.props.toggleShowMore\n        },\n        data: {\n          isShowingMore: this.props.isShowingMore\n        }\n      }));\n      var shouldDisableSearchBox = this.props.searchIsAlwaysActive !== true && !(this.props.isFromSearch || !this.props.hasExhaustiveItems);\n      var searchBox = this.props.searchFacetValues && h(\"div\", {\n        className: this.props.cssClasses.searchBox\n      }, h(SearchBox, {\n        ref: this.searchBox,\n        placeholder: this.props.searchPlaceholder,\n        disabled: shouldDisableSearchBox,\n        cssClasses: this.props.cssClasses.searchable,\n        templates: this.props.searchBoxTemplateProps.templates,\n        onChange: function onChange(event) {\n          return _this2.props.searchFacetValues(event.target.value);\n        },\n        onReset: function onReset() {\n          return _this2.props.searchFacetValues('');\n        },\n        onSubmit: function onSubmit() {\n          return _this2.refineFirstValue();\n        } // This sets the search box to a controlled state because\n        // we don't rely on the `refine` prop but on `onChange`.\n        ,\n        searchAsYouType: false\n      }));\n      var facetValues = this.props.facetValues && this.props.facetValues.length > 0 && h(\"ul\", {\n        className: this.props.cssClasses.list\n      }, this.props.facetValues.map(this._generateFacetItem, this));\n      var noResults = this.props.searchFacetValues && this.props.isFromSearch && (!this.props.facetValues || this.props.facetValues.length === 0) && h(Template, _extends({}, this.props.templateProps, {\n        templateKey: \"searchableNoResults\",\n        rootProps: {\n          className: this.props.cssClasses.noResults\n        }\n      }));\n      var rootClassName = cx(this.props.cssClasses.root, (!this.props.facetValues || this.props.facetValues.length === 0) && this.props.cssClasses.noRefinementRoot, this.props.className);\n      return h(\"div\", {\n        className: rootClassName\n      }, this.props.children, searchBox, facetValues, noResults, showMoreButton);\n    }\n  }]);\n\n  return RefinementList;\n}(Component);\n\n_defineProperty(RefinementList, \"defaultProps\", defaultProps);\n\nexport default RefinementList;","export function isFacetRefined(helper, facet, value) {\n  if (helper.state.isHierarchicalFacet(facet)) {\n    return helper.state.isHierarchicalFacetRefined(facet, value);\n  } else if (helper.state.isConjunctiveFacet(facet)) {\n    return helper.state.isFacetRefined(facet, value);\n  } else {\n    return helper.state.isDisjunctiveFacetRefined(facet, value);\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { isFacetRefined } from \"./isFacetRefined.js\";\nexport function createSendEventForFacet(_ref) {\n  var instantSearchInstance = _ref.instantSearchInstance,\n      helper = _ref.helper,\n      attr = _ref.attribute,\n      widgetType = _ref.widgetType;\n\n  var sendEventForFacet = function sendEventForFacet() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var eventType = args[0],\n        facetValue = args[1],\n        _args$ = args[2],\n        eventName = _args$ === void 0 ? 'Filter Applied' : _args$;\n    var attribute = typeof attr === 'string' ? attr : attr(facetValue);\n\n    if (args.length === 1 && _typeof(args[0]) === 'object') {\n      instantSearchInstance.sendEventToInsights(args[0]);\n    } else if (eventType === 'click' && (args.length === 2 || args.length === 3)) {\n      if (!isFacetRefined(helper, attribute, facetValue)) {\n        // send event only when the facet is being checked \"ON\"\n        instantSearchInstance.sendEventToInsights({\n          insightsMethod: 'clickedFilters',\n          widgetType: widgetType,\n          eventType: eventType,\n          payload: {\n            eventName: eventName,\n            index: helper.getIndex(),\n            filters: [\"\".concat(attribute, \":\").concat(facetValue)]\n          },\n          attribute: attribute\n        });\n      }\n    } else if (process.env.NODE_ENV === 'development') {\n      throw new Error(\"You need to pass two arguments like:\\n  sendEvent('click', facetValue);\\n\\nIf you want to send a custom payload, you can pass one object: sendEvent(customPayload);\\n\");\n    }\n  };\n\n  return sendEventForFacet;\n}","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, createSendEventForFacet, noop } from \"../../lib/utils/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'menu',\n  connector: true\n});\nvar DEFAULT_SORT = ['isRefined', 'name:asc'];\n\n/**\n * **Menu** connector provides the logic to build a widget that will give the user the ability to choose a single value for a specific facet. The typical usage of menu is for navigation in categories.\n *\n * This connector provides a `toggleShowMore()` function to display more or less items and a `refine()`\n * function to select an item. While selecting a new element, the `refine` will also unselect the\n * one that is currently selected.\n *\n * **Requirement:** the attribute passed as `attribute` must be present in \"attributes for faceting\" on the Algolia dashboard or configured as attributesForFaceting via a set settings call to the Algolia API.\n */\nvar connectMenu = function connectMenu(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _ref = widgetParams || {},\n        attribute = _ref.attribute,\n        _ref$limit = _ref.limit,\n        limit = _ref$limit === void 0 ? 10 : _ref$limit,\n        _ref$showMore = _ref.showMore,\n        showMore = _ref$showMore === void 0 ? false : _ref$showMore,\n        _ref$showMoreLimit = _ref.showMoreLimit,\n        showMoreLimit = _ref$showMoreLimit === void 0 ? 20 : _ref$showMoreLimit,\n        _ref$sortBy = _ref.sortBy,\n        sortBy = _ref$sortBy === void 0 ? DEFAULT_SORT : _ref$sortBy,\n        _ref$transformItems = _ref.transformItems,\n        transformItems = _ref$transformItems === void 0 ? function (items) {\n      return items;\n    } : _ref$transformItems;\n\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n\n    if (showMore === true && showMoreLimit <= limit) {\n      throw new Error(withUsage('The `showMoreLimit` option must be greater than `limit`.'));\n    }\n\n    var sendEvent;\n\n    var _createURL;\n\n    var _refine; // Provide the same function to the `renderFn` so that way the user\n    // has to only bind it once when `isFirstRendering` for instance\n\n\n    var isShowingMore = false;\n\n    var toggleShowMore = function toggleShowMore() {};\n\n    function createToggleShowMore(renderOptions, widget) {\n      return function () {\n        isShowingMore = !isShowingMore;\n        widget.render(renderOptions);\n      };\n    }\n\n    function cachedToggleShowMore() {\n      toggleShowMore();\n    }\n\n    function getLimit() {\n      return isShowingMore ? showMoreLimit : limit;\n    }\n\n    return {\n      $$type: 'ais.menu',\n      init: function init(initOptions) {\n        var instantSearchInstance = initOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        var instantSearchInstance = renderOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), false);\n      },\n      dispose: function dispose(_ref2) {\n        var state = _ref2.state;\n        unmountFn();\n        return state.removeHierarchicalFacet(attribute).setQueryParameter('maxValuesPerFacet', undefined);\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          menu: _objectSpread(_objectSpread({}, renderState.menu), {}, _defineProperty({}, attribute, this.getWidgetRenderState(renderOptions)))\n        });\n      },\n      getWidgetRenderState: function getWidgetRenderState(renderOptions) {\n        var results = renderOptions.results,\n            createURL = renderOptions.createURL,\n            instantSearchInstance = renderOptions.instantSearchInstance,\n            helper = renderOptions.helper;\n        var items = [];\n        var canToggleShowMore = false;\n\n        if (!sendEvent) {\n          sendEvent = createSendEventForFacet({\n            instantSearchInstance: instantSearchInstance,\n            helper: helper,\n            attribute: attribute,\n            widgetType: this.$$type\n          });\n        }\n\n        if (!_createURL) {\n          _createURL = function _createURL(facetValue) {\n            return createURL(helper.state.resetPage().toggleFacetRefinement(attribute, facetValue));\n          };\n        }\n\n        if (!_refine) {\n          _refine = function _refine(facetValue) {\n            var _helper$getHierarchic = helper.getHierarchicalFacetBreadcrumb(attribute),\n                _helper$getHierarchic2 = _slicedToArray(_helper$getHierarchic, 1),\n                refinedItem = _helper$getHierarchic2[0];\n\n            sendEvent('click', facetValue ? facetValue : refinedItem);\n            helper.toggleFacetRefinement(attribute, facetValue ? facetValue : refinedItem).search();\n          };\n        }\n\n        if (renderOptions.results) {\n          toggleShowMore = createToggleShowMore(renderOptions, this);\n        }\n\n        if (results) {\n          var facetValues = results.getFacetValues(attribute, {\n            sortBy: sortBy,\n            facetOrdering: sortBy === DEFAULT_SORT\n          });\n          var facetItems = facetValues && !Array.isArray(facetValues) && facetValues.data ? facetValues.data : [];\n          canToggleShowMore = showMore && (isShowingMore || facetItems.length > getLimit());\n          items = transformItems(facetItems.slice(0, getLimit()).map(function (_ref3) {\n            var label = _ref3.name,\n                value = _ref3.escapedValue,\n                path = _ref3.path,\n                item = _objectWithoutProperties(_ref3, [\"name\", \"escapedValue\", \"path\"]);\n\n            return _objectSpread(_objectSpread({}, item), {}, {\n              label: label,\n              value: value\n            });\n          }), {\n            results: results\n          });\n        }\n\n        return {\n          items: items,\n          createURL: _createURL,\n          refine: _refine,\n          sendEvent: sendEvent,\n          canRefine: items.length > 0,\n          widgetParams: widgetParams,\n          isShowingMore: isShowingMore,\n          toggleShowMore: cachedToggleShowMore,\n          canToggleShowMore: canToggleShowMore\n        };\n      },\n      getWidgetUiState: function getWidgetUiState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n\n        var _searchParameters$get = searchParameters.getHierarchicalFacetBreadcrumb(attribute),\n            _searchParameters$get2 = _slicedToArray(_searchParameters$get, 1),\n            value = _searchParameters$get2[0];\n\n        if (!value) {\n          return uiState;\n        }\n\n        return _objectSpread(_objectSpread({}, uiState), {}, {\n          menu: _objectSpread(_objectSpread({}, uiState.menu), {}, _defineProperty({}, attribute, value))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n        var value = uiState.menu && uiState.menu[attribute];\n        var withFacetConfiguration = searchParameters.removeHierarchicalFacet(attribute).addHierarchicalFacet({\n          name: attribute,\n          attributes: [attribute]\n        });\n        var currentMaxValuesPerFacet = withFacetConfiguration.maxValuesPerFacet || 0;\n        var nextMaxValuesPerFacet = Math.max(currentMaxValuesPerFacet, showMore ? showMoreLimit : limit);\n        var withMaxValuesPerFacet = withFacetConfiguration.setQueryParameter('maxValuesPerFacet', nextMaxValuesPerFacet);\n\n        if (!value) {\n          return withMaxValuesPerFacet.setQueryParameters({\n            hierarchicalFacetsRefinements: _objectSpread(_objectSpread({}, withMaxValuesPerFacet.hierarchicalFacetsRefinements), {}, _defineProperty({}, attribute, []))\n          });\n        }\n\n        return withMaxValuesPerFacet.addHierarchicalFacetRefinement(attribute, value);\n      }\n    };\n  };\n};\n\nexport default connectMenu;","import { h } from 'preact';\nimport { formatNumber } from \"../../lib/formatNumber.js\";\nimport { cx } from '@algolia/ui-components-shared';\nvar defaultTemplates = {\n  item: function item(_ref) {\n    var cssClasses = _ref.cssClasses,\n        url = _ref.url,\n        label = _ref.label,\n        count = _ref.count;\n    return h(\"a\", {\n      className: cx(cssClasses.link),\n      href: url\n    }, h(\"span\", {\n      className: cx(cssClasses.label)\n    }, label), h(\"span\", {\n      className: cx(cssClasses.count)\n    }, formatNumber(count)));\n  },\n  showMoreText: function showMoreText(_ref2) {\n    var isShowingMore = _ref2.isShowingMore;\n    return isShowingMore ? 'Show less' : 'Show more';\n  }\n};\nexport default defaultTemplates;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { h, render } from 'preact';\nimport { cx } from '@algolia/ui-components-shared';\nimport RefinementList from \"../../components/RefinementList/RefinementList.js\";\nimport connectMenu from \"../../connectors/menu/connectMenu.js\";\nimport defaultTemplates from \"./defaultTemplates.js\";\nimport { getContainerNode, createDocumentationMessageGenerator } from \"../../lib/utils/index.js\";\nimport { prepareTemplateProps } from \"../../lib/templating/index.js\";\nimport { component } from \"../../lib/suit.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'menu'\n});\nvar suit = component('Menu');\n\nvar renderer = function renderer(_ref) {\n  var containerNode = _ref.containerNode,\n      cssClasses = _ref.cssClasses,\n      renderState = _ref.renderState,\n      templates = _ref.templates,\n      showMore = _ref.showMore;\n  return function (_ref2, isFirstRendering) {\n    var refine = _ref2.refine,\n        items = _ref2.items,\n        createURL = _ref2.createURL,\n        instantSearchInstance = _ref2.instantSearchInstance,\n        isShowingMore = _ref2.isShowingMore,\n        toggleShowMore = _ref2.toggleShowMore,\n        canToggleShowMore = _ref2.canToggleShowMore;\n\n    if (isFirstRendering) {\n      renderState.templateProps = prepareTemplateProps({\n        defaultTemplates: defaultTemplates,\n        templatesConfig: instantSearchInstance.templatesConfig,\n        templates: templates\n      });\n      return;\n    }\n\n    var facetValues = items.map(function (facetValue) {\n      return _objectSpread(_objectSpread({}, facetValue), {}, {\n        url: createURL(facetValue.value)\n      });\n    });\n    render(h(RefinementList, {\n      createURL: createURL,\n      cssClasses: cssClasses,\n      facetValues: facetValues,\n      showMore: showMore,\n      templateProps: renderState.templateProps,\n      toggleRefinement: refine,\n      toggleShowMore: toggleShowMore,\n      isShowingMore: isShowingMore,\n      canToggleShowMore: canToggleShowMore\n    }), containerNode);\n  };\n};\n\nvar menu = function menu(widgetParams) {\n  var _ref3 = widgetParams || {},\n      container = _ref3.container,\n      attribute = _ref3.attribute,\n      sortBy = _ref3.sortBy,\n      limit = _ref3.limit,\n      showMore = _ref3.showMore,\n      showMoreLimit = _ref3.showMoreLimit,\n      _ref3$cssClasses = _ref3.cssClasses,\n      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses,\n      _ref3$templates = _ref3.templates,\n      templates = _ref3$templates === void 0 ? {} : _ref3$templates,\n      transformItems = _ref3.transformItems;\n\n  if (!container) {\n    throw new Error(withUsage('The `container` option is required.'));\n  }\n\n  var containerNode = getContainerNode(container);\n  var cssClasses = {\n    root: cx(suit(), userCssClasses.root),\n    noRefinementRoot: cx(suit({\n      modifierName: 'noRefinement'\n    }), userCssClasses.noRefinementRoot),\n    list: cx(suit({\n      descendantName: 'list'\n    }), userCssClasses.list),\n    item: cx(suit({\n      descendantName: 'item'\n    }), userCssClasses.item),\n    selectedItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'selected'\n    }), userCssClasses.selectedItem),\n    link: cx(suit({\n      descendantName: 'link'\n    }), userCssClasses.link),\n    label: cx(suit({\n      descendantName: 'label'\n    }), userCssClasses.label),\n    count: cx(suit({\n      descendantName: 'count'\n    }), userCssClasses.count),\n    showMore: cx(suit({\n      descendantName: 'showMore'\n    }), userCssClasses.showMore),\n    disabledShowMore: cx(suit({\n      descendantName: 'showMore',\n      modifierName: 'disabled'\n    }), userCssClasses.disabledShowMore)\n  };\n  var specializedRenderer = renderer({\n    containerNode: containerNode,\n    cssClasses: cssClasses,\n    renderState: {},\n    templates: templates,\n    showMore: showMore\n  });\n  var makeWidget = connectMenu(specializedRenderer, function () {\n    return render(null, containerNode);\n  });\n  return _objectSpread(_objectSpread({}, makeWidget({\n    attribute: attribute,\n    limit: limit,\n    showMore: showMore,\n    showMoreLimit: showMoreLimit,\n    sortBy: sortBy,\n    transformItems: transformItems\n  })), {}, {\n    $$widgetType: 'ais.menu'\n  });\n};\n\nexport default menu;","import { h } from 'preact';\nimport { cx } from '@algolia/ui-components-shared';\nimport { isSpecialClick } from \"../../lib/utils/index.js\";\n\nfunction Pagination(props) {\n  function createClickHandler(pageNumber) {\n    return function (event) {\n      if (isSpecialClick(event)) {\n        // do not alter the default browser behavior\n        // if one special key is down\n        return;\n      }\n\n      event.preventDefault();\n      props.setCurrentPage(pageNumber);\n    };\n  }\n\n  return h(\"div\", {\n    className: cx(props.cssClasses.root, props.nbPages <= 1 && props.cssClasses.noRefinementRoot)\n  }, h(\"ul\", {\n    className: props.cssClasses.list\n  }, props.showFirst && h(PaginationLink, {\n    ariaLabel: \"First\",\n    className: props.cssClasses.firstPageItem,\n    isDisabled: props.isFirstPage,\n    label: props.templates.first,\n    pageNumber: 0,\n    createURL: props.createURL,\n    cssClasses: props.cssClasses,\n    createClickHandler: createClickHandler\n  }), props.showPrevious && h(PaginationLink, {\n    ariaLabel: \"Previous\",\n    className: props.cssClasses.previousPageItem,\n    isDisabled: props.isFirstPage,\n    label: props.templates.previous,\n    pageNumber: props.currentPage - 1,\n    createURL: props.createURL,\n    cssClasses: props.cssClasses,\n    createClickHandler: createClickHandler\n  }), props.pages.map(function (pageNumber) {\n    return h(PaginationLink, {\n      key: pageNumber,\n      ariaLabel: \"\".concat(pageNumber + 1),\n      className: props.cssClasses.pageItem,\n      isSelected: pageNumber === props.currentPage,\n      label: \"\".concat(pageNumber + 1),\n      pageNumber: pageNumber,\n      createURL: props.createURL,\n      cssClasses: props.cssClasses,\n      createClickHandler: createClickHandler\n    });\n  }), props.showNext && h(PaginationLink, {\n    ariaLabel: \"Next\",\n    className: props.cssClasses.nextPageItem,\n    isDisabled: props.isLastPage,\n    label: props.templates.next,\n    pageNumber: props.currentPage + 1,\n    createURL: props.createURL,\n    cssClasses: props.cssClasses,\n    createClickHandler: createClickHandler\n  }), props.showLast && h(PaginationLink, {\n    ariaLabel: \"Last\",\n    className: props.cssClasses.lastPageItem,\n    isDisabled: props.isLastPage,\n    label: props.templates.last,\n    pageNumber: props.nbPages - 1,\n    createURL: props.createURL,\n    cssClasses: props.cssClasses,\n    createClickHandler: createClickHandler\n  })));\n}\n\nfunction PaginationLink(_ref) {\n  var label = _ref.label,\n      ariaLabel = _ref.ariaLabel,\n      pageNumber = _ref.pageNumber,\n      className = _ref.className,\n      _ref$isDisabled = _ref.isDisabled,\n      isDisabled = _ref$isDisabled === void 0 ? false : _ref$isDisabled,\n      _ref$isSelected = _ref.isSelected,\n      isSelected = _ref$isSelected === void 0 ? false : _ref$isSelected,\n      cssClasses = _ref.cssClasses,\n      createURL = _ref.createURL,\n      createClickHandler = _ref.createClickHandler;\n  return h(\"li\", {\n    className: cx(cssClasses.item, className, isDisabled && cssClasses.disabledItem, isSelected && cssClasses.selectedItem)\n  }, isDisabled ? h(\"span\", {\n    className: cssClasses.link,\n    dangerouslySetInnerHTML: {\n      __html: label\n    }\n  }) : h(\"a\", {\n    className: cssClasses.link,\n    \"aria-label\": ariaLabel,\n    href: createURL(pageNumber),\n    onClick: createClickHandler(pageNumber),\n    dangerouslySetInnerHTML: {\n      __html: label\n    }\n  }));\n}\n\nexport default Pagination;","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport function range(_ref) {\n  var _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      end = _ref.end,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 1 : _ref$step;\n  // We can't divide by 0 so we re-assign the step to 1 if it happens.\n  var limitStep = step === 0 ? 1 : step; // In some cases the array to create has a decimal length.\n  // We therefore need to round the value.\n  // Example:\n  //   { start: 1, end: 5000, step: 500 }\n  //   => Array length = (5000 - 1) / 500 = 9.998\n\n  var arrayLength = Math.round((end - start) / limitStep);\n  return _toConsumableArray(Array(arrayLength)).map(function (_, current) {\n    return start + current * limitStep;\n  });\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { range } from \"../../lib/utils/index.js\";\n\nvar Paginator = /*#__PURE__*/function () {\n  function Paginator(params) {\n    _classCallCheck(this, Paginator);\n\n    _defineProperty(this, \"currentPage\", void 0);\n\n    _defineProperty(this, \"total\", void 0);\n\n    _defineProperty(this, \"padding\", void 0);\n\n    this.currentPage = params.currentPage;\n    this.total = params.total;\n    this.padding = params.padding;\n  }\n\n  _createClass(Paginator, [{\n    key: \"pages\",\n    value: function pages() {\n      var total = this.total,\n          currentPage = this.currentPage,\n          padding = this.padding;\n      if (total === 0) return [0];\n      var totalDisplayedPages = this.nbPagesDisplayed(padding, total);\n\n      if (totalDisplayedPages === total) {\n        return range({\n          end: total\n        });\n      }\n\n      var paddingLeft = this.calculatePaddingLeft(currentPage, padding, total, totalDisplayedPages);\n      var paddingRight = totalDisplayedPages - paddingLeft;\n      var first = currentPage - paddingLeft;\n      var last = currentPage + paddingRight;\n      return range({\n        start: first,\n        end: last\n      });\n    }\n  }, {\n    key: \"nbPagesDisplayed\",\n    value: function nbPagesDisplayed(padding, total) {\n      return Math.min(2 * padding + 1, total);\n    }\n  }, {\n    key: \"calculatePaddingLeft\",\n    value: function calculatePaddingLeft(current, padding, total, totalDisplayedPages) {\n      if (current <= padding) {\n        return current;\n      }\n\n      if (current >= total - padding) {\n        return totalDisplayedPages - (total - current);\n      }\n\n      return padding;\n    }\n  }, {\n    key: \"isLastPage\",\n    value: function isLastPage() {\n      return this.currentPage === this.total - 1 || this.total === 0;\n    }\n  }, {\n    key: \"isFirstPage\",\n    value: function isFirstPage() {\n      return this.currentPage === 0;\n    }\n  }]);\n\n  return Paginator;\n}();\n\nexport default Paginator;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from \"../../lib/utils/index.js\";\nimport Paginator from \"./Paginator.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'pagination',\n  connector: true\n});\n\n/**\n * **Pagination** connector provides the logic to build a widget that will let the user\n * choose the current page of the results.\n *\n * When using the pagination with Algolia, you should be aware that the engine won't provide you pages\n * beyond the 1000th hits by default. You can find more information on the [Algolia documentation](https://www.algolia.com/doc/guides/searching/pagination/#pagination-limitations).\n */\nvar connectPagination = function connectPagination(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _ref = widgetParams || {},\n        totalPages = _ref.totalPages,\n        _ref$padding = _ref.padding,\n        padding = _ref$padding === void 0 ? 3 : _ref$padding;\n\n    var pager = new Paginator({\n      currentPage: 0,\n      total: 0,\n      padding: padding\n    });\n    var connectorState = {};\n\n    function getMaxPage(_ref2) {\n      var nbPages = _ref2.nbPages;\n      return totalPages !== undefined ? Math.min(totalPages, nbPages) : nbPages;\n    }\n\n    return {\n      $$type: 'ais.pagination',\n      init: function init(initOptions) {\n        var instantSearchInstance = initOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        var instantSearchInstance = renderOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), false);\n      },\n      dispose: function dispose(_ref3) {\n        var state = _ref3.state;\n        unmountFn();\n        return state.setQueryParameter('page', undefined);\n      },\n      getWidgetUiState: function getWidgetUiState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n        var page = searchParameters.page || 0;\n\n        if (!page) {\n          return uiState;\n        }\n\n        return _objectSpread(_objectSpread({}, uiState), {}, {\n          page: page + 1\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n        var page = uiState.page ? uiState.page - 1 : 0;\n        return searchParameters.setQueryParameter('page', page);\n      },\n      getWidgetRenderState: function getWidgetRenderState(_ref6) {\n        var results = _ref6.results,\n            helper = _ref6.helper,\n            state = _ref6.state,\n            createURL = _ref6.createURL;\n\n        if (!connectorState.refine) {\n          connectorState.refine = function (page) {\n            helper.setPage(page);\n            helper.search();\n          };\n        }\n\n        if (!connectorState.createURL) {\n          connectorState.createURL = function (helperState) {\n            return function (page) {\n              return createURL(helperState.setPage(page));\n            };\n          };\n        }\n\n        var page = state.page || 0;\n        var nbPages = getMaxPage(results || {\n          nbPages: 0\n        });\n        pager.currentPage = page;\n        pager.total = nbPages;\n        return {\n          createURL: connectorState.createURL(state),\n          refine: connectorState.refine,\n          canRefine: nbPages > 1,\n          currentRefinement: page,\n          nbHits: (results === null || results === void 0 ? void 0 : results.nbHits) || 0,\n          nbPages: nbPages,\n          pages: results ? pager.pages() : [],\n          isFirstPage: pager.isFirstPage(),\n          isLastPage: pager.isLastPage(),\n          widgetParams: widgetParams\n        };\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          pagination: this.getWidgetRenderState(renderOptions)\n        });\n      }\n    };\n  };\n};\n\nexport default connectPagination;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { h, render } from 'preact';\nimport { cx } from '@algolia/ui-components-shared';\nimport Pagination from \"../../components/Pagination/Pagination.js\";\nimport connectPagination from \"../../connectors/pagination/connectPagination.js\";\nimport { getContainerNode, createDocumentationMessageGenerator } from \"../../lib/utils/index.js\";\nimport { component } from \"../../lib/suit.js\";\nvar suit = component('Pagination');\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'pagination'\n});\nvar defaultTemplates = {\n  previous: '‹',\n  next: '›',\n  first: '«',\n  last: '»'\n};\n\nvar renderer = function renderer(_ref) {\n  var containerNode = _ref.containerNode,\n      cssClasses = _ref.cssClasses,\n      templates = _ref.templates,\n      showFirst = _ref.showFirst,\n      showLast = _ref.showLast,\n      showPrevious = _ref.showPrevious,\n      showNext = _ref.showNext,\n      scrollToNode = _ref.scrollToNode;\n  return function (_ref2, isFirstRendering) {\n    var createURL = _ref2.createURL,\n        currentRefinement = _ref2.currentRefinement,\n        nbPages = _ref2.nbPages,\n        pages = _ref2.pages,\n        isFirstPage = _ref2.isFirstPage,\n        isLastPage = _ref2.isLastPage,\n        refine = _ref2.refine;\n    if (isFirstRendering) return;\n\n    var setCurrentPage = function setCurrentPage(pageNumber) {\n      refine(pageNumber);\n\n      if (scrollToNode !== false) {\n        scrollToNode.scrollIntoView();\n      }\n    };\n\n    render(h(Pagination, {\n      createURL: createURL,\n      cssClasses: cssClasses,\n      currentPage: currentRefinement,\n      templates: templates,\n      nbPages: nbPages,\n      pages: pages,\n      isFirstPage: isFirstPage,\n      isLastPage: isLastPage,\n      setCurrentPage: setCurrentPage,\n      showFirst: showFirst,\n      showLast: showLast,\n      showPrevious: showPrevious,\n      showNext: showNext\n    }), containerNode);\n  };\n};\n\nvar pagination = function pagination(widgetParams) {\n  var _ref3 = widgetParams || {},\n      container = _ref3.container,\n      _ref3$templates = _ref3.templates,\n      userTemplates = _ref3$templates === void 0 ? {} : _ref3$templates,\n      _ref3$cssClasses = _ref3.cssClasses,\n      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses,\n      totalPages = _ref3.totalPages,\n      padding = _ref3.padding,\n      _ref3$showFirst = _ref3.showFirst,\n      showFirst = _ref3$showFirst === void 0 ? true : _ref3$showFirst,\n      _ref3$showLast = _ref3.showLast,\n      showLast = _ref3$showLast === void 0 ? true : _ref3$showLast,\n      _ref3$showPrevious = _ref3.showPrevious,\n      showPrevious = _ref3$showPrevious === void 0 ? true : _ref3$showPrevious,\n      _ref3$showNext = _ref3.showNext,\n      showNext = _ref3$showNext === void 0 ? true : _ref3$showNext,\n      _ref3$scrollTo = _ref3.scrollTo,\n      userScrollTo = _ref3$scrollTo === void 0 ? 'body' : _ref3$scrollTo;\n\n  if (!container) {\n    throw new Error(withUsage('The `container` option is required.'));\n  }\n\n  var containerNode = getContainerNode(container);\n  var scrollTo = userScrollTo === true ? 'body' : userScrollTo;\n  var scrollToNode = scrollTo !== false ? getContainerNode(scrollTo) : false;\n  var cssClasses = {\n    root: cx(suit(), userCssClasses.root),\n    noRefinementRoot: cx(suit({\n      modifierName: 'noRefinement'\n    }), userCssClasses.noRefinementRoot),\n    list: cx(suit({\n      descendantName: 'list'\n    }), userCssClasses.list),\n    item: cx(suit({\n      descendantName: 'item'\n    }), userCssClasses.item),\n    firstPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'firstPage'\n    }), userCssClasses.firstPageItem),\n    lastPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'lastPage'\n    }), userCssClasses.lastPageItem),\n    previousPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'previousPage'\n    }), userCssClasses.previousPageItem),\n    nextPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'nextPage'\n    }), userCssClasses.nextPageItem),\n    pageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'page'\n    }), userCssClasses.pageItem),\n    selectedItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'selected'\n    }), userCssClasses.selectedItem),\n    disabledItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'disabled'\n    }), userCssClasses.disabledItem),\n    link: cx(suit({\n      descendantName: 'link'\n    }), userCssClasses.link)\n  };\n\n  var templates = _objectSpread(_objectSpread({}, defaultTemplates), userTemplates);\n\n  var specializedRenderer = renderer({\n    containerNode: containerNode,\n    cssClasses: cssClasses,\n    templates: templates,\n    showFirst: showFirst,\n    showLast: showLast,\n    showPrevious: showPrevious,\n    showNext: showNext,\n    scrollToNode: scrollToNode\n  });\n  var makeWidget = connectPagination(specializedRenderer, function () {\n    return render(null, containerNode);\n  });\n  return _objectSpread(_objectSpread({}, makeWidget({\n    totalPages: totalPages,\n    padding: padding\n  })), {}, {\n    $$widgetType: 'ais.pagination'\n  });\n};\n\nexport default pagination;","import algoliasearch from \"algoliasearch/lite\";\nimport instantsearch from \"instantsearch.js\";\nimport { configure, hits, menu, pagination } from \"instantsearch.js/es/widgets\";\n\nconst searchClient = algoliasearch(\n  \"latency\",\n  \"6be0576ff61c053d5f9a3225e2a90f76\"\n);\n\nconst search = instantsearch({\n  indexName: \"instant_search\",\n  searchClient,\n  routing: true,\n});\n\nsearch.addWidgets([\n  hits({\n    container: \"#hits\",\n    templates: {\n      item: `\n        <article>\n          <h1>{{#helpers.highlight}}{ \"attribute\": \"name\" }{{/helpers.highlight}}</h1>\n          <p>{{#helpers.highlight}}{ \"attribute\": \"description\" }{{/helpers.highlight}}</p>\n          <p><a href=\"article.html\">See more</a></p>\n        </article>`,\n    },\n  }),\n  configure({\n    hitsPerPage: 8,\n  }),\n\n  menu({\n    container: \"#brand-list\",\n    attribute: \"brand\",\n  }),\n\n  pagination({\n    container: \"#pagination\",\n  }),\n]);\n\nsearch.start();\n"],"names":["module","exports","Hogan","findInScope","key1","scope","doModelGet","val","undefined","get","Template","codeObj","text","compiler","options","this","r","code","c","partials","subs","buf","prototype","context","indent","v","str","coerceToString","hChars","test","replace","rAmp","rLt","rGt","rApos","rQuot","t","render","ri","ep","symbol","partial","template","name","instance","base","Error","compile","key","stackText","activeSub","stackSubs","stackPartials","PartialTemplate","Substitutions","subsText","createSpecializedPartial","rp","rs","section","tail","length","isArray","i","push","pop","s","ctx","inverted","start","end","tags","pass","ms","d","returnFound","found","names","split","f","modelGet","cx","mv","ls","func","oldTags","delimiters","b","ct","call","disableLambda","fl","textSource","result","substring","sub","String","Array","a","Object","toString","$44f3a3b8f746079c$exports","e","defineProperty","value","enumerable","configurable","writable","keys","getOwnPropertySymbols","n","filter","getOwnPropertyDescriptor","apply","arguments","o","forEach","getOwnPropertyDescriptors","defineProperties","indexOf","propertyIsEnumerable","Symbol","iterator","u","next","done","e1","return","TypeError","from","concat","localStorage","window","JSON","parse","getItem","miss","Promise","resolve","then","stringify","all","set","setItem","delete","clear","removeItem","caches","shift","catch","serializable","Math","floor","random","l","encodeURIComponent","h","WithinQueryParameters","WithinHeaders","data","entries","timeout","headers","queryParameters","cacheable","m","Read","Write","Any","p","y","g","status","lastUpdate","Date","now","protocol","url","accept","O","P","q","map","getTimeout","statelessHosts","w","method","toLowerCase","userAgent","message","transporterStackTrace","A","S","path","connectTimeout","timeouts","connect","responseTimeout","request","response","host","triesLeft","onSuccess","content","onRetry","isTimedOut","logger","info","x","hostsCache","onFail","requester","send","reverse","j","add","segment","version","T","charAt","substr","join","N","appId","authMode","apiKey","requestsCache","responsesCache","hosts","read","mappedRequestOptions","transporter","reject","write","addAlgoliaAgent","clearCache","methods","C","k","indexName","J","params","requests","E","facetName","facetQuery","searchForFacetValues","R","I","query","queryLanguages","F","D","W","H","Q","XMLHttpRequest","open","setRequestHeader","setTimeout","abort","onreadystatechange","readyState","OPENED","clearTimeout","onerror","responseText","onload","debug","console","error","search","multipleQueries","multipleSearchForFacetValues","customRequest","initIndex","findAnswers","$9502336ac3aed1e4$var$isObjectOrArrayOrFunction","$9502336ac3aed1e4$var$_merge","target","source","hasOwnProperty","sourceVal","targetVal","$9502336ac3aed1e4$exports","$e559b438caa51bfb$exports","sources","slice","reduceRight","acc","$5b157c0ff2ad7fc0$exports","arr1","arr2","index","$ca2c6606a95c2f7b$exports","array","comparator","$86564e7d3ef2e569$exports","$86564e7d3ef2e569$var$valToNumber","parseFloat","$2178c71501384235$exports","excluded","sourceKeys","$cfa548e7659f4e9f$exports","obj","$e5a76b9b071b078a$exports","userToken","$3f850d57f0daaad2$var$lib","addRefinement","refinementList","attribute","isRefined","valueAsString","facetRefinement","mod","removeRefinement","clearRefinement","toggleRefinement","refinementType","hasChanged","newRefinementList","reduce","memo","values","facetList","refinementValue","containsRefinements","refinementValueAsString","$c4bce0c9191240d9$var$isEqualNumericRefinement","every","el","$c4bce0c9191240d9$var$SearchParameters","newParameters","_parseNumbers","warn","facets","disjunctiveFacets","hierarchicalFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements","self","paramName","isKeyKnown","PARAMETERS","isValueDefined","$3f850d57f0daaad2$exports","partialState","numbers","parsedValue","isNaN","insideBoundingBox","geoRect","operators","operator","parsedValues","vPrime","make","facet","rootPath","currentRefinement","getHierarchicalRefinement","clearRefinements","toggleHierarchicalFacetRefinement","validate","currentState","parameters","tagFilters","numericFilters","constructor","patch","_clearNumericRefinements","setQueryParameters","clearTags","setIndex","setQuery","newQuery","setPage","newPage","page","setFacets","setDisjunctiveFacets","setHitsPerPage","hitsPerPage","setTypoTolerance","typoTolerance","addNumericRefinement","isNumericRefined","getConjunctiveRefinements","isConjunctiveFacet","getDisjunctiveRefinements","isDisjunctiveFacet","getExcludeRefinements","removeNumericRefinement","paramValue","op","getNumericRefinements","getNumericRefinement","newNumericRefinements","operatorList","outValues","addFacet","addDisjunctiveFacet","addHierarchicalFacet","hierarchicalFacet","isHierarchicalFacet","addFacetRefinement","addExcludeRefinement","addDisjunctiveFacetRefinement","addTagRefinement","tag","isTagRefined","modification","removeFacet","removeDisjunctiveFacet","removeHierarchicalFacet","removeFacetRefinement","removeExcludeRefinement","removeDisjunctiveFacetRefinement","removeTagRefinement","toggleFacetRefinement","toggleConjunctiveFacetRefinement","toggleDisjunctiveFacetRefinement","toggleExcludeFacetRefinement","separator","_getHierarchicalFacetSeparator","getHierarchicalFacetByName","lastIndexOf","addHierarchicalFacetRefinement","isHierarchicalFacetRefined","removeHierarchicalFacetRefinement","toggleTagRefinement","isFacetRefined","isExcludeRefined","isDisjunctiveFacetRefined","refinements","isOperatorDefined","searchedValue","isAttributeValueDefined","currentValue","getRefinedDisjunctiveFacets","disjunctiveNumericRefinedFacets","getRefinedHierarchicalFacets","getUnrefinedDisjunctiveFacets","refinedFacets","managedParameters","getQueryParams","queryParams","setQueryParameter","parameter","nextWithNumbers","previousPlainObject","nextPlainObject","previous","isPreviousValueDefined","isNextValueDefined","resetPage","_getHierarchicalFacetSortBy","sortBy","_getHierarchicalRootPath","_getHierarchicalShowParentLevel","showParentLevel","hierarchicalFacetName","getHierarchicalFacetBreadcrumb","refinement","part","trim","$c4bce0c9191240d9$exports","$1a854a4d6e961755$var$compareAscending","other","valIsDefined","valIsNull","othIsDefined","othIsNull","$1a854a4d6e961755$exports","collection","iteratees","orders","criteria","iteratee","sort","object","res","$e2e2dca9584bb08b$exports","Boolean","$07664941672e18b6$exports","$0ccf2badc4dd1a49$exports","defaults","defaultInstructions","out","sortInstruction","matchingDefault","defaultInstruction","$8ab3966607d77b84$var$escapeFacetValue","$71300e2cf2e578b3$exports","escapeFacetValue","unescapeFacetValue","$8ab3966607d77b84$var$unescapeFacetValue","$735d7df0be1ead43$exports","state","hierarchicalFacetResult","hierarchicalFacetIndex","hierarchicalFacetRefinement","hierarchicalSeparator","hierarchicalRootPath","hierarchicalShowParentLevel","rootExhaustive","facetResult","exhaustive","generateTreeFn","hierarchicalTree","currentHierarchicalLevel","parent","level","subtree","picked","facetValue","tuple","parentPath","$735d7df0be1ead43$var$onlyMatchingTree","facetCount","parts","escapedValue","$735d7df0be1ead43$var$escapeFacetValue","count","$735d7df0be1ead43$var$format","$735d7df0be1ead43$var$unescapeFacetValue","$735d7df0be1ead43$var$generateHierarchicalTree","results","$8ab3966607d77b84$var$getIndices","attributes","indices","idx","$8ab3966607d77b84$var$assignFacetStats","dest","facetStats","stats","$8ab3966607d77b84$var$SearchResults","mainSubResponse","_rawResults","processingTimeMS","sum","facetsIndices","disjunctiveFacetsIndices","nextDisjunctiveResult","mainFacets","facetKey","hierarchicalAttributeName","facetValueObject","facetIndex","idxAttributeName","exhaustiveFacetsCount","position","isFacetDisjunctive","isFacetConjunctive","facets_stats","disjunctiveFacet","dfacet","facetResults","attributeIndex","dataFromMainRequest","refinedFacet","defaultData","root","excludes","_state","$8ab3966607d77b84$var$recSort","sortFn","node","children","childNode","sortedChildren","$8ab3966607d77b84$var$getFacetStatsIfAvailable","$8ab3966607d77b84$var$getRefinement","type","attributeName","resultsFacets","getFacetByName","predicate","DEFAULT_SORT","getFacetValues","opts","facetValues","isExcluded","$8ab3966607d77b84$var$extractNormalizedFacetValues","facetOrdering","renderingContent","$8ab3966607d77b84$var$getFacetOrdering","orderedFacets","remainingFacets","reverseOrder","order","item","ordering","sortRemainingBy","$8ab3966607d77b84$var$sortViaFacetOrdering","$8ab3966607d77b84$var$vanillaSortFn","getFacetStats","getRefinements","facetDeclaration","rootFacet","intermediateFacet","newFacet","$8ab3966607d77b84$var$getHierarchicalRefinement","numericValue","$8ab3966607d77b84$exports","$dff42e9643699667$var$EventEmitter","_events","_maxListeners","$dff42e9643699667$var$isFunction","arg","$dff42e9643699667$var$isObject","$dff42e9643699667$var$isUndefined","$dff42e9643699667$exports","defaultMaxListeners","setMaxListeners","emit","er","handler","len","args","listeners","err","addListener","listener","newListener","warned","trace","on","once","fired","removeListener","list","splice","removeAllListeners","listenerCount","evlistener","emitter","$601be386601458f9$var$DerivedHelper","mainHelper","fn","main","lastResults","$0a80729110afa025$exports","ctor","superCtor","create","detach","detachDerivedHelper","getModifiedState","$601be386601458f9$exports","$a26d92fd1efb8e0d$var$sortObject","localeCompare","curr","$a26d92fd1efb8e0d$var$requestBuilder","_getQueries","queries","_getHitsSearchParams","_getDisjunctiveFacetSearchParams","filtersMap","hasHierarchicalFacetFilter","some","filteredFacetFilters","facetFilters","facetFilter","filtered","filterValue","_getHitsHierarchicalFacetsAttributes","_getFacetFilters","_getNumericFilters","_getTagFilters","additionalParams","hierarchicalRootLevel","analytics","clickAnalytics","_getDisjunctiveHierarchicalFacetAttribute","vs","orFilters","attributeToRefine","attributesIndex","allAttributes","hierarchicalRefinement","newAttributes","rootLevel","parentLevel","getSearchForFacetQuery","maxFacetHits","stateForSearchForFacetValues","searchForFacetSearchParameters","$a26d92fd1efb8e0d$exports","$c131641798835750$var$AlgoliaSearchHelper","client","$4kbyH","setClient","_queryId","_lastQueryIdReceived","derivedHelpers","_currentNbQueries","$c131641798835750$var$setCurrentPage","_change","isPageReset","$c131641798835750$var$getCurrentPage","$2621fca0bea18d29$var$algoliasearchHelper","$c131641798835750$exports","$9a1cef70250cb400$export$110679b26359d23d","_ref","_ref$connector","connector","$9a1cef70250cb400$export$2fde5bffc340821e","_len","widgets","_key","links","widget","$ebb61d06e2725df1$export$dbf1227de6c1fbc6","instantSearchInstance","uiState","helper","getHelper","renderState","templatesConfig","createURL","scopedResults","searchMetadata","isSearchStalled","$ebb61d06e2725df1$export$c3ba97e79c76dd38","getResults","getScopedResults","$c6c8b80cbd5e3ac9$export$a9c9a0d43506297d","$$type","$43d76eb9a03ab4b8$export$de3a4d4a0d731119","$5632c0f0a9c6e576$export$f70730c3d1fc524e","$9bfb730df128d58d$var$ownKeys","enumerableOnly","symbols","sym","$9bfb730df128d58d$var$_objectSpread","$9bfb730df128d58d$var$_defineProperty","$9bfb730df128d58d$var$_objectWithoutProperties","$9bfb730df128d58d$var$_objectWithoutPropertiesLoose","sourceSymbolKeys","_search","onlyWithDerivedHelpers","searchOnlyWithDerivedHelpers","getQuery","searchOnce","cb","tempState","_originalResponse","derivedHelper","derivedState","attributesForPrediction","nbHits","errorMessage","userState","clientHasSFFV","clientHasInitIndex","isDisjunctive","algoliaQuery","searchForFacetValuesPromise","facetHits","$c131641798835750$require$escapeFacetValue","addDisjunctiveRefine","addRefine","addFacetExclusion","addExclude","addTag","removeDisjunctiveRefine","removeRefine","removeFacetExclusion","removeExclude","removeTag","toggleFacetExclusion","toggleExclude","toggleRefine","toggleTag","nextPage","previousPage","setCurrentPage","setState","newState","overrideStateWithoutTriggeringChangeEvent","hasRefinements","isDisjunctiveRefined","hasTag","hasTagRefinements","getIndex","getCurrentPage","getPage","getTags","states","mainQueries","queriesCount","derivedQueries","derivedStateQueries","queryId","_dispatchAlgoliaResponse","bind","_dispatchAlgoliaError","specificResults","formattedResponse","containsRefinement","_hasDisjunctiveRefinements","disjunctiveRefinements","event","newClient","getClient","derive","pos","hasPendingRequests","parcelRequire","AlgoliaSearchHelper","SearchParameters","SearchResults","$2621fca0bea18d29$exports","$9bfb730df128d58d$var$mergeWithRest","left","right","ruleContexts","rest","$9bfb730df128d58d$var$mergeFacets","_","$9bfb730df128d58d$var$mergeDisjunctiveFacets","$9bfb730df128d58d$var$mergeHierarchicalFacets","nextFacets","$9bfb730df128d58d$var$mergeTagRefinements","$9bfb730df128d58d$var$mergeFacetRefinements","$9bfb730df128d58d$var$mergeFacetsExcludes","$9bfb730df128d58d$var$mergeDisjunctiveFacetsRefinements","$9bfb730df128d58d$var$mergeNumericRefinements","$9bfb730df128d58d$var$mergeHierarchicalFacetsRefinements","$9bfb730df128d58d$var$mergeRuleContexts","$9bfb730df128d58d$export$8049d91f25899769","hierarchicalFacetsRefinementsMerged","hierarchicalFacetsMerged","tagRefinementsMerged","numericRefinementsMerged","disjunctiveFacetsRefinementsMerged","facetsExcludesMerged","facetRefinementsMerged","disjunctiveFacetsMerged","ruleContextsMerged","facetsMerged","$10c685838ecf7a68$export$1c33c9881dac6797","current","getParent","$ba0a26bb74d967c8$var$ownKeys","$ba0a26bb74d967c8$var$_objectSpread","$ba0a26bb74d967c8$var$_defineProperty","$ba0a26bb74d967c8$var$_toConsumableArray","arr","$ba0a26bb74d967c8$var$_arrayLikeToArray","$ba0a26bb74d967c8$var$_arrayWithoutHoles","iter","$ba0a26bb74d967c8$var$_iterableToArray","minLen","$ba0a26bb74d967c8$var$_unsupportedIterableToArray","$ba0a26bb74d967c8$var$_nonIterableSpread","$ba0a26bb74d967c8$var$_objectWithoutProperties","$ba0a26bb74d967c8$var$_objectWithoutPropertiesLoose","$ba0a26bb74d967c8$var$withUsage","$ba0a26bb74d967c8$var$privateHelperSetState","_uiState","$ba0a26bb74d967c8$var$getLocalWidgetsUiState","widgetStateOptions","initialUiState","getWidgetUiState","getWidgetState","$ba0a26bb74d967c8$var$getLocalWidgetsSearchParameters","widgetSearchParametersOptions","initialSearchParameters","getWidgetSearchParameters","$ba0a26bb74d967c8$var$resetPageFromWidgets","indexWidgets","widgetHelper","getWidgets","$ba0a26bb74d967c8$var$resolveScopedResultsFromWidgets","indexId","getIndexId","$ba0a26bb74d967c8$export$2e2bcd8739ae039","widgetParams","_widgetParams$indexId","localWidgets","localUiState","localInstantSearchInstance","localParent","$$widgetType","getIndexName","widgetParent","nextState","_createURL","searchParameters","addWidgets","_this","init","getRenderState","$ba0a26bb74d967c8$var$storeRenderState","_initialUiState","scheduleSearch","removeWidgets","_this2","dispose","_ref2","_instantSearchInstanc","_this3","$parcel$interopDefault","onStateChange","mainIndex","setUiState","searchWithoutTriggeringOnStateChange","indexInitialResults","_initialResults","_ref3","scheduleStalledRender","_ref4","scheduleRender","onInternalStateChange","_ref5","_this4","_this5","previousUiState","innerIndex","_ref6","refreshUiState","_ref7","parentIndexName","$d66596ea0d1993d9$export$d8556a2a8f973135","componentName","descendantName","modifierName","descendent","modifier","$825eb9c48970da3e$export$d14846335956eefa","$450f77f40abbd094$var$htmlEntities","$450f77f40abbd094$var$regexUnescapedHtml","$450f77f40abbd094$var$regexHasUnescapedHtml","RegExp","$450f77f40abbd094$export$4e7f196112fea3c5","character","$450f77f40abbd094$var$htmlCharacters","$450f77f40abbd094$var$regexEscapedHtml","$450f77f40abbd094$var$regexHasEscapedHtml","$450f77f40abbd094$export$e8bacd2802a88316","$71a6d5d45f5c7205$var$_typeof","$71a6d5d45f5c7205$export$53b83ca8eaab0383","$71a6d5d45f5c7205$var$isObjectLike","$71a6d5d45f5c7205$var$getTag","getPrototypeOf","proto","$51871fc797d322c3$var$_extends","assign","$51871fc797d322c3$var$ownKeys","$51871fc797d322c3$var$_objectSpread","$51871fc797d322c3$var$_defineProperty","$51871fc797d322c3$export$1e7338a8952eaf35","highlightPreTag","highlightPostTag","$51871fc797d322c3$export$62e796b7905e8e6b","$51871fc797d322c3$var$replaceTagsAndEscape","$51871fc797d322c3$var$recursiveEscape","input","$51871fc797d322c3$export$9adb036445aab889","hits","__escaped","hit","_highlightResult","_snippetResult","$c21ff5fce10d0c02$var$suit","$c21ff5fce10d0c02$export$2e2bcd8739ae039","_ref$highlightedTagNa","highlightedTagName","_ref$cssClasses","cssClasses","_ref2$value","attributeValue","className","highlighted","$cfb7edf2f6aa7202$export$44b4521aa38272f2","payload","btoa","$cfb7edf2f6aa7202$export$706ea24b0964bee9","serialized","decodeURIComponent","atob","$aadc205643c2bd55$var$_typeof","$aadc205643c2bd55$export$cbcfede36ce7ab2e","domElement","getAttribute","serializedPayload","$aadc205643c2bd55$export$2e2bcd8739ae039","$aadc205643c2bd55$export$a3453cc0ced8b97c","$d508e04a9bd7ba33$export$a34fe2fceda1929e","isHighlighted","$f8bf4b2f3d897ff6$export$e04d28e65b830ebf","highlightedValue","splitByPreTag","firstValue","elements","splitByPostTag","$82238039523259d7$var$hasAlphanumeric","$82238039523259d7$export$60c97785b669d08a","_parts","_parts2","isNextHighlighted","isPreviousHighlighted","$05e4db8818f8ea22$var$ownKeys","$05e4db8818f8ea22$var$_objectSpread","$05e4db8818f8ea22$var$_defineProperty","$05e4db8818f8ea22$export$8d1202a2cf66e93","$0356a55140febf94$var$suit","$0356a55140febf94$export$2e2bcd8739ae039","$443b5c41f9a3037f$var$suit","$443b5c41f9a3037f$export$2e2bcd8739ae039","$b6c2370707af3785$var$suit","$b6c2370707af3785$export$2e2bcd8739ae039","$7808f3729e904a8d$export$f5dd818bff069720","numberLocale","toLocaleString","$16b432293965da04$var$ownKeys","$16b432293965da04$var$_objectSpread","$16b432293965da04$var$_defineProperty","$16b432293965da04$export$2e2bcd8739ae039","formatNumber","Number","highlight","reverseHighlight","snippet","reverseSnippet","insights","_JSON$parse","objectIDs","objectID","$6b2589fc765a0f47$var$nextMicroTask","$6b2589fc765a0f47$export$260e5c0943f31606","callback","progress","cancelled","wait","cancel","$db04cd27b0c7d378$export$8793edee2d425525","$7bd1e60596b942f4$export$fd5e8f1329b3d5e0","finalUiState","indexWidget","nextIndexUiState","$768df5004f58dc5e$var$ownKeys","$768df5004f58dc5e$var$_objectSpread","$768df5004f58dc5e$var$_defineProperty","$768df5004f58dc5e$var$_objectWithoutProperties","$768df5004f58dc5e$var$_objectWithoutPropertiesLoose","$768df5004f58dc5e$var$getIndexStateWithoutConfigure","configure","$768df5004f58dc5e$export$2e2bcd8739ae039","stateToRoute","routeToState","routeState","$d1f90adf4e1eece6$var$replace","$d1f90adf4e1eece6$var$percentTwenties","$d1f90adf4e1eece6$var$Format","$d1f90adf4e1eece6$exports","default","formatters","RFC1738","RFC3986","$d8a7e190fdc9c6e7$var$has","$d8a7e190fdc9c6e7$var$isArray","$d8a7e190fdc9c6e7$var$hexTable","toUpperCase","$d8a7e190fdc9c6e7$var$arrayToObject","plainObjects","$d8a7e190fdc9c6e7$exports","arrayToObject","combine","compact","queue","prop","refs","compacted","$d8a7e190fdc9c6e7$var$compactQueue","decode","decoder","charset","strWithoutPlus","unescape","encode","defaultEncoder","kind","format","string","escape","$0","parseInt","charCodeAt","isBuffer","isRegExp","maybeMap","mapped","merge","allowPrototypes","mergeTarget","targetItem","$e5dd19a945a45bbb$var$has","$e5dd19a945a45bbb$var$arrayPrefixGenerators","brackets","prefix","comma","repeat","$e5dd19a945a45bbb$var$isArray","$e5dd19a945a45bbb$var$split","$e5dd19a945a45bbb$var$push","$e5dd19a945a45bbb$var$pushToArray","valueOrArray","$e5dd19a945a45bbb$var$toISO","toISOString","$e5dd19a945a45bbb$var$defaultFormat","$e5dd19a945a45bbb$var$defaults","addQueryPrefix","allowDots","charsetSentinel","delimiter","encoder","encodeValuesOnly","formatter","serializeDate","date","skipNulls","strictNullHandling","$e5dd19a945a45bbb$var$stringify","generateArrayPrefix","keyValue","valuesArray","valuesJoined","objKeys","keyPrefix","$e5dd19a945a45bbb$exports","$e5dd19a945a45bbb$var$normalizeStringifyOptions","arrayFormat","joined","$8ec5fc0fdc198ba4$var$has","$8ec5fc0fdc198ba4$var$isArray","$8ec5fc0fdc198ba4$var$defaults","arrayLimit","depth","ignoreQueryPrefix","interpretNumericEntities","parameterLimit","parseArrays","$8ec5fc0fdc198ba4$var$interpretNumericEntities","numberStr","fromCharCode","$8ec5fc0fdc198ba4$var$parseArrayValue","$8ec5fc0fdc198ba4$var$parseKeys","givenKey","valuesParsed","child","exec","chain","leaf","cleanRoot","$8ec5fc0fdc198ba4$var$parseObject","$69748373edddad9d$export$39f19eed34acd2f1","fallback","$2df91446519e0275$var$_defineProperties","props","descriptor","$2df91446519e0275$var$_defineProperty","$8ec5fc0fdc198ba4$exports","$8ec5fc0fdc198ba4$var$normalizeParseOptions","tempObj","cleanStr","limit","Infinity","skipIndex","bracketEqualsPos","encodedVal","$8ec5fc0fdc198ba4$var$parseValues","newObj","$1c66380376aa2c89$exports","formats","$2df91446519e0275$var$setWindowTitle","title","document","$2df91446519e0275$var$BrowserHistory","BrowserHistory","windowTitle","_ref$writeDelay","writeDelay","parseURL","getLocation","Constructor","$2df91446519e0275$var$_classCallCheck","writeTimer","window1","latestAcknowledgedHistory","history","protoProps","staticProps","qsModule","location","shouldWrite","pushState","inPopState","_onPopState","addEventListener","isDisposed","removeEventListener","lastPushWasByISAfterDispose","href","$2df91446519e0275$export$2e2bcd8739ae039","_ref7$createURL","_ref8","hostname","_location$port","port","pathname","hash","queryString","portWithPrefix","_ref7$parseURL","_ref9","_ref7$writeDelay","_ref7$getLocation","_ref10","$ce35a32ac7d7f621$var$isPrimitive","$ce35a32ac7d7f621$export$248d38f6296296c5","first","second","_i","_Object$keys","$28257db10a71f294$var$ownKeys","$28257db10a71f294$var$_objectSpread","$28257db10a71f294$var$_defineProperty","$28257db10a71f294$export$1fe5128387816284","_props$router","router","_props$stateMapping","stateMapping","route","lastRouteState","subscribe","onUpdate","started","unsubscribe","$c85cce681d003c95$var$extractPayload","initOptions","getWidgetRenderState","widgetType","$c85cce681d003c95$export$8ee9d2447935ed96","payloadContainer","createElement","refNode","querySelector","ua","_ua","appendChild","remove","$48728e0599915634$var$_typeof","$48728e0599915634$var$ownKeys","$48728e0599915634$var$_objectSpread","$48728e0599915634$var$_defineProperty","$48728e0599915634$var$_defineProperties","$48728e0599915634$var$_setPrototypeOf","setPrototypeOf","__proto__","$48728e0599915634$var$_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","$48728e0599915634$var$_isNativeReflectConstruct","Super","$48728e0599915634$var$_getPrototypeOf","NewTarget","$48728e0599915634$var$_possibleConstructorReturn","$48728e0599915634$var$_assertThisInitialized","ReferenceError","$48728e0599915634$var$withUsage","$48728e0599915634$var$defaultCreateURL","$48728e0599915634$var$InstantSearch","_EventEmitter","subClass","superClass","$48728e0599915634$var$_inherits","InstantSearch","_super","$48728e0599915634$var$_classCallCheck","shouldResetStatus","_searchStalledTimer","nextUiState","middleware","_options$indexName","_options$initialUiSta","_options$routing","routing","searchFunction","_options$stalledSearc","stalledSearchDelay","_options$searchClient","searchClient","_options$insightsClie","insightsClient","_options$onStateChang","helpers","compileOptions","_stalledSearchDelay","_searchFunction","sendEventToInsights","routerOptions","use","_window$navigator","_window$navigator$use","navigator","newMiddlewareList","newMiddleware","creator","_len2","middlewareToUnuse","_key2","includes","fakeClient","_mainHelperSearch","mainIndexHelper","searchFunctionHelper","originalScheduleSearch","callOnStateChange","$48728e0599915634$export$2e2bcd8739ae039","$7d63a47d10d26a07$var$_typeof","$7d63a47d10d26a07$export$61f1c6e9cd2ed687","cookie","cookies","$7d63a47d10d26a07$var$getCookie","$cfa2cadf0c70c0a7$var$_objectWithoutProperties","$cfa2cadf0c70c0a7$var$_objectWithoutPropertiesLoose","$cfa2cadf0c70c0a7$var$getStateWithoutPage","$01d5344343bfadb9$export$b680e6b2c82f8c2f","$efe94a4e8e6788a3$var$instantsearch","createInfiniteHitsSessionStorageCache","sessionStorage","cache","SyntaxError","getInsightsAnonymousUserToken","$fdd6cc2d948c1c01$var$ownKeys","$fdd6cc2d948c1c01$var$_objectSpread","$fdd6cc2d948c1c01$var$_defineProperty","$fdd6cc2d948c1c01$var$withUsage","$fdd6cc2d948c1c01$var$getInitialSearchParameters","$fdd6cc2d948c1c01$export$2e2bcd8739ae039","renderFn","unmountFn","connectorState","renderOptions","_renderState$configur","widgetRenderState","refine","actualState","nextSearchParameters","$f207bc4d2063b2fc$var$ownKeys","$f207bc4d2063b2fc$var$_objectSpread","$f207bc4d2063b2fc$var$_defineProperty","vnodeId","rerenderQueue","prevDebounce","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","removeNode","parentNode","removeChild","ref","normalizedProps","defaultProps","createVNode","original","vnode","__k","__","__b","__e","__d","__c","__h","__v","Fragment","Component","getDomSibling","childIndex","sibling","updateParentDomPointers","enqueueRender","process","debounceRendering","__r","component","commitQueue","oldVNode","oldDom","parentDom","__P","diff","ownerSVGElement","commitRoot","diffChildren","renderResult","newParentVNode","oldParentVNode","globalContext","isSvg","excessDomChildren","isHydrating","childVNode","newDom","firstChildDom","oldChildren","oldChildrenLength","reorderChildren","placeChild","unmount","applyRef","tmp","nextDom","sibDom","outer","nextSibling","insertBefore","setStyle","style","setProperty","dom","oldValue","useCapture","cssText","eventProxyCapture","eventProxy","removeAttribute","setAttribute","newVNode","isNew","oldProps","oldState","snapshot","clearProcessingException","newProps","provider","componentContext","renderHook","newType","contextType","__E","doRender","_sb","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","oldHtml","newHtml","nodeType","localName","createTextNode","createElementNS","is","childNodes","dangerouslySetInnerHTML","__html","innerHTML","diffProps","hydrate","checked","diffElementNodes","diffed","parentVNode","skipRemove","componentWillUnmount","replaceNode","firstChild","$3a144c48dbe340ec$export$a274e22fb40f762e","$c2ad2e756459ed3f$var$ownKeys","$c2ad2e756459ed3f$var$_objectSpread","$c2ad2e756459ed3f$var$_defineProperty","$c2ad2e756459ed3f$export$33d742d8ee5a4609","__position","$fa5e32afbc529f54$var$ownKeys","$fa5e32afbc529f54$var$_objectSpread","$fa5e32afbc529f54$var$_defineProperty","$fa5e32afbc529f54$export$b8f834386ea30952","queryID","__queryID","$21ce532af88f27d3$export$adc2a8e09aa583ee","rendering","usage","$5c0c19f228d61d58$var$_typeof","errorInfo","handled","getDerivedStateFromError","componentDidCatch","update","forceUpdate","$5c0c19f228d61d58$var$buildPayloads","methodName","eventType","eventName","hitsArray","$5c0c19f228d61d58$var$removeEscapedFromHits","hitsChunks","chunkSize","chunks","ceil","$5c0c19f228d61d58$var$chunk","objectIDsByChunk","batch","positionsByChunk","insightsMethod","positions","$5c0c19f228d61d58$export$4139f3a7130239e3","payloads","$5c0c19f228d61d58$export$5a3d9973824d9b76","$ee17f9739c3013b3$var$ownKeys","$ee17f9739c3013b3$var$_objectSpread","$ee17f9739c3013b3$var$_defineProperty","$ee17f9739c3013b3$var$withUsage","$ee17f9739c3013b3$export$2e2bcd8739ae039","sendEvent","bindEvent","_ref$escapeHTML","escapeHTML","_ref$transformItems","transformItems","items","hitsWithAbsolutePositionAndQueryID","rIsWhitespace","rNewline","rCr","rSlash","rLineSep","rParagraphSep","cleanTripleStache","token","tagChange","$","_v","_t","scan","tagType","tokens","seenTag","lineStart","otag","ctag","addBuf","filterLine","haveSeenTag","noNewLine","isAllWhitespace","match","lineIsWhitespace","changeDelimiters","close","closeIndex","allowedInSuper","buildTree","stack","customTags","instructions","opener","isOpener","nodes","isCloser","last","stringifyPartials","esc","stringifySubstitutions","wrapMain","serialNo","chooseMethod","createPartial","tripleStache","generate","tree","walk","asString","makeTemplate","makePartials","Function","codegen","inPartial","nodelist","sectionTags","cacheKey","$bad1022ac74920bb$exports","$816aa58de5fedfcf$exports","$46eb45435212d36d$var$n","$46eb45435212d36d$var$t","Map","$5d836d6e65da64f6$export$c0bb0b647f701bb5","$13c40c34b78c8ee2$export$c8a8987d4410bf2d","$27ab08c24269de64$var$_extends","$27ab08c24269de64$exports","__esModule","$8bc9a7bbcf9a2a3b$exports","$c5fdcdd8d5286ae7$exports","$fbd6f26714994f60$var$_excluded","HighlightPart","$63c5368f46370bc7$export$57a0c6fc80bec05c","$13c40c34b78c8ee2$export$ffb0004e005737fa","classNames","nonHighlightedTagName","nonHighlighted","$fbd6f26714994f60$var$createHighlightPartComponent","_ref4$highlightedTagN","_ref4$nonHighlightedT","_ref4$separator","_ref4$classNames","partIndex","isLastPart","subPart","subPartIndex","$c512b62b9cc8fd2e$var$_extends","$c512b62b9cc8fd2e$var$_objectWithoutProperties","$c512b62b9cc8fd2e$var$_objectWithoutPropertiesLoose","$c512b62b9cc8fd2e$export$39dbc3f558091353","_ref$classNames","$aa13f8766aec4fdc$export$45b10814cc054894","$8d15ee28eaadcbc3$var$_extends","$8d15ee28eaadcbc3$var$_objectWithoutProperties","$8d15ee28eaadcbc3$var$_objectWithoutPropertiesLoose","$8d15ee28eaadcbc3$export$39dbc3f558091353","$2c82d07de407efd1$var$_extends","$2c82d07de407efd1$var$_objectWithoutProperties","$2c82d07de407efd1$var$_objectWithoutPropertiesLoose","$2c82d07de407efd1$export$f346643e8570b662","$18ea83ce696eccc4$var$_extends","$18ea83ce696eccc4$var$ownKeys","$18ea83ce696eccc4$var$_objectSpread","$18ea83ce696eccc4$var$_defineProperty","$18ea83ce696eccc4$var$_objectWithoutProperties","$18ea83ce696eccc4$var$_objectWithoutPropertiesLoose","$18ea83ce696eccc4$export$f346643e8570b662","$12bdf8672f0fd6c0$var$_extends","$12bdf8672f0fd6c0$var$_objectWithoutProperties","$12bdf8672f0fd6c0$var$_objectWithoutPropertiesLoose","$12bdf8672f0fd6c0$export$235f9e0721ad46fa","$17abdc462fa8fcea$var$_extends","$17abdc462fa8fcea$var$ownKeys","$17abdc462fa8fcea$var$_objectSpread","$17abdc462fa8fcea$var$_defineProperty","$17abdc462fa8fcea$var$_objectWithoutProperties","$17abdc462fa8fcea$var$_objectWithoutPropertiesLoose","$17abdc462fa8fcea$export$235f9e0721ad46fa","$7c2731038c01b48d$var$_extends","$7c2731038c01b48d$var$_objectWithoutProperties","$7c2731038c01b48d$var$_objectWithoutPropertiesLoose","$7c2731038c01b48d$export$10c56fa12fda26f9","$0ae032cbefcac09e$var$_extends","$0ae032cbefcac09e$var$_objectWithoutProperties","$0ae032cbefcac09e$var$_objectWithoutPropertiesLoose","$0ae032cbefcac09e$export$10c56fa12fda26f9","$1776ecf81ec92751$var$_typeof","$1776ecf81ec92751$var$ownKeys","$1776ecf81ec92751$var$_objectSpread","$1776ecf81ec92751$var$_defineProperty","$1776ecf81ec92751$export$b5c363744c17aeab","templates","templateKey","html","components","Highlight","ReverseHighlight","Snippet","ReverseSnippet","transformedHelpers","helperKey","$1776ecf81ec92751$var$transformHelpersToHogan","spaces","$819f7aa05bbfba7e$var$_extends","$819f7aa05bbfba7e$var$_typeof","$819f7aa05bbfba7e$var$_classCallCheck","$819f7aa05bbfba7e$var$_defineProperties","$819f7aa05bbfba7e$var$_setPrototypeOf","$819f7aa05bbfba7e$var$_createSuper","$819f7aa05bbfba7e$var$_isNativeReflectConstruct","$819f7aa05bbfba7e$var$_getPrototypeOf","$819f7aa05bbfba7e$var$_possibleConstructorReturn","$819f7aa05bbfba7e$var$_assertThisInitialized","$819f7aa05bbfba7e$var$Template","_Component","$819f7aa05bbfba7e$var$_inherits","$13c40c34b78c8ee2$export$16fa2f45be04daa8","nextProps","rootProps","RootTagName","rootTagName","useCustomCompileOptions","$819f7aa05bbfba7e$var$_defineProperty","$819f7aa05bbfba7e$export$2e2bcd8739ae039","$33b19f43b839a662$var$ownKeys","$33b19f43b839a662$var$_objectSpread","$33b19f43b839a662$var$_defineProperty","$33b19f43b839a662$var$_extends","$33b19f43b839a662$export$2e2bcd8739ae039","templateProps","emptyRoot","__hitIndex","$523f3bf32737dca7$export$2e2bcd8739ae039","empty","$49e8c633bf16687c$export$ffb2c7b8d67c359a","selectorOrHTMLElement","isSelectorString","HTMLElement","$5b0dd994114ed26b$var$ownKeys","$5b0dd994114ed26b$var$_defineProperty","$5b0dd994114ed26b$var$_toConsumableArray","$5b0dd994114ed26b$var$_arrayLikeToArray","$5b0dd994114ed26b$var$_arrayWithoutHoles","$5b0dd994114ed26b$var$_iterableToArray","$5b0dd994114ed26b$var$_unsupportedIterableToArray","$5b0dd994114ed26b$var$_nonIterableSpread","$5b0dd994114ed26b$export$2938ff6a58d41f25","defaultTemplates","preparedTemplates","config","defaultTemplate","customTemplate","isCustomTemplate","$5b0dd994114ed26b$var$prepareTemplates","$5b0dd994114ed26b$var$_objectSpread","$afc257b3734b402e$var$ownKeys","$afc257b3734b402e$var$_objectSpread","$afc257b3734b402e$var$_defineProperty","$afc257b3734b402e$export$24bd91850d68b36c","selectedHits","selectedObjectIDs","$afc257b3734b402e$var$getSelectedHits","queryIDs","$afc257b3734b402e$var$getQueryID","$afc257b3734b402e$var$getPositions","$afc257b3734b402e$export$2e2bcd8739ae039","isFirstRender","aa","withInstantSearchUsage","inferredPayload","$afc257b3734b402e$var$wrapInsightsClient","$f6e78872e7d32414$var$findInsightsTarget","startElement","endElement","validator","element","parentElement","$f6e78872e7d32414$export$2e2bcd8739ae039","BaseComponent","onClick","targetWithEvent","currentTarget","hasAttribute","$f6e78872e7d32414$var$parseInsightsEvent","single","insightsTarget","_readDataAttributes","_payload","$8e1466539b591775$var$ownKeys","$8e1466539b591775$var$_objectSpread","$8e1466539b591775$var$_defineProperty","$8e1466539b591775$var$withUsage","$8e1466539b591775$var$suit","$8e1466539b591775$var$HitsWithInsightsListener","$8e1466539b591775$export$2e2bcd8739ae039","container","_ref3$templates","_ref3$cssClasses","userCssClasses","containerNode","specializedRenderer","isFirstRendering","receivedHits","$13c40c34b78c8ee2$export$b3890eb0ae9dca99","$8e1466539b591775$var$renderer","makeWidget","$ce842980b1dc8270$export$5b1771037ab7c451","button","altKey","ctrlKey","metaKey","shiftKey","$8ce1b04da7bed3ea$var$_extends","$8ce1b04da7bed3ea$export$2e2bcd8739ae039","handleClick","facetValueToRefine","templateData","subItems","originalEvent","$11ad6fd9a86271ea$var$_typeof","$11ad6fd9a86271ea$var$_classCallCheck","$11ad6fd9a86271ea$var$_defineProperties","$11ad6fd9a86271ea$var$_setPrototypeOf","$11ad6fd9a86271ea$var$_createSuper","$11ad6fd9a86271ea$var$_isNativeReflectConstruct","$11ad6fd9a86271ea$var$_getPrototypeOf","$11ad6fd9a86271ea$var$_possibleConstructorReturn","$11ad6fd9a86271ea$var$_assertThisInitialized","$11ad6fd9a86271ea$var$_defineProperty","$11ad6fd9a86271ea$var$defaultProps","showSubmit","showReset","showLoadingIndicator","autofocus","searchAsYouType","disabled","onChange","onSubmit","onReset","$11ad6fd9a86271ea$var$SearchBox","$11ad6fd9a86271ea$var$_inherits","SearchBox","focused","_this$props","_this$props2","preventDefault","stopPropagation","blur","_this$props3","focus","_this$props4","placeholder","action","role","form","noValidate","autoFocus","autoComplete","autoCorrect","autoCapitalize","spellCheck","maxLength","onInput","onBlur","onFocus","submit","hidden","reset","loadingIndicator","$11ad6fd9a86271ea$export$2e2bcd8739ae039","$69f46177937aeb46$var$_typeof","$69f46177937aeb46$var$ownKeys","$69f46177937aeb46$var$_objectSpread","$69f46177937aeb46$var$_defineProperty","$69f46177937aeb46$var$_extends","$69f46177937aeb46$var$_objectWithoutProperties","$69f46177937aeb46$var$_objectWithoutPropertiesLoose","$69f46177937aeb46$var$_defineProperties","$69f46177937aeb46$var$_setPrototypeOf","$69f46177937aeb46$var$_createSuper","$69f46177937aeb46$var$_isNativeReflectConstruct","$69f46177937aeb46$var$_getPrototypeOf","$69f46177937aeb46$var$_possibleConstructorReturn","$69f46177937aeb46$var$_assertThisInitialized","$69f46177937aeb46$var$isHierarchicalMenuItem","$69f46177937aeb46$var$RefinementList","$69f46177937aeb46$var$_inherits","RefinementList","$69f46177937aeb46$var$_classCallCheck","handleItemClick","_this$props$cssClasse","showMore","childList","isFromSearch","refinementListItemClassName","selectedItem","disabledItem","parentItem","tagName","searchBox","resetInput","actualValue","showMoreButtonClassName","canToggleShowMore","disabledShowMore","showMoreButton","toggleShowMore","isShowingMore","shouldDisableSearchBox","searchIsAlwaysActive","hasExhaustiveItems","searchFacetValues","searchPlaceholder","searchable","searchBoxTemplateProps","refineFirstValue","_generateFacetItem","noResults","noRefinementRoot","$69f46177937aeb46$export$2e2bcd8739ae039","$b01044cc5321f418$export$12368a7050a31bdd","$4f1c7875ce9af800$var$_typeof","$4f1c7875ce9af800$export$75bfa3473d01f29f","attr","_args$","filters","$b1a1768d4cd3318b$var$_objectWithoutProperties","$b1a1768d4cd3318b$var$_objectWithoutPropertiesLoose","$b1a1768d4cd3318b$var$_slicedToArray","$b1a1768d4cd3318b$var$_arrayWithHoles","_arr","_n","_d","_e","_s","$b1a1768d4cd3318b$var$_iterableToArrayLimit","$b1a1768d4cd3318b$var$_arrayLikeToArray","$b1a1768d4cd3318b$var$_unsupportedIterableToArray","$b1a1768d4cd3318b$var$_nonIterableRest","$b1a1768d4cd3318b$var$ownKeys","$b1a1768d4cd3318b$var$_objectSpread","$b1a1768d4cd3318b$var$_defineProperty","$b1a1768d4cd3318b$var$withUsage","$b1a1768d4cd3318b$var$DEFAULT_SORT","$b1a1768d4cd3318b$export$2e2bcd8739ae039","_refine","_ref$limit","_ref$showMore","_ref$showMoreLimit","showMoreLimit","_ref$sortBy","cachedToggleShowMore","getLimit","menu","refinedItem","createToggleShowMore","facetItems","label","canRefine","withFacetConfiguration","currentMaxValuesPerFacet","maxValuesPerFacet","nextMaxValuesPerFacet","max","withMaxValuesPerFacet","$0306a56d54883e13$export$2e2bcd8739ae039","link","showMoreText","$1f90b5c86798910c$var$ownKeys","$1f90b5c86798910c$var$_objectSpread","$1f90b5c86798910c$var$_defineProperty","$1f90b5c86798910c$var$withUsage","$1f90b5c86798910c$var$suit","$1f90b5c86798910c$export$2e2bcd8739ae039","$1f90b5c86798910c$var$renderer","$e803978a470ee444$var$PaginationLink","ariaLabel","pageNumber","_ref$isDisabled","isDisabled","_ref$isSelected","isSelected","createClickHandler","$e803978a470ee444$export$2e2bcd8739ae039","nbPages","showFirst","firstPageItem","isFirstPage","showPrevious","previousPageItem","currentPage","pages","pageItem","showNext","nextPageItem","isLastPage","showLast","lastPageItem","$f3ececa64fea1dba$var$_toConsumableArray","$f3ececa64fea1dba$var$_arrayLikeToArray","$f3ececa64fea1dba$var$_arrayWithoutHoles","$f3ececa64fea1dba$var$_iterableToArray","$f3ececa64fea1dba$var$_unsupportedIterableToArray","$f3ececa64fea1dba$var$_nonIterableSpread","$f3ececa64fea1dba$export$d02631cccf789723","_ref$start","_ref$step","step","limitStep","arrayLength","round","$da36d675dc25800d$var$_defineProperties","$da36d675dc25800d$var$_defineProperty","$da36d675dc25800d$export$2e2bcd8739ae039","Paginator","$da36d675dc25800d$var$_classCallCheck","total","padding","totalDisplayedPages","nbPagesDisplayed","paddingLeft","calculatePaddingLeft","min","$891297d9ae5dfb83$var$ownKeys","$891297d9ae5dfb83$var$_objectSpread","$891297d9ae5dfb83$var$_defineProperty","$891297d9ae5dfb83$var$withUsage","$891297d9ae5dfb83$export$2e2bcd8739ae039","totalPages","_ref$padding","pager","helperState","getMaxPage","pagination","$9528738f56fe4d28$var$ownKeys","$9528738f56fe4d28$var$_objectSpread","$9528738f56fe4d28$var$_defineProperty","$9528738f56fe4d28$var$suit","$9528738f56fe4d28$var$withUsage","$9528738f56fe4d28$var$defaultTemplates","$9528738f56fe4d28$export$2e2bcd8739ae039","userTemplates","_ref3$showFirst","_ref3$showLast","_ref3$showPrevious","_ref3$showNext","_ref3$scrollTo","scrollTo","userScrollTo","scrollToNode","scrollIntoView","$9528738f56fe4d28$var$renderer","$e73bf42412feb220$var$searchClient","$e73bf42412feb220$var$search"],"version":3,"file":"index.cb40fc8e.js.map"}